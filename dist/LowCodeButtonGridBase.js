/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
var LCB;
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/Exceptions/ButtonException.ts":
/*!*******************************************!*\
  !*** ./src/Exceptions/ButtonException.ts ***!
  \*******************************************/
/***/ (function(__unused_webpack_module, exports) {

eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.ExceptionLowCodeButton = void 0;\nvar ExceptionLowCodeButton = /** @class */ (function () {\n    function ExceptionLowCodeButton() {\n    }\n    ExceptionLowCodeButton.buttonSettingNotFound = function (buttonSettingName) {\n        return __awaiter(this, void 0, void 0, function () {\n            var errorStrings;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        errorStrings = {\n                            text: \"Button setting not found: \".concat(buttonSettingName),\n                            title: \"Button Setting Not Found\",\n                        };\n                        return [4 /*yield*/, Xrm.Navigation.openAlertDialog(errorStrings)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    ExceptionLowCodeButton.buttonAdvancedSettingNotFound = function (lcid) {\n        return __awaiter(this, void 0, void 0, function () {\n            var errorStrings;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        errorStrings = {\n                            text: \"Button advanced setting not found for the LCID \".concat(lcid),\n                            title: \"Button Advanced Setting Not Found\",\n                        };\n                        return [4 /*yield*/, Xrm.Navigation.openAlertDialog(errorStrings)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    ExceptionLowCodeButton.displayGenericErrorNotification = function (title, text) {\n        return __awaiter(this, void 0, void 0, function () {\n            var errorStrings;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        errorStrings = {\n                            text: text,\n                            title: title,\n                        };\n                        return [4 /*yield*/, Xrm.Navigation.openAlertDialog(errorStrings)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return ExceptionLowCodeButton;\n}());\nexports.ExceptionLowCodeButton = ExceptionLowCodeButton;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvRXhjZXB0aW9ucy9CdXR0b25FeGNlcHRpb24udHMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBLDRCQUE0QiwrREFBK0QsaUJBQWlCO0FBQzVHO0FBQ0Esb0NBQW9DLE1BQU0sK0JBQStCLFlBQVk7QUFDckYsbUNBQW1DLE1BQU0sbUNBQW1DLFlBQVk7QUFDeEYsZ0NBQWdDO0FBQ2hDO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxjQUFjLDZCQUE2QiwwQkFBMEIsY0FBYyxxQkFBcUI7QUFDeEcsNklBQTZJLGNBQWM7QUFDM0osdUJBQXVCLHNCQUFzQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0M7QUFDeEMsbUNBQW1DLFNBQVM7QUFDNUMsbUNBQW1DLFdBQVcsVUFBVTtBQUN4RCwwQ0FBMEMsY0FBYztBQUN4RDtBQUNBLDhHQUE4RyxPQUFPO0FBQ3JILGlGQUFpRixpQkFBaUI7QUFDbEcseURBQXlELGdCQUFnQixRQUFRO0FBQ2pGLCtDQUErQyxnQkFBZ0IsZ0JBQWdCO0FBQy9FO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQSxVQUFVLFlBQVksYUFBYSxTQUFTLFVBQVU7QUFDdEQsb0NBQW9DLFNBQVM7QUFDN0M7QUFDQTtBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsOEJBQThCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vTENCLy4vc3JjL0V4Y2VwdGlvbnMvQnV0dG9uRXhjZXB0aW9uLnRzP2VkZTUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbnZhciBfX2dlbmVyYXRvciA9ICh0aGlzICYmIHRoaXMuX19nZW5lcmF0b3IpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBib2R5KSB7XG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZyA9IE9iamVjdC5jcmVhdGUoKHR5cGVvZiBJdGVyYXRvciA9PT0gXCJmdW5jdGlvblwiID8gSXRlcmF0b3IgOiBPYmplY3QpLnByb3RvdHlwZSk7XG4gICAgcmV0dXJuIGcubmV4dCA9IHZlcmIoMCksIGdbXCJ0aHJvd1wiXSA9IHZlcmIoMSksIGdbXCJyZXR1cm5cIl0gPSB2ZXJiKDIpLCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XG4gICAgICAgIHdoaWxlIChnICYmIChnID0gMCwgb3BbMF0gJiYgKF8gPSAwKSksIF8pIHRyeSB7XG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcbiAgICB9XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5FeGNlcHRpb25Mb3dDb2RlQnV0dG9uID0gdm9pZCAwO1xudmFyIEV4Y2VwdGlvbkxvd0NvZGVCdXR0b24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRXhjZXB0aW9uTG93Q29kZUJ1dHRvbigpIHtcbiAgICB9XG4gICAgRXhjZXB0aW9uTG93Q29kZUJ1dHRvbi5idXR0b25TZXR0aW5nTm90Rm91bmQgPSBmdW5jdGlvbiAoYnV0dG9uU2V0dGluZ05hbWUpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGVycm9yU3RyaW5ncztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yU3RyaW5ncyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBcIkJ1dHRvbiBzZXR0aW5nIG5vdCBmb3VuZDogXCIuY29uY2F0KGJ1dHRvblNldHRpbmdOYW1lKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJCdXR0b24gU2V0dGluZyBOb3QgRm91bmRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBYcm0uTmF2aWdhdGlvbi5vcGVuQWxlcnREaWFsb2coZXJyb3JTdHJpbmdzKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBFeGNlcHRpb25Mb3dDb2RlQnV0dG9uLmJ1dHRvbkFkdmFuY2VkU2V0dGluZ05vdEZvdW5kID0gZnVuY3Rpb24gKGxjaWQpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGVycm9yU3RyaW5ncztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yU3RyaW5ncyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBcIkJ1dHRvbiBhZHZhbmNlZCBzZXR0aW5nIG5vdCBmb3VuZCBmb3IgdGhlIExDSUQgXCIuY29uY2F0KGxjaWQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIkJ1dHRvbiBBZHZhbmNlZCBTZXR0aW5nIE5vdCBGb3VuZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIFhybS5OYXZpZ2F0aW9uLm9wZW5BbGVydERpYWxvZyhlcnJvclN0cmluZ3MpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEV4Y2VwdGlvbkxvd0NvZGVCdXR0b24uZGlzcGxheUdlbmVyaWNFcnJvck5vdGlmaWNhdGlvbiA9IGZ1bmN0aW9uICh0aXRsZSwgdGV4dCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZXJyb3JTdHJpbmdzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JTdHJpbmdzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHRleHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRpdGxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIFhybS5OYXZpZ2F0aW9uLm9wZW5BbGVydERpYWxvZyhlcnJvclN0cmluZ3MpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBFeGNlcHRpb25Mb3dDb2RlQnV0dG9uO1xufSgpKTtcbmV4cG9ydHMuRXhjZXB0aW9uTG93Q29kZUJ1dHRvbiA9IEV4Y2VwdGlvbkxvd0NvZGVCdXR0b247XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/Exceptions/ButtonException.ts\n");

/***/ }),

/***/ "./src/Helpers/BaseHelper.ts":
/*!***********************************!*\
  !*** ./src/Helpers/BaseHelper.ts ***!
  \***********************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.BaseHelper = void 0;\nvar ButtonException_1 = __webpack_require__(/*! ../Exceptions/ButtonException */ \"./src/Exceptions/ButtonException.ts\");\n/**\n * BaseHelper provides core functionality for determining context type and retrieving\n * configuration objects (button setting and advanced setting) using fetch XML queries.\n */\nvar BaseHelper = /** @class */ (function () {\n    function BaseHelper() {\n    }\n    /**\n     * Determines the button location based on the provided context.\n     * - If the context is a FormContext, sets containerType to \"form\" and stores it.\n     * - If the context is a GridControl, sets containerType to \"grid\" or \"subgrid\"\n     *   depending on whether getParent() returns a non-null value.\n     *\n     * @param context - Either a FormContext or a GridControl.\n     */\n    BaseHelper.prototype.getButtonLocation = function (context) {\n        if (context) {\n            if (typeof context.data === \"object\") {\n                this.formContext = context;\n                this.containerType = \"form\";\n            }\n            else if (typeof context.getGrid === \"function\") {\n                this.gridControl = context;\n                if (typeof this.gridControl.getParent === \"function\" && this.gridControl.getParent() !== null) {\n                    this.containerType = \"subgrid\";\n                }\n                else {\n                    this.containerType = \"grid\";\n                }\n            }\n        }\n    };\n    /**\n     * Retrieves the current user's language code from the global context.\n     *\n     * @returns The language code.\n     */\n    BaseHelper.prototype.getLanguageCode = function () {\n        return Xrm.Utility.getGlobalContext().userSettings.languageId;\n    };\n    /**\n     * Retrieves the current user's ID as a lowercase string with curly braces removed.\n     *\n     * @returns The user ID.\n     */\n    BaseHelper.prototype.getUserID = function () {\n        return Xrm.Utility.getGlobalContext().userSettings.userId.replace(\"{\", \"\").replace(\"}\", \"\").toLowerCase();\n    };\n    /**\n     * Retrieves the Entity Plural Name for the provided entity logical name.\n     *\n     * @returns The Entity Plural Name.\n     */\n    BaseHelper.prototype.getEntityPluralName = function (entity) {\n        return __awaiter(this, void 0, void 0, function () {\n            var name;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, Xrm.Utility.getEntityMetadata(entity)];\n                    case 1:\n                        name = _a.sent();\n                        return [2 /*return*/, name.EntitySetName];\n                }\n            });\n        });\n    };\n    /**\n     * Makes an HTTP request using fetch with pre-configured headers.\n     *\n     * @param method - The HTTP method (e.g., \"GET\", \"POST\").\n     * @param url - The URL to send the request to.\n     * @param body - Optional request body.\n     * @returns A Promise that resolves to the Response.\n     */\n    BaseHelper.prototype.makeRequest = function (method, url, body) {\n        return __awaiter(this, void 0, void 0, function () {\n            var headers, options;\n            return __generator(this, function (_a) {\n                headers = {\n                    \"Content-Type\": \"application/json\",\n                    \"OData-MaxVersion\": \"4.0\",\n                    \"OData-Version\": \"4.0\",\n                    Accept: \"application/json\",\n                    Prefer: \"odata.include-annotations=*\",\n                };\n                options = {\n                    method: method,\n                    headers: headers,\n                    body: body ? JSON.stringify(body) : undefined,\n                };\n                return [2 /*return*/, fetch(url, options)];\n            });\n        });\n    };\n    /**\n     * Retrieves the button setting record using the provided button setting name.\n     *\n     * @param buttonSettingName - The name of the button setting to retrieve.\n     * @returns A Promise that resolves to the esp_ButtonSetting or null.\n     * @throws An error if the fetch fails.\n     */\n    BaseHelper.prototype.getButtonSetting = function (buttonSettingName) {\n        return __awaiter(this, void 0, void 0, function () {\n            var fetchXml, query, url, response, data, setting, _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        fetchXml = \"\\n      <fetch top=\\\"1\\\">\\n        <entity name=\\\"esp_buttonsetting\\\">\\n          <attribute name=\\\"esp_buttonsettingid\\\" />\\n          <attribute name=\\\"esp_buttonlocation\\\" />\\n          <attribute name=\\\"esp_endpoint\\\" />\\n          <attribute name=\\\"esp_includecallinguseridinpayload\\\" />\\n          <attribute name=\\\"esp_includeentitylogicalnameinpayload\\\" />\\n          <attribute name=\\\"esp_includerecordidinpayload\\\" />\\n          <attribute name=\\\"esp_buttonname\\\" />\\n          <attribute name=\\\"esp_savebeforerunning\\\" />\\n          <attribute name=\\\"esp_refreshwhenapicallends\\\" />\\n          <filter type=\\\"and\\\">\\n            <condition attribute=\\\"esp_buttonname\\\" operator=\\\"eq\\\" value=\\\"\".concat(buttonSettingName, \"\\\" />\\n          </filter>\\n        </entity>\\n      </fetch>\\n    \");\n                        query = \"?fetchXml=\".concat(encodeURIComponent(fetchXml));\n                        url = \"\".concat(Xrm.Utility.getGlobalContext().getClientUrl(), \"/api/data/v9.1/esp_buttonsettings\").concat(query);\n                        _b.label = 1;\n                    case 1:\n                        _b.trys.push([1, 4, , 5]);\n                        return [4 /*yield*/, this.makeRequest(\"GET\", url)];\n                    case 2:\n                        response = _b.sent();\n                        return [4 /*yield*/, response.json()];\n                    case 3:\n                        data = _b.sent();\n                        setting = data.value[0];\n                        this.buttonSetting = setting;\n                        return [2 /*return*/, setting];\n                    case 4:\n                        _a = _b.sent();\n                        ButtonException_1.ExceptionLowCodeButton.buttonSettingNotFound(buttonSettingName);\n                        return [2 /*return*/, null];\n                    case 5: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Retrieves the advanced button setting record using the main button setting ID and language code.\n     *\n     * @param mainButtonSettingId - The ID of the main button setting.\n     * @param lcid - The language code.\n     * @returns A Promise that resolves to the esp_ButtonAdvancedSetting or null.\n     * @throws An error if the fetch fails.\n     */\n    BaseHelper.prototype.getButtonAdvancedSetting = function (mainButtonSettingId, lcid) {\n        return __awaiter(this, void 0, void 0, function () {\n            var fetchXml, query, url, response, data, advancedSetting, _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        fetchXml = \"\\n      <fetch top=\\\"1\\\">\\n        <entity name=\\\"esp_buttonadvancedsetting\\\">\\n          <attribute name=\\\"esp_asyncformnotification\\\" />\\n          <attribute name=\\\"esp_asyncformnotificationtext\\\" />\\n          <attribute name=\\\"esp_buttonadvancedsettingid\\\" />\\n          <attribute name=\\\"esp_confirmationdialogcancellabel\\\" />\\n          <attribute name=\\\"esp_confirmationdialogconfirmlabel\\\" />\\n          <attribute name=\\\"esp_confirmationdialogsubtitle\\\" />\\n          <attribute name=\\\"esp_confirmationdialogtext\\\" />\\n          <attribute name=\\\"esp_confirmationdialogtitle\\\" />\\n          <attribute name=\\\"esp_executionmode\\\" />\\n          <attribute name=\\\"esp_mainbuttonsetting\\\" />\\n          <attribute name=\\\"esp_modificationneededflag\\\" />\\n          <attribute name=\\\"esp_settingid\\\" />\\n          <attribute name=\\\"esp_settinglanguage\\\" />\\n          <attribute name=\\\"esp_showconfirmationdialog\\\" />\\n          <attribute name=\\\"esp_syncconfirmationboxconfirmlabel\\\" />\\n          <attribute name=\\\"esp_syncconfirmationboxredirectcancellabel\\\" />\\n          <attribute name=\\\"esp_syncconfirmationboxredirectconfirmlabel\\\" />\\n          <attribute name=\\\"esp_syncconfirmationboxredirectmode\\\" />\\n          <attribute name=\\\"esp_syncconfirmationboxredirectsubtitle\\\" />\\n          <attribute name=\\\"esp_syncconfirmationboxredirecttext\\\" />\\n          <attribute name=\\\"esp_syncconfirmationboxredirecttitle\\\" />\\n          <attribute name=\\\"esp_syncconfirmationboxtext\\\" />\\n          <attribute name=\\\"esp_syncconfirmationboxtitle\\\" />\\n          <attribute name=\\\"esp_syncconfirmationboxtype\\\" />\\n          <attribute name=\\\"esp_syncformnotification\\\" />\\n          <attribute name=\\\"esp_syncformnotificationtext\\\" />\\n          <attribute name=\\\"esp_syncrefreshform\\\" />\\n          <attribute name=\\\"esp_syncspinner\\\" />\\n          <attribute name=\\\"esp_syncspinnertext\\\" />\\n          <attribute name=\\\"esp_syncsuccessformnotification\\\" />\\n          <attribute name=\\\"esp_syncsuccessformnotificationtext\\\" />\\n          <filter>\\n            <condition attribute=\\\"esp_mainbuttonsetting\\\" operator=\\\"eq\\\" value=\\\"\".concat(mainButtonSettingId, \"\\\" />\\n          </filter>\\n          <link-entity name=\\\"esp_language\\\" from=\\\"esp_languageid\\\" to=\\\"esp_settinglanguage\\\" link-type=\\\"inner\\\">\\n            <filter>\\n              <condition attribute=\\\"esp_lcid\\\" operator=\\\"eq\\\" value=\\\"\").concat(lcid, \"\\\" />\\n            </filter>\\n          </link-entity>\\n        </entity>\\n      </fetch>\\n    \");\n                        query = \"?fetchXml=\".concat(encodeURIComponent(fetchXml));\n                        url = \"\".concat(Xrm.Utility.getGlobalContext().getClientUrl(), \"/api/data/v9.1/esp_buttonadvancedsettings\").concat(query);\n                        _b.label = 1;\n                    case 1:\n                        _b.trys.push([1, 4, , 5]);\n                        return [4 /*yield*/, this.makeRequest(\"GET\", url)];\n                    case 2:\n                        response = _b.sent();\n                        return [4 /*yield*/, response.json()];\n                    case 3:\n                        data = _b.sent();\n                        advancedSetting = data.value[0];\n                        this.buttonAdvancedSetting = advancedSetting;\n                        return [2 /*return*/, advancedSetting];\n                    case 4:\n                        _a = _b.sent();\n                        ButtonException_1.ExceptionLowCodeButton.buttonAdvancedSettingNotFound(lcid);\n                        return [2 /*return*/, null];\n                    case 5: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Retrieves all advanced button settings except the given LCID.\n     *\n     * @param mainButtonSettingId - The ID of the main button setting.\n     * @param languageId - The language code to exclude.\n     * @returns A Promise that resolves to an array of esp_ButtonAdvancedSetting.\n     */\n    BaseHelper.prototype.getAllButtonAdvancedSettingExceptTheGivenLCID = function (mainButtonSettingId, languageId) {\n        return __awaiter(this, void 0, void 0, function () {\n            var fetchXml, query, url, response, data, _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        fetchXml = \"\\n      <fetch>\\n        <entity name=\\\"esp_buttonadvancedsetting\\\">\\n          <attribute name=\\\"esp_asyncformnotification\\\" />\\n          <attribute name=\\\"esp_asyncformnotificationtext\\\" />\\n          <attribute name=\\\"esp_buttonadvancedsettingid\\\" />\\n          <attribute name=\\\"esp_confirmationdialogcancellabel\\\" />\\n          <attribute name=\\\"esp_confirmationdialogconfirmlabel\\\" />\\n          <attribute name=\\\"esp_confirmationdialogsubtitle\\\" />\\n          <attribute name=\\\"esp_confirmationdialogtext\\\" />\\n          <attribute name=\\\"esp_confirmationdialogtitle\\\" />\\n          <attribute name=\\\"esp_executionmode\\\" />\\n          <attribute name=\\\"esp_mainbuttonsetting\\\" />\\n          <attribute name=\\\"esp_modificationneededflag\\\" />\\n          <attribute name=\\\"esp_settingid\\\" />\\n          <attribute name=\\\"esp_settinglanguage\\\" />\\n          <attribute name=\\\"esp_showconfirmationdialog\\\" />\\n          <attribute name=\\\"esp_syncconfirmationboxconfirmlabel\\\" />\\n          <attribute name=\\\"esp_syncconfirmationboxredirectcancellabel\\\" />\\n          <attribute name=\\\"esp_syncconfirmationboxredirectconfirmlabel\\\" />\\n          <attribute name=\\\"esp_syncconfirmationboxredirectmode\\\" />\\n          <attribute name=\\\"esp_syncconfirmationboxredirectsubtitle\\\" />\\n          <attribute name=\\\"esp_syncconfirmationboxredirecttext\\\" />\\n          <attribute name=\\\"esp_syncconfirmationboxredirecttitle\\\" />\\n          <attribute name=\\\"esp_syncconfirmationboxtext\\\" />\\n          <attribute name=\\\"esp_syncconfirmationboxtitle\\\" />\\n          <attribute name=\\\"esp_syncconfirmationboxtype\\\" />\\n          <attribute name=\\\"esp_syncformnotification\\\" />\\n          <attribute name=\\\"esp_syncformnotificationtext\\\" />\\n          <attribute name=\\\"esp_syncrefreshform\\\" />\\n          <attribute name=\\\"esp_syncspinner\\\" />\\n          <attribute name=\\\"esp_syncspinnertext\\\" />\\n          <attribute name=\\\"esp_syncsuccessformnotification\\\" />\\n          <attribute name=\\\"esp_syncsuccessformnotificationtext\\\" />\\n          <filter>\\n            <condition attribute=\\\"esp_mainbuttonsetting\\\" operator=\\\"eq\\\" value=\\\"\".concat(mainButtonSettingId, \"\\\" />\\n            <condition attribute=\\\"esp_settinglanguage\\\" operator=\\\"ne\\\" value=\\\"\").concat(languageId, \"\\\" />\\n          </filter>\\n        </entity>\\n      </fetch>\\n    \");\n                        query = \"?fetchXml=\".concat(encodeURIComponent(fetchXml));\n                        url = \"\".concat(Xrm.Utility.getGlobalContext().getClientUrl(), \"/api/data/v9.1/esp_buttonadvancedsettings\").concat(query);\n                        _b.label = 1;\n                    case 1:\n                        _b.trys.push([1, 4, , 5]);\n                        return [4 /*yield*/, this.makeRequest(\"GET\", url)];\n                    case 2:\n                        response = _b.sent();\n                        return [4 /*yield*/, response.json()];\n                    case 3:\n                        data = _b.sent();\n                        return [2 /*return*/, data.value];\n                    case 4:\n                        _a = _b.sent();\n                        ButtonException_1.ExceptionLowCodeButton.displayGenericErrorNotification(\"Error\", \"Error while fetching the advanced button settings except the given LCID. Function name: getAllButtonAdvancedSettingExceptTheGivenLCID\");\n                        return [2 /*return*/, []];\n                    case 5: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Provides the filter for the lookup field in the advanced button setting form, which filters out the other existing advanced button settings for the same button setting, avoiding letting you choose a duplicate language.\n     *\n     * @param buttonAdvancedSetting - The advanced button setting to use for the query.\n     * @returns A Promise that resolves to the ID of the advanced button setting.\n     */\n    BaseHelper.prototype.getFilterLookupForLanguage = function (mainButtonSettingId, languageId) {\n        return __awaiter(this, void 0, void 0, function () {\n            var allButtonAdvancedSettings, filter;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.getAllButtonAdvancedSettingExceptTheGivenLCID(mainButtonSettingId, languageId)];\n                    case 1:\n                        allButtonAdvancedSettings = _a.sent();\n                        filter = allButtonAdvancedSettings.map(function (setting) {\n                            return \"<condition attribute=\\\"esp_buttonadvancedsettingid\\\" operator=\\\"ne\\\" value=\\\"\".concat(setting.esp_buttonadvancedsettingid, \"\\\" />\");\n                        });\n                        debugger;\n                        return [2 /*return*/, \"<filter type='and'>\" + filter.join(\"\") + \"</filter>\"];\n                }\n            });\n        });\n    };\n    /**\n     * Initializes settings by retrieving the button setting (using its name) and then the advanced button setting.\n     *\n     * @param buttonSettingName - The name of the button setting to retrieve.\n     */\n    BaseHelper.prototype.initializeSettings = function (buttonSettingName) {\n        return __awaiter(this, void 0, void 0, function () {\n            var setting;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.getButtonSetting(buttonSettingName)];\n                    case 1:\n                        setting = _a.sent();\n                        if (!setting) return [3 /*break*/, 3];\n                        return [4 /*yield*/, this.getButtonAdvancedSetting(setting.esp_buttonsettingid, this.getLanguageCode())];\n                    case 2:\n                        _a.sent();\n                        _a.label = 3;\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return BaseHelper;\n}());\nexports.BaseHelper = BaseHelper;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvSGVscGVycy9CYXNlSGVscGVyLnRzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQSw0QkFBNEIsK0RBQStELGlCQUFpQjtBQUM1RztBQUNBLG9DQUFvQyxNQUFNLCtCQUErQixZQUFZO0FBQ3JGLG1DQUFtQyxNQUFNLG1DQUFtQyxZQUFZO0FBQ3hGLGdDQUFnQztBQUNoQztBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsY0FBYyw2QkFBNkIsMEJBQTBCLGNBQWMscUJBQXFCO0FBQ3hHLDZJQUE2SSxjQUFjO0FBQzNKLHVCQUF1QixzQkFBc0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDO0FBQ3hDLG1DQUFtQyxTQUFTO0FBQzVDLG1DQUFtQyxXQUFXLFVBQVU7QUFDeEQsMENBQTBDLGNBQWM7QUFDeEQ7QUFDQSw4R0FBOEcsT0FBTztBQUNySCxpRkFBaUYsaUJBQWlCO0FBQ2xHLHlEQUF5RCxnQkFBZ0IsUUFBUTtBQUNqRiwrQ0FBK0MsZ0JBQWdCLGdCQUFnQjtBQUMvRTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0EsVUFBVSxZQUFZLGFBQWEsU0FBUyxVQUFVO0FBQ3RELG9DQUFvQyxTQUFTO0FBQzdDO0FBQ0E7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0Qsa0JBQWtCO0FBQ2xCLHdCQUF3QixtQkFBTyxDQUFDLDBFQUErQjtBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRFQUE0RSxpQkFBaUI7QUFDN0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0EsQ0FBQztBQUNELGtCQUFrQiIsInNvdXJjZXMiOlsid2VicGFjazovL0xDQi8uL3NyYy9IZWxwZXJzL0Jhc2VIZWxwZXIudHM/MTcxZSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xudmFyIF9fZ2VuZXJhdG9yID0gKHRoaXMgJiYgdGhpcy5fX2dlbmVyYXRvcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIGJvZHkpIHtcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnID0gT2JqZWN0LmNyZWF0ZSgodHlwZW9mIEl0ZXJhdG9yID09PSBcImZ1bmN0aW9uXCIgPyBJdGVyYXRvciA6IE9iamVjdCkucHJvdG90eXBlKTtcbiAgICByZXR1cm4gZy5uZXh0ID0gdmVyYigwKSwgZ1tcInRocm93XCJdID0gdmVyYigxKSwgZ1tcInJldHVyblwiXSA9IHZlcmIoMiksIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcbiAgICAgICAgd2hpbGUgKGcgJiYgKGcgPSAwLCBvcFswXSAmJiAoXyA9IDApKSwgXykgdHJ5IHtcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xuICAgIH1cbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkJhc2VIZWxwZXIgPSB2b2lkIDA7XG52YXIgQnV0dG9uRXhjZXB0aW9uXzEgPSByZXF1aXJlKFwiLi4vRXhjZXB0aW9ucy9CdXR0b25FeGNlcHRpb25cIik7XG4vKipcbiAqIEJhc2VIZWxwZXIgcHJvdmlkZXMgY29yZSBmdW5jdGlvbmFsaXR5IGZvciBkZXRlcm1pbmluZyBjb250ZXh0IHR5cGUgYW5kIHJldHJpZXZpbmdcbiAqIGNvbmZpZ3VyYXRpb24gb2JqZWN0cyAoYnV0dG9uIHNldHRpbmcgYW5kIGFkdmFuY2VkIHNldHRpbmcpIHVzaW5nIGZldGNoIFhNTCBxdWVyaWVzLlxuICovXG52YXIgQmFzZUhlbHBlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBCYXNlSGVscGVyKCkge1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIHRoZSBidXR0b24gbG9jYXRpb24gYmFzZWQgb24gdGhlIHByb3ZpZGVkIGNvbnRleHQuXG4gICAgICogLSBJZiB0aGUgY29udGV4dCBpcyBhIEZvcm1Db250ZXh0LCBzZXRzIGNvbnRhaW5lclR5cGUgdG8gXCJmb3JtXCIgYW5kIHN0b3JlcyBpdC5cbiAgICAgKiAtIElmIHRoZSBjb250ZXh0IGlzIGEgR3JpZENvbnRyb2wsIHNldHMgY29udGFpbmVyVHlwZSB0byBcImdyaWRcIiBvciBcInN1YmdyaWRcIlxuICAgICAqICAgZGVwZW5kaW5nIG9uIHdoZXRoZXIgZ2V0UGFyZW50KCkgcmV0dXJucyBhIG5vbi1udWxsIHZhbHVlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbnRleHQgLSBFaXRoZXIgYSBGb3JtQ29udGV4dCBvciBhIEdyaWRDb250cm9sLlxuICAgICAqL1xuICAgIEJhc2VIZWxwZXIucHJvdG90eXBlLmdldEJ1dHRvbkxvY2F0aW9uID0gZnVuY3Rpb24gKGNvbnRleHQpIHtcbiAgICAgICAgaWYgKGNvbnRleHQpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29udGV4dC5kYXRhID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mb3JtQ29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXJUeXBlID0gXCJmb3JtXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgY29udGV4dC5nZXRHcmlkID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdyaWRDb250cm9sID0gY29udGV4dDtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuZ3JpZENvbnRyb2wuZ2V0UGFyZW50ID09PSBcImZ1bmN0aW9uXCIgJiYgdGhpcy5ncmlkQ29udHJvbC5nZXRQYXJlbnQoKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lclR5cGUgPSBcInN1YmdyaWRcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyVHlwZSA9IFwiZ3JpZFwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIHRoZSBjdXJyZW50IHVzZXIncyBsYW5ndWFnZSBjb2RlIGZyb20gdGhlIGdsb2JhbCBjb250ZXh0LlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIGxhbmd1YWdlIGNvZGUuXG4gICAgICovXG4gICAgQmFzZUhlbHBlci5wcm90b3R5cGUuZ2V0TGFuZ3VhZ2VDb2RlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gWHJtLlV0aWxpdHkuZ2V0R2xvYmFsQ29udGV4dCgpLnVzZXJTZXR0aW5ncy5sYW5ndWFnZUlkO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIHRoZSBjdXJyZW50IHVzZXIncyBJRCBhcyBhIGxvd2VyY2FzZSBzdHJpbmcgd2l0aCBjdXJseSBicmFjZXMgcmVtb3ZlZC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSB1c2VyIElELlxuICAgICAqL1xuICAgIEJhc2VIZWxwZXIucHJvdG90eXBlLmdldFVzZXJJRCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFhybS5VdGlsaXR5LmdldEdsb2JhbENvbnRleHQoKS51c2VyU2V0dGluZ3MudXNlcklkLnJlcGxhY2UoXCJ7XCIsIFwiXCIpLnJlcGxhY2UoXCJ9XCIsIFwiXCIpLnRvTG93ZXJDYXNlKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIEVudGl0eSBQbHVyYWwgTmFtZSBmb3IgdGhlIHByb3ZpZGVkIGVudGl0eSBsb2dpY2FsIG5hbWUuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgRW50aXR5IFBsdXJhbCBOYW1lLlxuICAgICAqL1xuICAgIEJhc2VIZWxwZXIucHJvdG90eXBlLmdldEVudGl0eVBsdXJhbE5hbWUgPSBmdW5jdGlvbiAoZW50aXR5KSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBuYW1lO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCBYcm0uVXRpbGl0eS5nZXRFbnRpdHlNZXRhZGF0YShlbnRpdHkpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBuYW1lLkVudGl0eVNldE5hbWVdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIE1ha2VzIGFuIEhUVFAgcmVxdWVzdCB1c2luZyBmZXRjaCB3aXRoIHByZS1jb25maWd1cmVkIGhlYWRlcnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbWV0aG9kIC0gVGhlIEhUVFAgbWV0aG9kIChlLmcuLCBcIkdFVFwiLCBcIlBPU1RcIikuXG4gICAgICogQHBhcmFtIHVybCAtIFRoZSBVUkwgdG8gc2VuZCB0aGUgcmVxdWVzdCB0by5cbiAgICAgKiBAcGFyYW0gYm9keSAtIE9wdGlvbmFsIHJlcXVlc3QgYm9keS5cbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB0byB0aGUgUmVzcG9uc2UuXG4gICAgICovXG4gICAgQmFzZUhlbHBlci5wcm90b3R5cGUubWFrZVJlcXVlc3QgPSBmdW5jdGlvbiAobWV0aG9kLCB1cmwsIGJvZHkpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGhlYWRlcnMsIG9wdGlvbnM7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVycyA9IHtcbiAgICAgICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiT0RhdGEtTWF4VmVyc2lvblwiOiBcIjQuMFwiLFxuICAgICAgICAgICAgICAgICAgICBcIk9EYXRhLVZlcnNpb25cIjogXCI0LjBcIixcbiAgICAgICAgICAgICAgICAgICAgQWNjZXB0OiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgICAgICAgICAgUHJlZmVyOiBcIm9kYXRhLmluY2x1ZGUtYW5ub3RhdGlvbnM9KlwiLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBtZXRob2QsXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgICAgIGJvZHk6IGJvZHkgPyBKU09OLnN0cmluZ2lmeShib2R5KSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBmZXRjaCh1cmwsIG9wdGlvbnMpXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyB0aGUgYnV0dG9uIHNldHRpbmcgcmVjb3JkIHVzaW5nIHRoZSBwcm92aWRlZCBidXR0b24gc2V0dGluZyBuYW1lLlxuICAgICAqXG4gICAgICogQHBhcmFtIGJ1dHRvblNldHRpbmdOYW1lIC0gVGhlIG5hbWUgb2YgdGhlIGJ1dHRvbiBzZXR0aW5nIHRvIHJldHJpZXZlLlxuICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHRoZSBlc3BfQnV0dG9uU2V0dGluZyBvciBudWxsLlxuICAgICAqIEB0aHJvd3MgQW4gZXJyb3IgaWYgdGhlIGZldGNoIGZhaWxzLlxuICAgICAqL1xuICAgIEJhc2VIZWxwZXIucHJvdG90eXBlLmdldEJ1dHRvblNldHRpbmcgPSBmdW5jdGlvbiAoYnV0dG9uU2V0dGluZ05hbWUpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGZldGNoWG1sLCBxdWVyeSwgdXJsLCByZXNwb25zZSwgZGF0YSwgc2V0dGluZywgX2E7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBmZXRjaFhtbCA9IFwiXFxuICAgICAgPGZldGNoIHRvcD1cXFwiMVxcXCI+XFxuICAgICAgICA8ZW50aXR5IG5hbWU9XFxcImVzcF9idXR0b25zZXR0aW5nXFxcIj5cXG4gICAgICAgICAgPGF0dHJpYnV0ZSBuYW1lPVxcXCJlc3BfYnV0dG9uc2V0dGluZ2lkXFxcIiAvPlxcbiAgICAgICAgICA8YXR0cmlidXRlIG5hbWU9XFxcImVzcF9idXR0b25sb2NhdGlvblxcXCIgLz5cXG4gICAgICAgICAgPGF0dHJpYnV0ZSBuYW1lPVxcXCJlc3BfZW5kcG9pbnRcXFwiIC8+XFxuICAgICAgICAgIDxhdHRyaWJ1dGUgbmFtZT1cXFwiZXNwX2luY2x1ZGVjYWxsaW5ndXNlcmlkaW5wYXlsb2FkXFxcIiAvPlxcbiAgICAgICAgICA8YXR0cmlidXRlIG5hbWU9XFxcImVzcF9pbmNsdWRlZW50aXR5bG9naWNhbG5hbWVpbnBheWxvYWRcXFwiIC8+XFxuICAgICAgICAgIDxhdHRyaWJ1dGUgbmFtZT1cXFwiZXNwX2luY2x1ZGVyZWNvcmRpZGlucGF5bG9hZFxcXCIgLz5cXG4gICAgICAgICAgPGF0dHJpYnV0ZSBuYW1lPVxcXCJlc3BfYnV0dG9ubmFtZVxcXCIgLz5cXG4gICAgICAgICAgPGF0dHJpYnV0ZSBuYW1lPVxcXCJlc3Bfc2F2ZWJlZm9yZXJ1bm5pbmdcXFwiIC8+XFxuICAgICAgICAgIDxhdHRyaWJ1dGUgbmFtZT1cXFwiZXNwX3JlZnJlc2h3aGVuYXBpY2FsbGVuZHNcXFwiIC8+XFxuICAgICAgICAgIDxmaWx0ZXIgdHlwZT1cXFwiYW5kXFxcIj5cXG4gICAgICAgICAgICA8Y29uZGl0aW9uIGF0dHJpYnV0ZT1cXFwiZXNwX2J1dHRvbm5hbWVcXFwiIG9wZXJhdG9yPVxcXCJlcVxcXCIgdmFsdWU9XFxcIlwiLmNvbmNhdChidXR0b25TZXR0aW5nTmFtZSwgXCJcXFwiIC8+XFxuICAgICAgICAgIDwvZmlsdGVyPlxcbiAgICAgICAgPC9lbnRpdHk+XFxuICAgICAgPC9mZXRjaD5cXG4gICAgXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnkgPSBcIj9mZXRjaFhtbD1cIi5jb25jYXQoZW5jb2RlVVJJQ29tcG9uZW50KGZldGNoWG1sKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cmwgPSBcIlwiLmNvbmNhdChYcm0uVXRpbGl0eS5nZXRHbG9iYWxDb250ZXh0KCkuZ2V0Q2xpZW50VXJsKCksIFwiL2FwaS9kYXRhL3Y5LjEvZXNwX2J1dHRvbnNldHRpbmdzXCIpLmNvbmNhdChxdWVyeSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDE7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLnRyeXMucHVzaChbMSwgNCwgLCA1XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLm1ha2VSZXF1ZXN0KFwiR0VUXCIsIHVybCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9iLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlc3BvbnNlLmpzb24oKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nID0gZGF0YS52YWx1ZVswXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnV0dG9uU2V0dGluZyA9IHNldHRpbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgc2V0dGluZ107XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hID0gX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgQnV0dG9uRXhjZXB0aW9uXzEuRXhjZXB0aW9uTG93Q29kZUJ1dHRvbi5idXR0b25TZXR0aW5nTm90Rm91bmQoYnV0dG9uU2V0dGluZ05hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIG51bGxdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIGFkdmFuY2VkIGJ1dHRvbiBzZXR0aW5nIHJlY29yZCB1c2luZyB0aGUgbWFpbiBidXR0b24gc2V0dGluZyBJRCBhbmQgbGFuZ3VhZ2UgY29kZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBtYWluQnV0dG9uU2V0dGluZ0lkIC0gVGhlIElEIG9mIHRoZSBtYWluIGJ1dHRvbiBzZXR0aW5nLlxuICAgICAqIEBwYXJhbSBsY2lkIC0gVGhlIGxhbmd1YWdlIGNvZGUuXG4gICAgICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIGVzcF9CdXR0b25BZHZhbmNlZFNldHRpbmcgb3IgbnVsbC5cbiAgICAgKiBAdGhyb3dzIEFuIGVycm9yIGlmIHRoZSBmZXRjaCBmYWlscy5cbiAgICAgKi9cbiAgICBCYXNlSGVscGVyLnByb3RvdHlwZS5nZXRCdXR0b25BZHZhbmNlZFNldHRpbmcgPSBmdW5jdGlvbiAobWFpbkJ1dHRvblNldHRpbmdJZCwgbGNpZCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZmV0Y2hYbWwsIHF1ZXJ5LCB1cmwsIHJlc3BvbnNlLCBkYXRhLCBhZHZhbmNlZFNldHRpbmcsIF9hO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2hYbWwgPSBcIlxcbiAgICAgIDxmZXRjaCB0b3A9XFxcIjFcXFwiPlxcbiAgICAgICAgPGVudGl0eSBuYW1lPVxcXCJlc3BfYnV0dG9uYWR2YW5jZWRzZXR0aW5nXFxcIj5cXG4gICAgICAgICAgPGF0dHJpYnV0ZSBuYW1lPVxcXCJlc3BfYXN5bmNmb3Jtbm90aWZpY2F0aW9uXFxcIiAvPlxcbiAgICAgICAgICA8YXR0cmlidXRlIG5hbWU9XFxcImVzcF9hc3luY2Zvcm1ub3RpZmljYXRpb250ZXh0XFxcIiAvPlxcbiAgICAgICAgICA8YXR0cmlidXRlIG5hbWU9XFxcImVzcF9idXR0b25hZHZhbmNlZHNldHRpbmdpZFxcXCIgLz5cXG4gICAgICAgICAgPGF0dHJpYnV0ZSBuYW1lPVxcXCJlc3BfY29uZmlybWF0aW9uZGlhbG9nY2FuY2VsbGFiZWxcXFwiIC8+XFxuICAgICAgICAgIDxhdHRyaWJ1dGUgbmFtZT1cXFwiZXNwX2NvbmZpcm1hdGlvbmRpYWxvZ2NvbmZpcm1sYWJlbFxcXCIgLz5cXG4gICAgICAgICAgPGF0dHJpYnV0ZSBuYW1lPVxcXCJlc3BfY29uZmlybWF0aW9uZGlhbG9nc3VidGl0bGVcXFwiIC8+XFxuICAgICAgICAgIDxhdHRyaWJ1dGUgbmFtZT1cXFwiZXNwX2NvbmZpcm1hdGlvbmRpYWxvZ3RleHRcXFwiIC8+XFxuICAgICAgICAgIDxhdHRyaWJ1dGUgbmFtZT1cXFwiZXNwX2NvbmZpcm1hdGlvbmRpYWxvZ3RpdGxlXFxcIiAvPlxcbiAgICAgICAgICA8YXR0cmlidXRlIG5hbWU9XFxcImVzcF9leGVjdXRpb25tb2RlXFxcIiAvPlxcbiAgICAgICAgICA8YXR0cmlidXRlIG5hbWU9XFxcImVzcF9tYWluYnV0dG9uc2V0dGluZ1xcXCIgLz5cXG4gICAgICAgICAgPGF0dHJpYnV0ZSBuYW1lPVxcXCJlc3BfbW9kaWZpY2F0aW9ubmVlZGVkZmxhZ1xcXCIgLz5cXG4gICAgICAgICAgPGF0dHJpYnV0ZSBuYW1lPVxcXCJlc3Bfc2V0dGluZ2lkXFxcIiAvPlxcbiAgICAgICAgICA8YXR0cmlidXRlIG5hbWU9XFxcImVzcF9zZXR0aW5nbGFuZ3VhZ2VcXFwiIC8+XFxuICAgICAgICAgIDxhdHRyaWJ1dGUgbmFtZT1cXFwiZXNwX3Nob3djb25maXJtYXRpb25kaWFsb2dcXFwiIC8+XFxuICAgICAgICAgIDxhdHRyaWJ1dGUgbmFtZT1cXFwiZXNwX3N5bmNjb25maXJtYXRpb25ib3hjb25maXJtbGFiZWxcXFwiIC8+XFxuICAgICAgICAgIDxhdHRyaWJ1dGUgbmFtZT1cXFwiZXNwX3N5bmNjb25maXJtYXRpb25ib3hyZWRpcmVjdGNhbmNlbGxhYmVsXFxcIiAvPlxcbiAgICAgICAgICA8YXR0cmlidXRlIG5hbWU9XFxcImVzcF9zeW5jY29uZmlybWF0aW9uYm94cmVkaXJlY3Rjb25maXJtbGFiZWxcXFwiIC8+XFxuICAgICAgICAgIDxhdHRyaWJ1dGUgbmFtZT1cXFwiZXNwX3N5bmNjb25maXJtYXRpb25ib3hyZWRpcmVjdG1vZGVcXFwiIC8+XFxuICAgICAgICAgIDxhdHRyaWJ1dGUgbmFtZT1cXFwiZXNwX3N5bmNjb25maXJtYXRpb25ib3hyZWRpcmVjdHN1YnRpdGxlXFxcIiAvPlxcbiAgICAgICAgICA8YXR0cmlidXRlIG5hbWU9XFxcImVzcF9zeW5jY29uZmlybWF0aW9uYm94cmVkaXJlY3R0ZXh0XFxcIiAvPlxcbiAgICAgICAgICA8YXR0cmlidXRlIG5hbWU9XFxcImVzcF9zeW5jY29uZmlybWF0aW9uYm94cmVkaXJlY3R0aXRsZVxcXCIgLz5cXG4gICAgICAgICAgPGF0dHJpYnV0ZSBuYW1lPVxcXCJlc3Bfc3luY2NvbmZpcm1hdGlvbmJveHRleHRcXFwiIC8+XFxuICAgICAgICAgIDxhdHRyaWJ1dGUgbmFtZT1cXFwiZXNwX3N5bmNjb25maXJtYXRpb25ib3h0aXRsZVxcXCIgLz5cXG4gICAgICAgICAgPGF0dHJpYnV0ZSBuYW1lPVxcXCJlc3Bfc3luY2NvbmZpcm1hdGlvbmJveHR5cGVcXFwiIC8+XFxuICAgICAgICAgIDxhdHRyaWJ1dGUgbmFtZT1cXFwiZXNwX3N5bmNmb3Jtbm90aWZpY2F0aW9uXFxcIiAvPlxcbiAgICAgICAgICA8YXR0cmlidXRlIG5hbWU9XFxcImVzcF9zeW5jZm9ybW5vdGlmaWNhdGlvbnRleHRcXFwiIC8+XFxuICAgICAgICAgIDxhdHRyaWJ1dGUgbmFtZT1cXFwiZXNwX3N5bmNyZWZyZXNoZm9ybVxcXCIgLz5cXG4gICAgICAgICAgPGF0dHJpYnV0ZSBuYW1lPVxcXCJlc3Bfc3luY3NwaW5uZXJcXFwiIC8+XFxuICAgICAgICAgIDxhdHRyaWJ1dGUgbmFtZT1cXFwiZXNwX3N5bmNzcGlubmVydGV4dFxcXCIgLz5cXG4gICAgICAgICAgPGF0dHJpYnV0ZSBuYW1lPVxcXCJlc3Bfc3luY3N1Y2Nlc3Nmb3Jtbm90aWZpY2F0aW9uXFxcIiAvPlxcbiAgICAgICAgICA8YXR0cmlidXRlIG5hbWU9XFxcImVzcF9zeW5jc3VjY2Vzc2Zvcm1ub3RpZmljYXRpb250ZXh0XFxcIiAvPlxcbiAgICAgICAgICA8ZmlsdGVyPlxcbiAgICAgICAgICAgIDxjb25kaXRpb24gYXR0cmlidXRlPVxcXCJlc3BfbWFpbmJ1dHRvbnNldHRpbmdcXFwiIG9wZXJhdG9yPVxcXCJlcVxcXCIgdmFsdWU9XFxcIlwiLmNvbmNhdChtYWluQnV0dG9uU2V0dGluZ0lkLCBcIlxcXCIgLz5cXG4gICAgICAgICAgPC9maWx0ZXI+XFxuICAgICAgICAgIDxsaW5rLWVudGl0eSBuYW1lPVxcXCJlc3BfbGFuZ3VhZ2VcXFwiIGZyb209XFxcImVzcF9sYW5ndWFnZWlkXFxcIiB0bz1cXFwiZXNwX3NldHRpbmdsYW5ndWFnZVxcXCIgbGluay10eXBlPVxcXCJpbm5lclxcXCI+XFxuICAgICAgICAgICAgPGZpbHRlcj5cXG4gICAgICAgICAgICAgIDxjb25kaXRpb24gYXR0cmlidXRlPVxcXCJlc3BfbGNpZFxcXCIgb3BlcmF0b3I9XFxcImVxXFxcIiB2YWx1ZT1cXFwiXCIpLmNvbmNhdChsY2lkLCBcIlxcXCIgLz5cXG4gICAgICAgICAgICA8L2ZpbHRlcj5cXG4gICAgICAgICAgPC9saW5rLWVudGl0eT5cXG4gICAgICAgIDwvZW50aXR5PlxcbiAgICAgIDwvZmV0Y2g+XFxuICAgIFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5ID0gXCI/ZmV0Y2hYbWw9XCIuY29uY2F0KGVuY29kZVVSSUNvbXBvbmVudChmZXRjaFhtbCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXJsID0gXCJcIi5jb25jYXQoWHJtLlV0aWxpdHkuZ2V0R2xvYmFsQ29udGV4dCgpLmdldENsaWVudFVybCgpLCBcIi9hcGkvZGF0YS92OS4xL2VzcF9idXR0b25hZHZhbmNlZHNldHRpbmdzXCIpLmNvbmNhdChxdWVyeSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDE7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLnRyeXMucHVzaChbMSwgNCwgLCA1XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLm1ha2VSZXF1ZXN0KFwiR0VUXCIsIHVybCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9iLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlc3BvbnNlLmpzb24oKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZHZhbmNlZFNldHRpbmcgPSBkYXRhLnZhbHVlWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5idXR0b25BZHZhbmNlZFNldHRpbmcgPSBhZHZhbmNlZFNldHRpbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgYWR2YW5jZWRTZXR0aW5nXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgX2EgPSBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBCdXR0b25FeGNlcHRpb25fMS5FeGNlcHRpb25Mb3dDb2RlQnV0dG9uLmJ1dHRvbkFkdmFuY2VkU2V0dGluZ05vdEZvdW5kKGxjaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIG51bGxdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgYWxsIGFkdmFuY2VkIGJ1dHRvbiBzZXR0aW5ncyBleGNlcHQgdGhlIGdpdmVuIExDSUQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbWFpbkJ1dHRvblNldHRpbmdJZCAtIFRoZSBJRCBvZiB0aGUgbWFpbiBidXR0b24gc2V0dGluZy5cbiAgICAgKiBAcGFyYW0gbGFuZ3VhZ2VJZCAtIFRoZSBsYW5ndWFnZSBjb2RlIHRvIGV4Y2x1ZGUuXG4gICAgICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYW4gYXJyYXkgb2YgZXNwX0J1dHRvbkFkdmFuY2VkU2V0dGluZy5cbiAgICAgKi9cbiAgICBCYXNlSGVscGVyLnByb3RvdHlwZS5nZXRBbGxCdXR0b25BZHZhbmNlZFNldHRpbmdFeGNlcHRUaGVHaXZlbkxDSUQgPSBmdW5jdGlvbiAobWFpbkJ1dHRvblNldHRpbmdJZCwgbGFuZ3VhZ2VJZCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZmV0Y2hYbWwsIHF1ZXJ5LCB1cmwsIHJlc3BvbnNlLCBkYXRhLCBfYTtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGZldGNoWG1sID0gXCJcXG4gICAgICA8ZmV0Y2g+XFxuICAgICAgICA8ZW50aXR5IG5hbWU9XFxcImVzcF9idXR0b25hZHZhbmNlZHNldHRpbmdcXFwiPlxcbiAgICAgICAgICA8YXR0cmlidXRlIG5hbWU9XFxcImVzcF9hc3luY2Zvcm1ub3RpZmljYXRpb25cXFwiIC8+XFxuICAgICAgICAgIDxhdHRyaWJ1dGUgbmFtZT1cXFwiZXNwX2FzeW5jZm9ybW5vdGlmaWNhdGlvbnRleHRcXFwiIC8+XFxuICAgICAgICAgIDxhdHRyaWJ1dGUgbmFtZT1cXFwiZXNwX2J1dHRvbmFkdmFuY2Vkc2V0dGluZ2lkXFxcIiAvPlxcbiAgICAgICAgICA8YXR0cmlidXRlIG5hbWU9XFxcImVzcF9jb25maXJtYXRpb25kaWFsb2djYW5jZWxsYWJlbFxcXCIgLz5cXG4gICAgICAgICAgPGF0dHJpYnV0ZSBuYW1lPVxcXCJlc3BfY29uZmlybWF0aW9uZGlhbG9nY29uZmlybWxhYmVsXFxcIiAvPlxcbiAgICAgICAgICA8YXR0cmlidXRlIG5hbWU9XFxcImVzcF9jb25maXJtYXRpb25kaWFsb2dzdWJ0aXRsZVxcXCIgLz5cXG4gICAgICAgICAgPGF0dHJpYnV0ZSBuYW1lPVxcXCJlc3BfY29uZmlybWF0aW9uZGlhbG9ndGV4dFxcXCIgLz5cXG4gICAgICAgICAgPGF0dHJpYnV0ZSBuYW1lPVxcXCJlc3BfY29uZmlybWF0aW9uZGlhbG9ndGl0bGVcXFwiIC8+XFxuICAgICAgICAgIDxhdHRyaWJ1dGUgbmFtZT1cXFwiZXNwX2V4ZWN1dGlvbm1vZGVcXFwiIC8+XFxuICAgICAgICAgIDxhdHRyaWJ1dGUgbmFtZT1cXFwiZXNwX21haW5idXR0b25zZXR0aW5nXFxcIiAvPlxcbiAgICAgICAgICA8YXR0cmlidXRlIG5hbWU9XFxcImVzcF9tb2RpZmljYXRpb25uZWVkZWRmbGFnXFxcIiAvPlxcbiAgICAgICAgICA8YXR0cmlidXRlIG5hbWU9XFxcImVzcF9zZXR0aW5naWRcXFwiIC8+XFxuICAgICAgICAgIDxhdHRyaWJ1dGUgbmFtZT1cXFwiZXNwX3NldHRpbmdsYW5ndWFnZVxcXCIgLz5cXG4gICAgICAgICAgPGF0dHJpYnV0ZSBuYW1lPVxcXCJlc3Bfc2hvd2NvbmZpcm1hdGlvbmRpYWxvZ1xcXCIgLz5cXG4gICAgICAgICAgPGF0dHJpYnV0ZSBuYW1lPVxcXCJlc3Bfc3luY2NvbmZpcm1hdGlvbmJveGNvbmZpcm1sYWJlbFxcXCIgLz5cXG4gICAgICAgICAgPGF0dHJpYnV0ZSBuYW1lPVxcXCJlc3Bfc3luY2NvbmZpcm1hdGlvbmJveHJlZGlyZWN0Y2FuY2VsbGFiZWxcXFwiIC8+XFxuICAgICAgICAgIDxhdHRyaWJ1dGUgbmFtZT1cXFwiZXNwX3N5bmNjb25maXJtYXRpb25ib3hyZWRpcmVjdGNvbmZpcm1sYWJlbFxcXCIgLz5cXG4gICAgICAgICAgPGF0dHJpYnV0ZSBuYW1lPVxcXCJlc3Bfc3luY2NvbmZpcm1hdGlvbmJveHJlZGlyZWN0bW9kZVxcXCIgLz5cXG4gICAgICAgICAgPGF0dHJpYnV0ZSBuYW1lPVxcXCJlc3Bfc3luY2NvbmZpcm1hdGlvbmJveHJlZGlyZWN0c3VidGl0bGVcXFwiIC8+XFxuICAgICAgICAgIDxhdHRyaWJ1dGUgbmFtZT1cXFwiZXNwX3N5bmNjb25maXJtYXRpb25ib3hyZWRpcmVjdHRleHRcXFwiIC8+XFxuICAgICAgICAgIDxhdHRyaWJ1dGUgbmFtZT1cXFwiZXNwX3N5bmNjb25maXJtYXRpb25ib3hyZWRpcmVjdHRpdGxlXFxcIiAvPlxcbiAgICAgICAgICA8YXR0cmlidXRlIG5hbWU9XFxcImVzcF9zeW5jY29uZmlybWF0aW9uYm94dGV4dFxcXCIgLz5cXG4gICAgICAgICAgPGF0dHJpYnV0ZSBuYW1lPVxcXCJlc3Bfc3luY2NvbmZpcm1hdGlvbmJveHRpdGxlXFxcIiAvPlxcbiAgICAgICAgICA8YXR0cmlidXRlIG5hbWU9XFxcImVzcF9zeW5jY29uZmlybWF0aW9uYm94dHlwZVxcXCIgLz5cXG4gICAgICAgICAgPGF0dHJpYnV0ZSBuYW1lPVxcXCJlc3Bfc3luY2Zvcm1ub3RpZmljYXRpb25cXFwiIC8+XFxuICAgICAgICAgIDxhdHRyaWJ1dGUgbmFtZT1cXFwiZXNwX3N5bmNmb3Jtbm90aWZpY2F0aW9udGV4dFxcXCIgLz5cXG4gICAgICAgICAgPGF0dHJpYnV0ZSBuYW1lPVxcXCJlc3Bfc3luY3JlZnJlc2hmb3JtXFxcIiAvPlxcbiAgICAgICAgICA8YXR0cmlidXRlIG5hbWU9XFxcImVzcF9zeW5jc3Bpbm5lclxcXCIgLz5cXG4gICAgICAgICAgPGF0dHJpYnV0ZSBuYW1lPVxcXCJlc3Bfc3luY3NwaW5uZXJ0ZXh0XFxcIiAvPlxcbiAgICAgICAgICA8YXR0cmlidXRlIG5hbWU9XFxcImVzcF9zeW5jc3VjY2Vzc2Zvcm1ub3RpZmljYXRpb25cXFwiIC8+XFxuICAgICAgICAgIDxhdHRyaWJ1dGUgbmFtZT1cXFwiZXNwX3N5bmNzdWNjZXNzZm9ybW5vdGlmaWNhdGlvbnRleHRcXFwiIC8+XFxuICAgICAgICAgIDxmaWx0ZXI+XFxuICAgICAgICAgICAgPGNvbmRpdGlvbiBhdHRyaWJ1dGU9XFxcImVzcF9tYWluYnV0dG9uc2V0dGluZ1xcXCIgb3BlcmF0b3I9XFxcImVxXFxcIiB2YWx1ZT1cXFwiXCIuY29uY2F0KG1haW5CdXR0b25TZXR0aW5nSWQsIFwiXFxcIiAvPlxcbiAgICAgICAgICAgIDxjb25kaXRpb24gYXR0cmlidXRlPVxcXCJlc3Bfc2V0dGluZ2xhbmd1YWdlXFxcIiBvcGVyYXRvcj1cXFwibmVcXFwiIHZhbHVlPVxcXCJcIikuY29uY2F0KGxhbmd1YWdlSWQsIFwiXFxcIiAvPlxcbiAgICAgICAgICA8L2ZpbHRlcj5cXG4gICAgICAgIDwvZW50aXR5PlxcbiAgICAgIDwvZmV0Y2g+XFxuICAgIFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5ID0gXCI/ZmV0Y2hYbWw9XCIuY29uY2F0KGVuY29kZVVSSUNvbXBvbmVudChmZXRjaFhtbCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXJsID0gXCJcIi5jb25jYXQoWHJtLlV0aWxpdHkuZ2V0R2xvYmFsQ29udGV4dCgpLmdldENsaWVudFVybCgpLCBcIi9hcGkvZGF0YS92OS4xL2VzcF9idXR0b25hZHZhbmNlZHNldHRpbmdzXCIpLmNvbmNhdChxdWVyeSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDE7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLnRyeXMucHVzaChbMSwgNCwgLCA1XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLm1ha2VSZXF1ZXN0KFwiR0VUXCIsIHVybCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9iLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlc3BvbnNlLmpzb24oKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgZGF0YS52YWx1ZV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hID0gX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgQnV0dG9uRXhjZXB0aW9uXzEuRXhjZXB0aW9uTG93Q29kZUJ1dHRvbi5kaXNwbGF5R2VuZXJpY0Vycm9yTm90aWZpY2F0aW9uKFwiRXJyb3JcIiwgXCJFcnJvciB3aGlsZSBmZXRjaGluZyB0aGUgYWR2YW5jZWQgYnV0dG9uIHNldHRpbmdzIGV4Y2VwdCB0aGUgZ2l2ZW4gTENJRC4gRnVuY3Rpb24gbmFtZTogZ2V0QWxsQnV0dG9uQWR2YW5jZWRTZXR0aW5nRXhjZXB0VGhlR2l2ZW5MQ0lEXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIFtdXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUHJvdmlkZXMgdGhlIGZpbHRlciBmb3IgdGhlIGxvb2t1cCBmaWVsZCBpbiB0aGUgYWR2YW5jZWQgYnV0dG9uIHNldHRpbmcgZm9ybSwgd2hpY2ggZmlsdGVycyBvdXQgdGhlIG90aGVyIGV4aXN0aW5nIGFkdmFuY2VkIGJ1dHRvbiBzZXR0aW5ncyBmb3IgdGhlIHNhbWUgYnV0dG9uIHNldHRpbmcsIGF2b2lkaW5nIGxldHRpbmcgeW91IGNob29zZSBhIGR1cGxpY2F0ZSBsYW5ndWFnZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBidXR0b25BZHZhbmNlZFNldHRpbmcgLSBUaGUgYWR2YW5jZWQgYnV0dG9uIHNldHRpbmcgdG8gdXNlIGZvciB0aGUgcXVlcnkuXG4gICAgICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIElEIG9mIHRoZSBhZHZhbmNlZCBidXR0b24gc2V0dGluZy5cbiAgICAgKi9cbiAgICBCYXNlSGVscGVyLnByb3RvdHlwZS5nZXRGaWx0ZXJMb29rdXBGb3JMYW5ndWFnZSA9IGZ1bmN0aW9uIChtYWluQnV0dG9uU2V0dGluZ0lkLCBsYW5ndWFnZUlkKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhbGxCdXR0b25BZHZhbmNlZFNldHRpbmdzLCBmaWx0ZXI7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZ2V0QWxsQnV0dG9uQWR2YW5jZWRTZXR0aW5nRXhjZXB0VGhlR2l2ZW5MQ0lEKG1haW5CdXR0b25TZXR0aW5nSWQsIGxhbmd1YWdlSWQpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgYWxsQnV0dG9uQWR2YW5jZWRTZXR0aW5ncyA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlciA9IGFsbEJ1dHRvbkFkdmFuY2VkU2V0dGluZ3MubWFwKGZ1bmN0aW9uIChzZXR0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiPGNvbmRpdGlvbiBhdHRyaWJ1dGU9XFxcImVzcF9idXR0b25hZHZhbmNlZHNldHRpbmdpZFxcXCIgb3BlcmF0b3I9XFxcIm5lXFxcIiB2YWx1ZT1cXFwiXCIuY29uY2F0KHNldHRpbmcuZXNwX2J1dHRvbmFkdmFuY2Vkc2V0dGluZ2lkLCBcIlxcXCIgLz5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIFwiPGZpbHRlciB0eXBlPSdhbmQnPlwiICsgZmlsdGVyLmpvaW4oXCJcIikgKyBcIjwvZmlsdGVyPlwiXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplcyBzZXR0aW5ncyBieSByZXRyaWV2aW5nIHRoZSBidXR0b24gc2V0dGluZyAodXNpbmcgaXRzIG5hbWUpIGFuZCB0aGVuIHRoZSBhZHZhbmNlZCBidXR0b24gc2V0dGluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBidXR0b25TZXR0aW5nTmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBidXR0b24gc2V0dGluZyB0byByZXRyaWV2ZS5cbiAgICAgKi9cbiAgICBCYXNlSGVscGVyLnByb3RvdHlwZS5pbml0aWFsaXplU2V0dGluZ3MgPSBmdW5jdGlvbiAoYnV0dG9uU2V0dGluZ05hbWUpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHNldHRpbmc7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZ2V0QnV0dG9uU2V0dGluZyhidXR0b25TZXR0aW5nTmFtZSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzZXR0aW5nKSByZXR1cm4gWzMgLypicmVhayovLCAzXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZ2V0QnV0dG9uQWR2YW5jZWRTZXR0aW5nKHNldHRpbmcuZXNwX2J1dHRvbnNldHRpbmdpZCwgdGhpcy5nZXRMYW5ndWFnZUNvZGUoKSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDM7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBCYXNlSGVscGVyO1xufSgpKTtcbmV4cG9ydHMuQmFzZUhlbHBlciA9IEJhc2VIZWxwZXI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/Helpers/BaseHelper.ts\n");

/***/ }),

/***/ "./src/Helpers/ButtonGridHelper.ts":
/*!*****************************************!*\
  !*** ./src/Helpers/ButtonGridHelper.ts ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.ButtonGridHelper = void 0;\nvar ButtonException_1 = __webpack_require__(/*! ../Exceptions/ButtonException */ \"./src/Exceptions/ButtonException.ts\");\nvar BaseHelper_1 = __webpack_require__(/*! ./BaseHelper */ \"./src/Helpers/BaseHelper.ts\");\n/**\n * ButtonGridHelper extends BaseHelper to provide grid-specific functionality.\n * It builds payloads with selected record GUIDs and handles grid notifications.\n */\nvar ButtonGridHelper = /** @class */ (function (_super) {\n    __extends(ButtonGridHelper, _super);\n    /**\n     * Constructs a new ButtonGridHelper instance with the provided grid control.\n     * @param selectedContext - The grid control representing the selected context.\n     */\n    function ButtonGridHelper(selectedContext) {\n        var _this = _super.call(this) || this;\n        _this.getButtonLocation(selectedContext);\n        return _this;\n    }\n    /**\n     * Returns an array containing the GUIDs of the selected records.\n     * @returns An array of selected record GUIDs as lowercase strings.\n     * @throws Error if the grid control is not set.\n     */\n    ButtonGridHelper.prototype.getSelectedRecordIds = function () {\n        if (!this.gridControl) {\n            throw new Error(\"Grid control is not set.\");\n        }\n        var selectedRows = this.gridControl.getGrid().getSelectedRows();\n        var recordIds = [];\n        selectedRows.forEach(function (row) {\n            recordIds.push(row.data.entity.getId().replace(\"{\", \"\").replace(\"}\", \"\").toLowerCase());\n        });\n        return recordIds;\n    };\n    /**\n     * Returns the logical name of the entity displayed in the grid.\n     * @returns The entity logical name.\n     * @throws Error if the grid control is not set.\n     */\n    ButtonGridHelper.prototype.getEntityLogicalName = function () {\n        if (!this.gridControl) {\n            throw new Error(\"Grid control is not set.\");\n        }\n        return this.gridControl.getEntityName();\n    };\n    /**\n     * Validates that at least one record is selected in the grid.\n     * @returns A Promise that resolves if selection is valid.\n     * @throws ExceptionLowCodeButton if no records are selected.\n     */\n    ButtonGridHelper.prototype.validateSelection = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var selectedRows;\n            return __generator(this, function (_a) {\n                if (!this.gridControl) {\n                    throw new Error(\"Grid control is not set.\");\n                }\n                selectedRows = this.gridControl.getGrid().getSelectedRows();\n                if (selectedRows.getLength() === 0) {\n                    void ButtonException_1.ExceptionLowCodeButton.displayGenericErrorNotification(\"No Records selected\", \"No records selected. Please select at least one record.\");\n                    return [2 /*return*/, Promise.reject()];\n                }\n                return [2 /*return*/, Promise.resolve()];\n            });\n        });\n    };\n    /**\n     * Builds a payload for grid actions.\n     * The payload includes the entity logical name, the plural name (if configured),\n     * selected record GUIDs, and the calling user ID.\n     * If in a subgrid, additional parent entity information is included.\n     * @returns A Promise resolving to an object containing the payload data.\n     * @throws Error if the grid control or button setting is not set.\n     */\n    ButtonGridHelper.prototype.getPayload = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var payload, _a, parentFormContext, _b, parentFormContext;\n            var _c, _d;\n            return __generator(this, function (_e) {\n                switch (_e.label) {\n                    case 0:\n                        if (!this.gridControl || !this.buttonSetting) {\n                            throw new Error(\"Grid control or button setting is not set.\");\n                        }\n                        payload = {};\n                        if (!this.buttonSetting.esp_includeentitylogicalnameinpayload) return [3 /*break*/, 3];\n                        payload = __assign(__assign({}, payload), { entityLogicalName: this.gridControl.getEntityName() });\n                        _a = [__assign({}, payload)];\n                        _c = {};\n                        return [4 /*yield*/, this.getEntityPluralName(this.getEntityLogicalName())];\n                    case 1:\n                        payload = __assign.apply(void 0, _a.concat([(_c.entityLogicalPluralName = _e.sent(), _c)]));\n                        if (!(this.containerType === \"subgrid\")) return [3 /*break*/, 3];\n                        parentFormContext = this.getFormContextInSubgrid();\n                        if (!parentFormContext) return [3 /*break*/, 3];\n                        payload = __assign(__assign({}, payload), { parentEntityLogicalName: parentFormContext.data.entity.getEntityName() });\n                        _b = [__assign({}, payload)];\n                        _d = {};\n                        return [4 /*yield*/, this.getEntityPluralName(parentFormContext.data.entity.getEntityName())];\n                    case 2:\n                        payload = __assign.apply(void 0, _b.concat([(_d.parentEntityLogicalPluralName = _e.sent(), _d)]));\n                        _e.label = 3;\n                    case 3:\n                        if (this.buttonSetting.esp_includerecordidinpayload) {\n                            payload = __assign(__assign({}, payload), { recordIds: this.getSelectedRecordIds() });\n                            if (this.containerType === \"subgrid\") {\n                                parentFormContext = this.getFormContextInSubgrid();\n                                if (parentFormContext) {\n                                    payload = __assign(__assign({}, payload), { parentRecordId: parentFormContext.data.entity.getId().replace(\"{\", \"\").replace(\"}\", \"\").toLowerCase() });\n                                }\n                            }\n                        }\n                        if (this.buttonSetting.esp_includecallinguseridinpayload) {\n                            payload = __assign(__assign({}, payload), { userId: this.getUserID() });\n                        }\n                        return [2 /*return*/, payload];\n                }\n            });\n        });\n    };\n    /**\n     * Opens a confirmation dialog before executing the grid action.\n     * @returns A Promise that resolves to true if the user confirms the dialog, false otherwise.\n     */\n    ButtonGridHelper.prototype.openConfirmationDialogBeforeRun = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var confirmStrings, result;\n            var _a, _b, _c, _d;\n            return __generator(this, function (_e) {\n                switch (_e.label) {\n                    case 0:\n                        if (!(!this.buttonAdvancedSetting || this.buttonAdvancedSetting.esp_confirmationdialogtext == null)) return [3 /*break*/, 2];\n                        return [4 /*yield*/, ButtonException_1.ExceptionLowCodeButton.displayGenericErrorNotification(\"Confirmation Dialog Text Error\", \"The confirmation dialog text is empty! Please fill it on your configuration settings.\")];\n                    case 1:\n                        _e.sent();\n                        return [2 /*return*/, false];\n                    case 2:\n                        confirmStrings = {\n                            cancelButtonLabel: (_a = this.buttonAdvancedSetting.esp_confirmationdialogcancellabel) !== null && _a !== void 0 ? _a : \"\",\n                            confirmButtonLabel: (_b = this.buttonAdvancedSetting.esp_confirmationdialogconfirmlabel) !== null && _b !== void 0 ? _b : \"\",\n                            subtitle: (_c = this.buttonAdvancedSetting.esp_confirmationdialogsubtitle) !== null && _c !== void 0 ? _c : \"\",\n                            text: (_d = this.buttonAdvancedSetting.esp_confirmationdialogtext) !== null && _d !== void 0 ? _d : \"\",\n                            title: this.buttonAdvancedSetting.esp_confirmationdialogtitle,\n                        };\n                        return [4 /*yield*/, Xrm.Navigation.openConfirmDialog(confirmStrings)];\n                    case 3:\n                        result = _e.sent();\n                        return [2 /*return*/, result.confirmed];\n                }\n            });\n        });\n    };\n    /**\n     * Displays an asynchronous grid notification for 5 seconds using global notifications.\n     * @returns A Promise that resolves when the notification is cleared.\n     */\n    ButtonGridHelper.prototype.asyncGridNotification = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var notification;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!(!this.buttonAdvancedSetting || this.buttonAdvancedSetting.esp_asyncformnotificationtext == null)) return [3 /*break*/, 2];\n                        return [4 /*yield*/, ButtonException_1.ExceptionLowCodeButton.displayGenericErrorNotification(\"Async Grid Notification Text Error\", \"The async grid notification text is empty! Please fill it on your configuration settings.\")];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                    case 2:\n                        notification = {\n                            level: 4 /* XrmEnum.AppNotificationLevel.Information */,\n                            message: this.buttonAdvancedSetting.esp_asyncformnotificationtext,\n                            type: 2,\n                            showCloseButton: true,\n                        };\n                        Xrm.App.addGlobalNotification(notification).then(function (id) {\n                            _this.globalNotificationId = id;\n                            setTimeout(function () {\n                                _this.clearGridNotification();\n                            }, 5000);\n                        });\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Clears the grid notification using the stored global notification ID.\n     * @throws Error if no notification is currently set.\n     */\n    ButtonGridHelper.prototype.clearGridNotification = function () {\n        if (this.globalNotificationId) {\n            Xrm.App.clearGlobalNotification(this.globalNotificationId);\n            this.globalNotificationId = undefined;\n        }\n    };\n    /**\n     * Displays a synchronous grid notification for 120 seconds using global notifications.\n     * @returns A Promise that resolves when the notification is cleared.\n     */\n    ButtonGridHelper.prototype.syncGridNotification = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var notification;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!(!this.buttonAdvancedSetting || this.buttonAdvancedSetting.esp_syncformnotificationtext == null)) return [3 /*break*/, 2];\n                        return [4 /*yield*/, ButtonException_1.ExceptionLowCodeButton.displayGenericErrorNotification(\"Sync Grid Notification Text Error\", \"The sync grid notification text is empty! Please fill it on your configuration settings.\")];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                    case 2:\n                        notification = {\n                            level: 4 /* XrmEnum.AppNotificationLevel.Information */,\n                            message: this.buttonAdvancedSetting.esp_syncformnotificationtext,\n                            type: 2,\n                        };\n                        Xrm.App.addGlobalNotification(notification).then(function (id) {\n                            _this.globalNotificationId = id;\n                            setTimeout(function () {\n                                _this.clearGridNotification();\n                            }, 120000);\n                        });\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Clears all synchronous notifications, including grid notifications and progress indicators.\n     * @returns A Promise that resolves when the notifications are cleared.\n     */\n    ButtonGridHelper.prototype.clearSyncNotifications = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, _b;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        if (!((_a = this.buttonAdvancedSetting) === null || _a === void 0 ? void 0 : _a.esp_syncformnotification)) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.clearGridNotification()];\n                    case 1:\n                        _c.sent();\n                        _c.label = 2;\n                    case 2:\n                        if ((_b = this.buttonAdvancedSetting) === null || _b === void 0 ? void 0 : _b.esp_syncspinner) {\n                            Xrm.Utility.closeProgressIndicator();\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Displays a success grid notification for 5 seconds using global notifications.\n     * @returns A Promise that resolves when the notification is cleared.\n     */\n    ButtonGridHelper.prototype.showSuccessGridNotification = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var notification;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!(!this.gridControl ||\n                            !this.buttonAdvancedSetting ||\n                            this.buttonAdvancedSetting.esp_syncsuccessformnotificationtext == null)) return [3 /*break*/, 2];\n                        return [4 /*yield*/, ButtonException_1.ExceptionLowCodeButton.displayGenericErrorNotification(\"Success Notification Text Error\", \"The success notification text is empty! Please fill it on your configuration settings.\\nField: esp_syncsuccessformnotificationtext\")];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                    case 2:\n                        notification = {\n                            level: 4 /* XrmEnum.AppNotificationLevel.Information */,\n                            message: this.buttonAdvancedSetting.esp_syncsuccessformnotificationtext,\n                            type: 2,\n                            showCloseButton: true,\n                        };\n                        Xrm.App.addGlobalNotification(notification).then(function (id) {\n                            _this.globalNotificationId = id;\n                            setTimeout(function () {\n                                _this.clearGridNotification();\n                            }, 5000);\n                        });\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Opens a synchronous success dialog and awaits the user's confirmation.\n     * @returns A Promise that resolves to true if the success dialog is confirmed, or false otherwise.\n     */\n    ButtonGridHelper.prototype.openSuccessDialogSync = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var confirmStrings, result;\n            var _a, _b;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        if (!(!this.buttonAdvancedSetting || this.buttonAdvancedSetting.esp_syncconfirmationboxtext == null)) return [3 /*break*/, 2];\n                        return [4 /*yield*/, ButtonException_1.ExceptionLowCodeButton.displayGenericErrorNotification(\"Sync Confirmation Box Text Error\", \"The sync confirmation box text is empty! Please fill it on your configuration settings.\")];\n                    case 1:\n                        _c.sent();\n                        return [2 /*return*/, false];\n                    case 2:\n                        confirmStrings = {\n                            confirmButtonLabel: (_a = this.buttonAdvancedSetting.esp_syncconfirmationboxconfirmlabel) !== null && _a !== void 0 ? _a : undefined,\n                            text: (_b = this.buttonAdvancedSetting.esp_syncconfirmationboxtext) !== null && _b !== void 0 ? _b : undefined,\n                            title: this.buttonAdvancedSetting.esp_syncconfirmationboxtitle,\n                        };\n                        return [4 /*yield*/, Xrm.Navigation.openAlertDialog(confirmStrings)];\n                    case 3:\n                        result = _c.sent();\n                        return [2 /*return*/, result.confirmed];\n                }\n            });\n        });\n    };\n    /**\n     * Opens a success dialog that may redirect the user based on their confirmation.\n     * If confirmed, the browser is redirected; otherwise, the grid is reloaded.\n     * @param response - An object containing the redirect URI.\n     */\n    ButtonGridHelper.prototype.openSuccessDialogRedirect = function (response) {\n        var _this = this;\n        var _a, _b, _c, _d;\n        if (!this.buttonAdvancedSetting) {\n            throw new Error(\"Button advanced setting is not set.\");\n        }\n        if (this.buttonAdvancedSetting.esp_syncconfirmationboxredirecttext == null) {\n            ButtonException_1.ExceptionLowCodeButton.displayGenericErrorNotification(\"Sync Confirmation Box Redirect Text Error\", \"The sync confirmation box redirect text is empty! Please fill it on your configuration settings.\");\n            return;\n        }\n        var confirmStrings = {\n            cancelButtonLabel: (_a = this.buttonAdvancedSetting.esp_syncconfirmationboxredirectcancellabel) !== null && _a !== void 0 ? _a : undefined,\n            confirmButtonLabel: (_b = this.buttonAdvancedSetting.esp_syncconfirmationboxredirectconfirmlabel) !== null && _b !== void 0 ? _b : undefined,\n            text: this.buttonAdvancedSetting.esp_syncconfirmationboxredirecttext,\n            subtitle: (_c = this.buttonAdvancedSetting.esp_syncconfirmationboxredirectsubtitle) !== null && _c !== void 0 ? _c : undefined,\n            title: (_d = this.buttonAdvancedSetting.esp_syncconfirmationboxredirecttitle) !== null && _d !== void 0 ? _d : undefined,\n        };\n        Xrm.Navigation.openConfirmDialog(confirmStrings).then(function (result) {\n            if (result.confirmed) {\n                console.log(\"User confirmed the dialog, redirecting...\");\n                if (_this.buttonAdvancedSetting.esp_syncconfirmationboxredirectmode ===\n                    1 /* esp_buttonadvancedsetting_esp_buttonadvancedsetting_esp_syncconfirmationboxredirectmode.CurrentTab */) {\n                    window.open(response.redirectUri, \"_self\").focus();\n                }\n                else {\n                    window.open(response.redirectUri, \"_blank\").focus();\n                }\n            }\n            else {\n                console.log(\"User cancelled the dialog, refreshing the grid.\");\n                _this.reloadGrid();\n            }\n        });\n    };\n    /**\n     * Reloads the grid and, if in a subgrid, reloads the parent form.\n     */\n    ButtonGridHelper.prototype.reloadGrid = function () {\n        if (!this.gridControl || !this.buttonSetting || !this.buttonAdvancedSetting) {\n            throw new Error(\"Required properties are not set for reloading the grid.\");\n        }\n        if (this.buttonSetting.esp_refreshwhenapicallends &&\n            !(this.buttonAdvancedSetting.esp_syncconfirmationboxredirect &&\n                this.buttonAdvancedSetting.esp_syncconfirmationboxredirectmode ===\n                    1 /* esp_buttonadvancedsetting_esp_buttonadvancedsetting_esp_syncconfirmationboxredirectmode.CurrentTab */)) {\n            this.gridControl.refresh();\n        }\n        if (this.containerType === \"subgrid\") {\n            this.reloadForm();\n        }\n    };\n    /**\n     * Reloads the parent form for subgrid contexts.\n     * @returns The parent form context if available.\n     * @throws Error if required properties are not set or the container is not a subgrid.\n     */\n    ButtonGridHelper.prototype.reloadForm = function () {\n        if (!this.formContext || !this.buttonSetting || !this.buttonAdvancedSetting || this.containerType !== \"subgrid\") {\n            throw new Error(\"Required properties are not set for reloading the form.\");\n        }\n        if (this.buttonSetting.esp_refreshwhenapicallends &&\n            !(this.buttonAdvancedSetting.esp_syncconfirmationboxredirect &&\n                this.buttonAdvancedSetting.esp_syncconfirmationboxredirectmode ===\n                    1 /* esp_buttonadvancedsetting_esp_buttonadvancedsetting_esp_syncconfirmationboxredirectmode.CurrentTab */)) {\n            this.formContext.data.refresh(false);\n        }\n    };\n    /**\n     * Retrieves the parent form context when the grid is embedded as a subgrid.\n     * @returns The parent form context or null if not available.\n     */\n    ButtonGridHelper.prototype.getFormContextInSubgrid = function () {\n        if (this.buttonSetting.esp_buttonlocation === 789620002 /* esp_buttonsetting_esp_buttonsetting_esp_buttonlocation.Subgrid */ &&\n            this.containerType === \"subgrid\") {\n            console.log(\"Subgrid detected. Setting form context to parent form.\");\n            // Cast gridControl as any to access the formContext property.\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var tempControl = this.gridControl;\n            return tempControl.formContext;\n        }\n        return null;\n    };\n    return ButtonGridHelper;\n}(BaseHelper_1.BaseHelper));\nexports.ButtonGridHelper = ButtonGridHelper;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvSGVscGVycy9CdXR0b25HcmlkSGVscGVyLnRzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsZUFBZSxnQkFBZ0Isc0NBQXNDLGtCQUFrQjtBQUN2Riw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLGlEQUFpRCxPQUFPO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QiwrREFBK0QsaUJBQWlCO0FBQzVHO0FBQ0Esb0NBQW9DLE1BQU0sK0JBQStCLFlBQVk7QUFDckYsbUNBQW1DLE1BQU0sbUNBQW1DLFlBQVk7QUFDeEYsZ0NBQWdDO0FBQ2hDO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxjQUFjLDZCQUE2QiwwQkFBMEIsY0FBYyxxQkFBcUI7QUFDeEcsNklBQTZJLGNBQWM7QUFDM0osdUJBQXVCLHNCQUFzQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0M7QUFDeEMsbUNBQW1DLFNBQVM7QUFDNUMsbUNBQW1DLFdBQVcsVUFBVTtBQUN4RCwwQ0FBMEMsY0FBYztBQUN4RDtBQUNBLDhHQUE4RyxPQUFPO0FBQ3JILGlGQUFpRixpQkFBaUI7QUFDbEcseURBQXlELGdCQUFnQixRQUFRO0FBQ2pGLCtDQUErQyxnQkFBZ0IsZ0JBQWdCO0FBQy9FO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQSxVQUFVLFlBQVksYUFBYSxTQUFTLFVBQVU7QUFDdEQsb0NBQW9DLFNBQVM7QUFDN0M7QUFDQTtBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCx3QkFBd0I7QUFDeEIsd0JBQXdCLG1CQUFPLENBQUMsMEVBQStCO0FBQy9ELG1CQUFtQixtQkFBTyxDQUFDLGlEQUFjO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RCxpQkFBaUI7QUFDOUUsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0QsY0FBYyxxREFBcUQ7QUFDekgseUNBQXlDO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNELGNBQWMsd0VBQXdFO0FBQzVJLHlDQUF5QztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRCxjQUFjLHdDQUF3QztBQUNoSDtBQUNBO0FBQ0E7QUFDQSxrRUFBa0UsY0FBYyxnRUFBZ0UsaUJBQWlCLHNCQUFzQjtBQUN2TDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRCxjQUFjLDBCQUEwQjtBQUNsRztBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0IseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdEO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Qsd0JBQXdCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vTENCLy4vc3JjL0hlbHBlcnMvQnV0dG9uR3JpZEhlbHBlci50cz8xZmFhIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX2Fzc2lnbiA9ICh0aGlzICYmIHRoaXMuX19hc3NpZ24pIHx8IGZ1bmN0aW9uICgpIHtcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24odCkge1xuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpXG4gICAgICAgICAgICAgICAgdFtwXSA9IHNbcF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfTtcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn07XG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbnZhciBfX2dlbmVyYXRvciA9ICh0aGlzICYmIHRoaXMuX19nZW5lcmF0b3IpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBib2R5KSB7XG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZyA9IE9iamVjdC5jcmVhdGUoKHR5cGVvZiBJdGVyYXRvciA9PT0gXCJmdW5jdGlvblwiID8gSXRlcmF0b3IgOiBPYmplY3QpLnByb3RvdHlwZSk7XG4gICAgcmV0dXJuIGcubmV4dCA9IHZlcmIoMCksIGdbXCJ0aHJvd1wiXSA9IHZlcmIoMSksIGdbXCJyZXR1cm5cIl0gPSB2ZXJiKDIpLCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XG4gICAgICAgIHdoaWxlIChnICYmIChnID0gMCwgb3BbMF0gJiYgKF8gPSAwKSksIF8pIHRyeSB7XG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcbiAgICB9XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5CdXR0b25HcmlkSGVscGVyID0gdm9pZCAwO1xudmFyIEJ1dHRvbkV4Y2VwdGlvbl8xID0gcmVxdWlyZShcIi4uL0V4Y2VwdGlvbnMvQnV0dG9uRXhjZXB0aW9uXCIpO1xudmFyIEJhc2VIZWxwZXJfMSA9IHJlcXVpcmUoXCIuL0Jhc2VIZWxwZXJcIik7XG4vKipcbiAqIEJ1dHRvbkdyaWRIZWxwZXIgZXh0ZW5kcyBCYXNlSGVscGVyIHRvIHByb3ZpZGUgZ3JpZC1zcGVjaWZpYyBmdW5jdGlvbmFsaXR5LlxuICogSXQgYnVpbGRzIHBheWxvYWRzIHdpdGggc2VsZWN0ZWQgcmVjb3JkIEdVSURzIGFuZCBoYW5kbGVzIGdyaWQgbm90aWZpY2F0aW9ucy5cbiAqL1xudmFyIEJ1dHRvbkdyaWRIZWxwZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEJ1dHRvbkdyaWRIZWxwZXIsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0cyBhIG5ldyBCdXR0b25HcmlkSGVscGVyIGluc3RhbmNlIHdpdGggdGhlIHByb3ZpZGVkIGdyaWQgY29udHJvbC5cbiAgICAgKiBAcGFyYW0gc2VsZWN0ZWRDb250ZXh0IC0gVGhlIGdyaWQgY29udHJvbCByZXByZXNlbnRpbmcgdGhlIHNlbGVjdGVkIGNvbnRleHQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gQnV0dG9uR3JpZEhlbHBlcihzZWxlY3RlZENvbnRleHQpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuZ2V0QnV0dG9uTG9jYXRpb24oc2VsZWN0ZWRDb250ZXh0KTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIGFycmF5IGNvbnRhaW5pbmcgdGhlIEdVSURzIG9mIHRoZSBzZWxlY3RlZCByZWNvcmRzLlxuICAgICAqIEByZXR1cm5zIEFuIGFycmF5IG9mIHNlbGVjdGVkIHJlY29yZCBHVUlEcyBhcyBsb3dlcmNhc2Ugc3RyaW5ncy5cbiAgICAgKiBAdGhyb3dzIEVycm9yIGlmIHRoZSBncmlkIGNvbnRyb2wgaXMgbm90IHNldC5cbiAgICAgKi9cbiAgICBCdXR0b25HcmlkSGVscGVyLnByb3RvdHlwZS5nZXRTZWxlY3RlZFJlY29yZElkcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmdyaWRDb250cm9sKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJHcmlkIGNvbnRyb2wgaXMgbm90IHNldC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHNlbGVjdGVkUm93cyA9IHRoaXMuZ3JpZENvbnRyb2wuZ2V0R3JpZCgpLmdldFNlbGVjdGVkUm93cygpO1xuICAgICAgICB2YXIgcmVjb3JkSWRzID0gW107XG4gICAgICAgIHNlbGVjdGVkUm93cy5mb3JFYWNoKGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgICAgIHJlY29yZElkcy5wdXNoKHJvdy5kYXRhLmVudGl0eS5nZXRJZCgpLnJlcGxhY2UoXCJ7XCIsIFwiXCIpLnJlcGxhY2UoXCJ9XCIsIFwiXCIpLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJlY29yZElkcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGxvZ2ljYWwgbmFtZSBvZiB0aGUgZW50aXR5IGRpc3BsYXllZCBpbiB0aGUgZ3JpZC5cbiAgICAgKiBAcmV0dXJucyBUaGUgZW50aXR5IGxvZ2ljYWwgbmFtZS5cbiAgICAgKiBAdGhyb3dzIEVycm9yIGlmIHRoZSBncmlkIGNvbnRyb2wgaXMgbm90IHNldC5cbiAgICAgKi9cbiAgICBCdXR0b25HcmlkSGVscGVyLnByb3RvdHlwZS5nZXRFbnRpdHlMb2dpY2FsTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmdyaWRDb250cm9sKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJHcmlkIGNvbnRyb2wgaXMgbm90IHNldC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuZ3JpZENvbnRyb2wuZ2V0RW50aXR5TmFtZSgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVmFsaWRhdGVzIHRoYXQgYXQgbGVhc3Qgb25lIHJlY29yZCBpcyBzZWxlY3RlZCBpbiB0aGUgZ3JpZC5cbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyBpZiBzZWxlY3Rpb24gaXMgdmFsaWQuXG4gICAgICogQHRocm93cyBFeGNlcHRpb25Mb3dDb2RlQnV0dG9uIGlmIG5vIHJlY29yZHMgYXJlIHNlbGVjdGVkLlxuICAgICAqL1xuICAgIEJ1dHRvbkdyaWRIZWxwZXIucHJvdG90eXBlLnZhbGlkYXRlU2VsZWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRSb3dzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5ncmlkQ29udHJvbCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJHcmlkIGNvbnRyb2wgaXMgbm90IHNldC5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNlbGVjdGVkUm93cyA9IHRoaXMuZ3JpZENvbnRyb2wuZ2V0R3JpZCgpLmdldFNlbGVjdGVkUm93cygpO1xuICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZFJvd3MuZ2V0TGVuZ3RoKCkgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdm9pZCBCdXR0b25FeGNlcHRpb25fMS5FeGNlcHRpb25Mb3dDb2RlQnV0dG9uLmRpc3BsYXlHZW5lcmljRXJyb3JOb3RpZmljYXRpb24oXCJObyBSZWNvcmRzIHNlbGVjdGVkXCIsIFwiTm8gcmVjb3JkcyBzZWxlY3RlZC4gUGxlYXNlIHNlbGVjdCBhdCBsZWFzdCBvbmUgcmVjb3JkLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIFByb21pc2UucmVqZWN0KCldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgUHJvbWlzZS5yZXNvbHZlKCldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQnVpbGRzIGEgcGF5bG9hZCBmb3IgZ3JpZCBhY3Rpb25zLlxuICAgICAqIFRoZSBwYXlsb2FkIGluY2x1ZGVzIHRoZSBlbnRpdHkgbG9naWNhbCBuYW1lLCB0aGUgcGx1cmFsIG5hbWUgKGlmIGNvbmZpZ3VyZWQpLFxuICAgICAqIHNlbGVjdGVkIHJlY29yZCBHVUlEcywgYW5kIHRoZSBjYWxsaW5nIHVzZXIgSUQuXG4gICAgICogSWYgaW4gYSBzdWJncmlkLCBhZGRpdGlvbmFsIHBhcmVudCBlbnRpdHkgaW5mb3JtYXRpb24gaXMgaW5jbHVkZWQuXG4gICAgICogQHJldHVybnMgQSBQcm9taXNlIHJlc29sdmluZyB0byBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgcGF5bG9hZCBkYXRhLlxuICAgICAqIEB0aHJvd3MgRXJyb3IgaWYgdGhlIGdyaWQgY29udHJvbCBvciBidXR0b24gc2V0dGluZyBpcyBub3Qgc2V0LlxuICAgICAqL1xuICAgIEJ1dHRvbkdyaWRIZWxwZXIucHJvdG90eXBlLmdldFBheWxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBwYXlsb2FkLCBfYSwgcGFyZW50Rm9ybUNvbnRleHQsIF9iLCBwYXJlbnRGb3JtQ29udGV4dDtcbiAgICAgICAgICAgIHZhciBfYywgX2Q7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9lKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfZS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZ3JpZENvbnRyb2wgfHwgIXRoaXMuYnV0dG9uU2V0dGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkdyaWQgY29udHJvbCBvciBidXR0b24gc2V0dGluZyBpcyBub3Qgc2V0LlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHBheWxvYWQgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5idXR0b25TZXR0aW5nLmVzcF9pbmNsdWRlZW50aXR5bG9naWNhbG5hbWVpbnBheWxvYWQpIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZCA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBwYXlsb2FkKSwgeyBlbnRpdHlMb2dpY2FsTmFtZTogdGhpcy5ncmlkQ29udHJvbC5nZXRFbnRpdHlOYW1lKCkgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYSA9IFtfX2Fzc2lnbih7fSwgcGF5bG9hZCldO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2MgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZ2V0RW50aXR5UGx1cmFsTmFtZSh0aGlzLmdldEVudGl0eUxvZ2ljYWxOYW1lKCkpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZCA9IF9fYXNzaWduLmFwcGx5KHZvaWQgMCwgX2EuY29uY2F0KFsoX2MuZW50aXR5TG9naWNhbFBsdXJhbE5hbWUgPSBfZS5zZW50KCksIF9jKV0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHRoaXMuY29udGFpbmVyVHlwZSA9PT0gXCJzdWJncmlkXCIpKSByZXR1cm4gWzMgLypicmVhayovLCAzXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudEZvcm1Db250ZXh0ID0gdGhpcy5nZXRGb3JtQ29udGV4dEluU3ViZ3JpZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXJlbnRGb3JtQ29udGV4dCkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXlsb2FkID0gX19hc3NpZ24oX19hc3NpZ24oe30sIHBheWxvYWQpLCB7IHBhcmVudEVudGl0eUxvZ2ljYWxOYW1lOiBwYXJlbnRGb3JtQ29udGV4dC5kYXRhLmVudGl0eS5nZXRFbnRpdHlOYW1lKCkgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYiA9IFtfX2Fzc2lnbih7fSwgcGF5bG9hZCldO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2QgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZ2V0RW50aXR5UGx1cmFsTmFtZShwYXJlbnRGb3JtQ29udGV4dC5kYXRhLmVudGl0eS5nZXRFbnRpdHlOYW1lKCkpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZCA9IF9fYXNzaWduLmFwcGx5KHZvaWQgMCwgX2IuY29uY2F0KFsoX2QucGFyZW50RW50aXR5TG9naWNhbFBsdXJhbE5hbWUgPSBfZS5zZW50KCksIF9kKV0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9lLmxhYmVsID0gMztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYnV0dG9uU2V0dGluZy5lc3BfaW5jbHVkZXJlY29yZGlkaW5wYXlsb2FkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZCA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBwYXlsb2FkKSwgeyByZWNvcmRJZHM6IHRoaXMuZ2V0U2VsZWN0ZWRSZWNvcmRJZHMoKSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jb250YWluZXJUeXBlID09PSBcInN1YmdyaWRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRGb3JtQ29udGV4dCA9IHRoaXMuZ2V0Rm9ybUNvbnRleHRJblN1YmdyaWQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmVudEZvcm1Db250ZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXlsb2FkID0gX19hc3NpZ24oX19hc3NpZ24oe30sIHBheWxvYWQpLCB7IHBhcmVudFJlY29yZElkOiBwYXJlbnRGb3JtQ29udGV4dC5kYXRhLmVudGl0eS5nZXRJZCgpLnJlcGxhY2UoXCJ7XCIsIFwiXCIpLnJlcGxhY2UoXCJ9XCIsIFwiXCIpLnRvTG93ZXJDYXNlKCkgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5idXR0b25TZXR0aW5nLmVzcF9pbmNsdWRlY2FsbGluZ3VzZXJpZGlucGF5bG9hZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBheWxvYWQgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgcGF5bG9hZCksIHsgdXNlcklkOiB0aGlzLmdldFVzZXJJRCgpIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHBheWxvYWRdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIE9wZW5zIGEgY29uZmlybWF0aW9uIGRpYWxvZyBiZWZvcmUgZXhlY3V0aW5nIHRoZSBncmlkIGFjdGlvbi5cbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB0byB0cnVlIGlmIHRoZSB1c2VyIGNvbmZpcm1zIHRoZSBkaWFsb2csIGZhbHNlIG90aGVyd2lzZS5cbiAgICAgKi9cbiAgICBCdXR0b25HcmlkSGVscGVyLnByb3RvdHlwZS5vcGVuQ29uZmlybWF0aW9uRGlhbG9nQmVmb3JlUnVuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY29uZmlybVN0cmluZ3MsIHJlc3VsdDtcbiAgICAgICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZDtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2UpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9lLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKCF0aGlzLmJ1dHRvbkFkdmFuY2VkU2V0dGluZyB8fCB0aGlzLmJ1dHRvbkFkdmFuY2VkU2V0dGluZy5lc3BfY29uZmlybWF0aW9uZGlhbG9ndGV4dCA9PSBudWxsKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBCdXR0b25FeGNlcHRpb25fMS5FeGNlcHRpb25Mb3dDb2RlQnV0dG9uLmRpc3BsYXlHZW5lcmljRXJyb3JOb3RpZmljYXRpb24oXCJDb25maXJtYXRpb24gRGlhbG9nIFRleHQgRXJyb3JcIiwgXCJUaGUgY29uZmlybWF0aW9uIGRpYWxvZyB0ZXh0IGlzIGVtcHR5ISBQbGVhc2UgZmlsbCBpdCBvbiB5b3VyIGNvbmZpZ3VyYXRpb24gc2V0dGluZ3MuXCIpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Uuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGZhbHNlXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlybVN0cmluZ3MgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuY2VsQnV0dG9uTGFiZWw6IChfYSA9IHRoaXMuYnV0dG9uQWR2YW5jZWRTZXR0aW5nLmVzcF9jb25maXJtYXRpb25kaWFsb2djYW5jZWxsYWJlbCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uTGFiZWw6IChfYiA9IHRoaXMuYnV0dG9uQWR2YW5jZWRTZXR0aW5nLmVzcF9jb25maXJtYXRpb25kaWFsb2djb25maXJtbGFiZWwpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VidGl0bGU6IChfYyA9IHRoaXMuYnV0dG9uQWR2YW5jZWRTZXR0aW5nLmVzcF9jb25maXJtYXRpb25kaWFsb2dzdWJ0aXRsZSkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAoX2QgPSB0aGlzLmJ1dHRvbkFkdmFuY2VkU2V0dGluZy5lc3BfY29uZmlybWF0aW9uZGlhbG9ndGV4dCkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogdGhpcy5idXR0b25BZHZhbmNlZFNldHRpbmcuZXNwX2NvbmZpcm1hdGlvbmRpYWxvZ3RpdGxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIFhybS5OYXZpZ2F0aW9uLm9wZW5Db25maXJtRGlhbG9nKGNvbmZpcm1TdHJpbmdzKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9lLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZXN1bHQuY29uZmlybWVkXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEaXNwbGF5cyBhbiBhc3luY2hyb25vdXMgZ3JpZCBub3RpZmljYXRpb24gZm9yIDUgc2Vjb25kcyB1c2luZyBnbG9iYWwgbm90aWZpY2F0aW9ucy5cbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSBub3RpZmljYXRpb24gaXMgY2xlYXJlZC5cbiAgICAgKi9cbiAgICBCdXR0b25HcmlkSGVscGVyLnByb3RvdHlwZS5hc3luY0dyaWROb3RpZmljYXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBub3RpZmljYXRpb247XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoIXRoaXMuYnV0dG9uQWR2YW5jZWRTZXR0aW5nIHx8IHRoaXMuYnV0dG9uQWR2YW5jZWRTZXR0aW5nLmVzcF9hc3luY2Zvcm1ub3RpZmljYXRpb250ZXh0ID09IG51bGwpKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIEJ1dHRvbkV4Y2VwdGlvbl8xLkV4Y2VwdGlvbkxvd0NvZGVCdXR0b24uZGlzcGxheUdlbmVyaWNFcnJvck5vdGlmaWNhdGlvbihcIkFzeW5jIEdyaWQgTm90aWZpY2F0aW9uIFRleHQgRXJyb3JcIiwgXCJUaGUgYXN5bmMgZ3JpZCBub3RpZmljYXRpb24gdGV4dCBpcyBlbXB0eSEgUGxlYXNlIGZpbGwgaXQgb24geW91ciBjb25maWd1cmF0aW9uIHNldHRpbmdzLlwiKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldmVsOiA0IC8qIFhybUVudW0uQXBwTm90aWZpY2F0aW9uTGV2ZWwuSW5mb3JtYXRpb24gKi8sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogdGhpcy5idXR0b25BZHZhbmNlZFNldHRpbmcuZXNwX2FzeW5jZm9ybW5vdGlmaWNhdGlvbnRleHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93Q2xvc2VCdXR0b246IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgWHJtLkFwcC5hZGRHbG9iYWxOb3RpZmljYXRpb24obm90aWZpY2F0aW9uKS50aGVuKGZ1bmN0aW9uIChpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmdsb2JhbE5vdGlmaWNhdGlvbklkID0gaWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmNsZWFyR3JpZE5vdGlmaWNhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDUwMDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2xlYXJzIHRoZSBncmlkIG5vdGlmaWNhdGlvbiB1c2luZyB0aGUgc3RvcmVkIGdsb2JhbCBub3RpZmljYXRpb24gSUQuXG4gICAgICogQHRocm93cyBFcnJvciBpZiBubyBub3RpZmljYXRpb24gaXMgY3VycmVudGx5IHNldC5cbiAgICAgKi9cbiAgICBCdXR0b25HcmlkSGVscGVyLnByb3RvdHlwZS5jbGVhckdyaWROb3RpZmljYXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmdsb2JhbE5vdGlmaWNhdGlvbklkKSB7XG4gICAgICAgICAgICBYcm0uQXBwLmNsZWFyR2xvYmFsTm90aWZpY2F0aW9uKHRoaXMuZ2xvYmFsTm90aWZpY2F0aW9uSWQpO1xuICAgICAgICAgICAgdGhpcy5nbG9iYWxOb3RpZmljYXRpb25JZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogRGlzcGxheXMgYSBzeW5jaHJvbm91cyBncmlkIG5vdGlmaWNhdGlvbiBmb3IgMTIwIHNlY29uZHMgdXNpbmcgZ2xvYmFsIG5vdGlmaWNhdGlvbnMuXG4gICAgICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgbm90aWZpY2F0aW9uIGlzIGNsZWFyZWQuXG4gICAgICovXG4gICAgQnV0dG9uR3JpZEhlbHBlci5wcm90b3R5cGUuc3luY0dyaWROb3RpZmljYXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBub3RpZmljYXRpb247XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoIXRoaXMuYnV0dG9uQWR2YW5jZWRTZXR0aW5nIHx8IHRoaXMuYnV0dG9uQWR2YW5jZWRTZXR0aW5nLmVzcF9zeW5jZm9ybW5vdGlmaWNhdGlvbnRleHQgPT0gbnVsbCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgQnV0dG9uRXhjZXB0aW9uXzEuRXhjZXB0aW9uTG93Q29kZUJ1dHRvbi5kaXNwbGF5R2VuZXJpY0Vycm9yTm90aWZpY2F0aW9uKFwiU3luYyBHcmlkIE5vdGlmaWNhdGlvbiBUZXh0IEVycm9yXCIsIFwiVGhlIHN5bmMgZ3JpZCBub3RpZmljYXRpb24gdGV4dCBpcyBlbXB0eSEgUGxlYXNlIGZpbGwgaXQgb24geW91ciBjb25maWd1cmF0aW9uIHNldHRpbmdzLlwiKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldmVsOiA0IC8qIFhybUVudW0uQXBwTm90aWZpY2F0aW9uTGV2ZWwuSW5mb3JtYXRpb24gKi8sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogdGhpcy5idXR0b25BZHZhbmNlZFNldHRpbmcuZXNwX3N5bmNmb3Jtbm90aWZpY2F0aW9udGV4dCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAyLFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFhybS5BcHAuYWRkR2xvYmFsTm90aWZpY2F0aW9uKG5vdGlmaWNhdGlvbikudGhlbihmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5nbG9iYWxOb3RpZmljYXRpb25JZCA9IGlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5jbGVhckdyaWROb3RpZmljYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAxMjAwMDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2xlYXJzIGFsbCBzeW5jaHJvbm91cyBub3RpZmljYXRpb25zLCBpbmNsdWRpbmcgZ3JpZCBub3RpZmljYXRpb25zIGFuZCBwcm9ncmVzcyBpbmRpY2F0b3JzLlxuICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIG5vdGlmaWNhdGlvbnMgYXJlIGNsZWFyZWQuXG4gICAgICovXG4gICAgQnV0dG9uR3JpZEhlbHBlci5wcm90b3R5cGUuY2xlYXJTeW5jTm90aWZpY2F0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2MpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKChfYSA9IHRoaXMuYnV0dG9uQWR2YW5jZWRTZXR0aW5nKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZXNwX3N5bmNmb3Jtbm90aWZpY2F0aW9uKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmNsZWFyR3JpZE5vdGlmaWNhdGlvbigpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Muc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2MubGFiZWwgPSAyO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKF9iID0gdGhpcy5idXR0b25BZHZhbmNlZFNldHRpbmcpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5lc3Bfc3luY3NwaW5uZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBYcm0uVXRpbGl0eS5jbG9zZVByb2dyZXNzSW5kaWNhdG9yKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGlzcGxheXMgYSBzdWNjZXNzIGdyaWQgbm90aWZpY2F0aW9uIGZvciA1IHNlY29uZHMgdXNpbmcgZ2xvYmFsIG5vdGlmaWNhdGlvbnMuXG4gICAgICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgbm90aWZpY2F0aW9uIGlzIGNsZWFyZWQuXG4gICAgICovXG4gICAgQnV0dG9uR3JpZEhlbHBlci5wcm90b3R5cGUuc2hvd1N1Y2Nlc3NHcmlkTm90aWZpY2F0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgbm90aWZpY2F0aW9uO1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKCF0aGlzLmdyaWRDb250cm9sIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIXRoaXMuYnV0dG9uQWR2YW5jZWRTZXR0aW5nIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5idXR0b25BZHZhbmNlZFNldHRpbmcuZXNwX3N5bmNzdWNjZXNzZm9ybW5vdGlmaWNhdGlvbnRleHQgPT0gbnVsbCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgQnV0dG9uRXhjZXB0aW9uXzEuRXhjZXB0aW9uTG93Q29kZUJ1dHRvbi5kaXNwbGF5R2VuZXJpY0Vycm9yTm90aWZpY2F0aW9uKFwiU3VjY2VzcyBOb3RpZmljYXRpb24gVGV4dCBFcnJvclwiLCBcIlRoZSBzdWNjZXNzIG5vdGlmaWNhdGlvbiB0ZXh0IGlzIGVtcHR5ISBQbGVhc2UgZmlsbCBpdCBvbiB5b3VyIGNvbmZpZ3VyYXRpb24gc2V0dGluZ3MuXFxuRmllbGQ6IGVzcF9zeW5jc3VjY2Vzc2Zvcm1ub3RpZmljYXRpb250ZXh0XCIpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb24gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV2ZWw6IDQgLyogWHJtRW51bS5BcHBOb3RpZmljYXRpb25MZXZlbC5JbmZvcm1hdGlvbiAqLyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiB0aGlzLmJ1dHRvbkFkdmFuY2VkU2V0dGluZy5lc3Bfc3luY3N1Y2Nlc3Nmb3Jtbm90aWZpY2F0aW9udGV4dCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dDbG9zZUJ1dHRvbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBYcm0uQXBwLmFkZEdsb2JhbE5vdGlmaWNhdGlvbihub3RpZmljYXRpb24pLnRoZW4oZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZ2xvYmFsTm90aWZpY2F0aW9uSWQgPSBpZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuY2xlYXJHcmlkTm90aWZpY2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgNTAwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBPcGVucyBhIHN5bmNocm9ub3VzIHN1Y2Nlc3MgZGlhbG9nIGFuZCBhd2FpdHMgdGhlIHVzZXIncyBjb25maXJtYXRpb24uXG4gICAgICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdHJ1ZSBpZiB0aGUgc3VjY2VzcyBkaWFsb2cgaXMgY29uZmlybWVkLCBvciBmYWxzZSBvdGhlcndpc2UuXG4gICAgICovXG4gICAgQnV0dG9uR3JpZEhlbHBlci5wcm90b3R5cGUub3BlblN1Y2Nlc3NEaWFsb2dTeW5jID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY29uZmlybVN0cmluZ3MsIHJlc3VsdDtcbiAgICAgICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9jKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYy5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISghdGhpcy5idXR0b25BZHZhbmNlZFNldHRpbmcgfHwgdGhpcy5idXR0b25BZHZhbmNlZFNldHRpbmcuZXNwX3N5bmNjb25maXJtYXRpb25ib3h0ZXh0ID09IG51bGwpKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIEJ1dHRvbkV4Y2VwdGlvbl8xLkV4Y2VwdGlvbkxvd0NvZGVCdXR0b24uZGlzcGxheUdlbmVyaWNFcnJvck5vdGlmaWNhdGlvbihcIlN5bmMgQ29uZmlybWF0aW9uIEJveCBUZXh0IEVycm9yXCIsIFwiVGhlIHN5bmMgY29uZmlybWF0aW9uIGJveCB0ZXh0IGlzIGVtcHR5ISBQbGVhc2UgZmlsbCBpdCBvbiB5b3VyIGNvbmZpZ3VyYXRpb24gc2V0dGluZ3MuXCIpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Muc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGZhbHNlXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlybVN0cmluZ3MgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvbkxhYmVsOiAoX2EgPSB0aGlzLmJ1dHRvbkFkdmFuY2VkU2V0dGluZy5lc3Bfc3luY2NvbmZpcm1hdGlvbmJveGNvbmZpcm1sYWJlbCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IChfYiA9IHRoaXMuYnV0dG9uQWR2YW5jZWRTZXR0aW5nLmVzcF9zeW5jY29uZmlybWF0aW9uYm94dGV4dCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aGlzLmJ1dHRvbkFkdmFuY2VkU2V0dGluZy5lc3Bfc3luY2NvbmZpcm1hdGlvbmJveHRpdGxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIFhybS5OYXZpZ2F0aW9uLm9wZW5BbGVydERpYWxvZyhjb25maXJtU3RyaW5ncyldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBfYy5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcmVzdWx0LmNvbmZpcm1lZF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogT3BlbnMgYSBzdWNjZXNzIGRpYWxvZyB0aGF0IG1heSByZWRpcmVjdCB0aGUgdXNlciBiYXNlZCBvbiB0aGVpciBjb25maXJtYXRpb24uXG4gICAgICogSWYgY29uZmlybWVkLCB0aGUgYnJvd3NlciBpcyByZWRpcmVjdGVkOyBvdGhlcndpc2UsIHRoZSBncmlkIGlzIHJlbG9hZGVkLlxuICAgICAqIEBwYXJhbSByZXNwb25zZSAtIEFuIG9iamVjdCBjb250YWluaW5nIHRoZSByZWRpcmVjdCBVUkkuXG4gICAgICovXG4gICAgQnV0dG9uR3JpZEhlbHBlci5wcm90b3R5cGUub3BlblN1Y2Nlc3NEaWFsb2dSZWRpcmVjdCA9IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2Q7XG4gICAgICAgIGlmICghdGhpcy5idXR0b25BZHZhbmNlZFNldHRpbmcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkJ1dHRvbiBhZHZhbmNlZCBzZXR0aW5nIGlzIG5vdCBzZXQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmJ1dHRvbkFkdmFuY2VkU2V0dGluZy5lc3Bfc3luY2NvbmZpcm1hdGlvbmJveHJlZGlyZWN0dGV4dCA9PSBudWxsKSB7XG4gICAgICAgICAgICBCdXR0b25FeGNlcHRpb25fMS5FeGNlcHRpb25Mb3dDb2RlQnV0dG9uLmRpc3BsYXlHZW5lcmljRXJyb3JOb3RpZmljYXRpb24oXCJTeW5jIENvbmZpcm1hdGlvbiBCb3ggUmVkaXJlY3QgVGV4dCBFcnJvclwiLCBcIlRoZSBzeW5jIGNvbmZpcm1hdGlvbiBib3ggcmVkaXJlY3QgdGV4dCBpcyBlbXB0eSEgUGxlYXNlIGZpbGwgaXQgb24geW91ciBjb25maWd1cmF0aW9uIHNldHRpbmdzLlwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY29uZmlybVN0cmluZ3MgPSB7XG4gICAgICAgICAgICBjYW5jZWxCdXR0b25MYWJlbDogKF9hID0gdGhpcy5idXR0b25BZHZhbmNlZFNldHRpbmcuZXNwX3N5bmNjb25maXJtYXRpb25ib3hyZWRpcmVjdGNhbmNlbGxhYmVsKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBjb25maXJtQnV0dG9uTGFiZWw6IChfYiA9IHRoaXMuYnV0dG9uQWR2YW5jZWRTZXR0aW5nLmVzcF9zeW5jY29uZmlybWF0aW9uYm94cmVkaXJlY3Rjb25maXJtbGFiZWwpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHRleHQ6IHRoaXMuYnV0dG9uQWR2YW5jZWRTZXR0aW5nLmVzcF9zeW5jY29uZmlybWF0aW9uYm94cmVkaXJlY3R0ZXh0LFxuICAgICAgICAgICAgc3VidGl0bGU6IChfYyA9IHRoaXMuYnV0dG9uQWR2YW5jZWRTZXR0aW5nLmVzcF9zeW5jY29uZmlybWF0aW9uYm94cmVkaXJlY3RzdWJ0aXRsZSkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgdGl0bGU6IChfZCA9IHRoaXMuYnV0dG9uQWR2YW5jZWRTZXR0aW5nLmVzcF9zeW5jY29uZmlybWF0aW9uYm94cmVkaXJlY3R0aXRsZSkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogdW5kZWZpbmVkLFxuICAgICAgICB9O1xuICAgICAgICBYcm0uTmF2aWdhdGlvbi5vcGVuQ29uZmlybURpYWxvZyhjb25maXJtU3RyaW5ncykudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICBpZiAocmVzdWx0LmNvbmZpcm1lZCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVXNlciBjb25maXJtZWQgdGhlIGRpYWxvZywgcmVkaXJlY3RpbmcuLi5cIik7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLmJ1dHRvbkFkdmFuY2VkU2V0dGluZy5lc3Bfc3luY2NvbmZpcm1hdGlvbmJveHJlZGlyZWN0bW9kZSA9PT1cbiAgICAgICAgICAgICAgICAgICAgMSAvKiBlc3BfYnV0dG9uYWR2YW5jZWRzZXR0aW5nX2VzcF9idXR0b25hZHZhbmNlZHNldHRpbmdfZXNwX3N5bmNjb25maXJtYXRpb25ib3hyZWRpcmVjdG1vZGUuQ3VycmVudFRhYiAqLykge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cub3BlbihyZXNwb25zZS5yZWRpcmVjdFVyaSwgXCJfc2VsZlwiKS5mb2N1cygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93Lm9wZW4ocmVzcG9uc2UucmVkaXJlY3RVcmksIFwiX2JsYW5rXCIpLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJVc2VyIGNhbmNlbGxlZCB0aGUgZGlhbG9nLCByZWZyZXNoaW5nIHRoZSBncmlkLlwiKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5yZWxvYWRHcmlkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVsb2FkcyB0aGUgZ3JpZCBhbmQsIGlmIGluIGEgc3ViZ3JpZCwgcmVsb2FkcyB0aGUgcGFyZW50IGZvcm0uXG4gICAgICovXG4gICAgQnV0dG9uR3JpZEhlbHBlci5wcm90b3R5cGUucmVsb2FkR3JpZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmdyaWRDb250cm9sIHx8ICF0aGlzLmJ1dHRvblNldHRpbmcgfHwgIXRoaXMuYnV0dG9uQWR2YW5jZWRTZXR0aW5nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJSZXF1aXJlZCBwcm9wZXJ0aWVzIGFyZSBub3Qgc2V0IGZvciByZWxvYWRpbmcgdGhlIGdyaWQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmJ1dHRvblNldHRpbmcuZXNwX3JlZnJlc2h3aGVuYXBpY2FsbGVuZHMgJiZcbiAgICAgICAgICAgICEodGhpcy5idXR0b25BZHZhbmNlZFNldHRpbmcuZXNwX3N5bmNjb25maXJtYXRpb25ib3hyZWRpcmVjdCAmJlxuICAgICAgICAgICAgICAgIHRoaXMuYnV0dG9uQWR2YW5jZWRTZXR0aW5nLmVzcF9zeW5jY29uZmlybWF0aW9uYm94cmVkaXJlY3Rtb2RlID09PVxuICAgICAgICAgICAgICAgICAgICAxIC8qIGVzcF9idXR0b25hZHZhbmNlZHNldHRpbmdfZXNwX2J1dHRvbmFkdmFuY2Vkc2V0dGluZ19lc3Bfc3luY2NvbmZpcm1hdGlvbmJveHJlZGlyZWN0bW9kZS5DdXJyZW50VGFiICovKSkge1xuICAgICAgICAgICAgdGhpcy5ncmlkQ29udHJvbC5yZWZyZXNoKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY29udGFpbmVyVHlwZSA9PT0gXCJzdWJncmlkXCIpIHtcbiAgICAgICAgICAgIHRoaXMucmVsb2FkRm9ybSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZWxvYWRzIHRoZSBwYXJlbnQgZm9ybSBmb3Igc3ViZ3JpZCBjb250ZXh0cy5cbiAgICAgKiBAcmV0dXJucyBUaGUgcGFyZW50IGZvcm0gY29udGV4dCBpZiBhdmFpbGFibGUuXG4gICAgICogQHRocm93cyBFcnJvciBpZiByZXF1aXJlZCBwcm9wZXJ0aWVzIGFyZSBub3Qgc2V0IG9yIHRoZSBjb250YWluZXIgaXMgbm90IGEgc3ViZ3JpZC5cbiAgICAgKi9cbiAgICBCdXR0b25HcmlkSGVscGVyLnByb3RvdHlwZS5yZWxvYWRGb3JtID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuZm9ybUNvbnRleHQgfHwgIXRoaXMuYnV0dG9uU2V0dGluZyB8fCAhdGhpcy5idXR0b25BZHZhbmNlZFNldHRpbmcgfHwgdGhpcy5jb250YWluZXJUeXBlICE9PSBcInN1YmdyaWRcIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUmVxdWlyZWQgcHJvcGVydGllcyBhcmUgbm90IHNldCBmb3IgcmVsb2FkaW5nIHRoZSBmb3JtLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5idXR0b25TZXR0aW5nLmVzcF9yZWZyZXNod2hlbmFwaWNhbGxlbmRzICYmXG4gICAgICAgICAgICAhKHRoaXMuYnV0dG9uQWR2YW5jZWRTZXR0aW5nLmVzcF9zeW5jY29uZmlybWF0aW9uYm94cmVkaXJlY3QgJiZcbiAgICAgICAgICAgICAgICB0aGlzLmJ1dHRvbkFkdmFuY2VkU2V0dGluZy5lc3Bfc3luY2NvbmZpcm1hdGlvbmJveHJlZGlyZWN0bW9kZSA9PT1cbiAgICAgICAgICAgICAgICAgICAgMSAvKiBlc3BfYnV0dG9uYWR2YW5jZWRzZXR0aW5nX2VzcF9idXR0b25hZHZhbmNlZHNldHRpbmdfZXNwX3N5bmNjb25maXJtYXRpb25ib3hyZWRpcmVjdG1vZGUuQ3VycmVudFRhYiAqLykpIHtcbiAgICAgICAgICAgIHRoaXMuZm9ybUNvbnRleHQuZGF0YS5yZWZyZXNoKGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIHRoZSBwYXJlbnQgZm9ybSBjb250ZXh0IHdoZW4gdGhlIGdyaWQgaXMgZW1iZWRkZWQgYXMgYSBzdWJncmlkLlxuICAgICAqIEByZXR1cm5zIFRoZSBwYXJlbnQgZm9ybSBjb250ZXh0IG9yIG51bGwgaWYgbm90IGF2YWlsYWJsZS5cbiAgICAgKi9cbiAgICBCdXR0b25HcmlkSGVscGVyLnByb3RvdHlwZS5nZXRGb3JtQ29udGV4dEluU3ViZ3JpZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuYnV0dG9uU2V0dGluZy5lc3BfYnV0dG9ubG9jYXRpb24gPT09IDc4OTYyMDAwMiAvKiBlc3BfYnV0dG9uc2V0dGluZ19lc3BfYnV0dG9uc2V0dGluZ19lc3BfYnV0dG9ubG9jYXRpb24uU3ViZ3JpZCAqLyAmJlxuICAgICAgICAgICAgdGhpcy5jb250YWluZXJUeXBlID09PSBcInN1YmdyaWRcIikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJTdWJncmlkIGRldGVjdGVkLiBTZXR0aW5nIGZvcm0gY29udGV4dCB0byBwYXJlbnQgZm9ybS5cIik7XG4gICAgICAgICAgICAvLyBDYXN0IGdyaWRDb250cm9sIGFzIGFueSB0byBhY2Nlc3MgdGhlIGZvcm1Db250ZXh0IHByb3BlcnR5LlxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgIHZhciB0ZW1wQ29udHJvbCA9IHRoaXMuZ3JpZENvbnRyb2w7XG4gICAgICAgICAgICByZXR1cm4gdGVtcENvbnRyb2wuZm9ybUNvbnRleHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbiAgICByZXR1cm4gQnV0dG9uR3JpZEhlbHBlcjtcbn0oQmFzZUhlbHBlcl8xLkJhc2VIZWxwZXIpKTtcbmV4cG9ydHMuQnV0dG9uR3JpZEhlbHBlciA9IEJ1dHRvbkdyaWRIZWxwZXI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/Helpers/ButtonGridHelper.ts\n");

/***/ }),

/***/ "./src/LowCodeButtonGridBase.ts":
/*!**************************************!*\
  !*** ./src/LowCodeButtonGridBase.ts ***!
  \**************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.ButtonRegistrationGrid = void 0;\nvar ButtonException_1 = __webpack_require__(/*! ./Exceptions/ButtonException */ \"./src/Exceptions/ButtonException.ts\");\nvar ButtonGridHelper_1 = __webpack_require__(/*! ./Helpers/ButtonGridHelper */ \"./src/Helpers/ButtonGridHelper.ts\");\nvar BaseButtonResponseModels_1 = __webpack_require__(/*! ./Models/BaseButtonResponseModels */ \"./src/Models/BaseButtonResponseModels.ts\");\nvar ButtonRegistrationGrid = /** @class */ (function () {\n    function ButtonRegistrationGrid() {\n    }\n    /**\n     * Handles the onClick event for grid buttons.\n     * @param gridControl - The grid control representing the selected records.\n     * @param buttonSettingName - The name of the button setting.\n     */\n    ButtonRegistrationGrid.onClick = function (gridControl, buttonSettingName) {\n        return __awaiter(this, void 0, void 0, function () {\n            var buttonHelper, confirmation;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        buttonHelper = new ButtonGridHelper_1.ButtonGridHelper(gridControl);\n                        return [4 /*yield*/, buttonHelper.initializeSettings(buttonSettingName)];\n                    case 1:\n                        _a.sent();\n                        return [4 /*yield*/, buttonHelper.validateSelection()];\n                    case 2:\n                        if (_a.sent()) {\n                            return [2 /*return*/];\n                        }\n                        if (!buttonHelper.buttonAdvancedSetting.esp_showconfirmationdialog) return [3 /*break*/, 4];\n                        return [4 /*yield*/, buttonHelper.openConfirmationDialogBeforeRun()];\n                    case 3:\n                        confirmation = _a.sent();\n                        if (!confirmation) {\n                            return [2 /*return*/];\n                        }\n                        _a.label = 4;\n                    case 4:\n                        if (!!buttonHelper.buttonSetting.esp_endpoint) return [3 /*break*/, 6];\n                        return [4 /*yield*/, ButtonException_1.ExceptionLowCodeButton.displayGenericErrorNotification(\"Endpoint Not Set\", \"The endpoint for the button is not set. Please set it up in the button settings.\")];\n                    case 5:\n                        _a.sent();\n                        return [2 /*return*/];\n                    case 6:\n                        if (!(buttonHelper.buttonAdvancedSetting.esp_executionmode ===\n                            1 /* esp_buttonadvancedsetting_esp_buttonadvancedsetting_esp_executionmode.Async */)) return [3 /*break*/, 8];\n                        return [4 /*yield*/, this.executeAsync(buttonHelper)];\n                    case 7:\n                        _a.sent();\n                        return [3 /*break*/, 10];\n                    case 8: return [4 /*yield*/, this.executeSync(buttonHelper)];\n                    case 9:\n                        _a.sent();\n                        _a.label = 10;\n                    case 10: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Executes an asynchronous HTTP call for grid actions.\n     * @param buttonHelper - The initialized ButtonGridHelper instance.\n     */\n    ButtonRegistrationGrid.executeAsync = function (buttonHelper) {\n        return __awaiter(this, void 0, void 0, function () {\n            var buttonSetting, buttonAdvancedSetting, _a, _b, _c;\n            var _this = this;\n            return __generator(this, function (_d) {\n                switch (_d.label) {\n                    case 0:\n                        buttonSetting = buttonHelper.buttonSetting, buttonAdvancedSetting = buttonHelper.buttonAdvancedSetting;\n                        console.log(\"Executing async call to \".concat(buttonSetting === null || buttonSetting === void 0 ? void 0 : buttonSetting.esp_endpoint));\n                        if (buttonAdvancedSetting === null || buttonAdvancedSetting === void 0 ? void 0 : buttonAdvancedSetting.esp_asyncformnotification) {\n                            void buttonHelper.asyncGridNotification();\n                        }\n                        _b = (_a = buttonHelper)\n                            .makeRequest;\n                        _c = [\"POST\", buttonSetting.esp_endpoint];\n                        return [4 /*yield*/, buttonHelper.getPayload()];\n                    case 1:\n                        _b.apply(_a, _c.concat([_d.sent()]))\n                            .catch(function (error) { return __awaiter(_this, void 0, void 0, function () {\n                            return __generator(this, function (_a) {\n                                switch (_a.label) {\n                                    case 0: return [4 /*yield*/, ButtonException_1.ExceptionLowCodeButton.displayGenericErrorNotification(\"Error during HTTP Call\", error.message)];\n                                    case 1:\n                                        _a.sent();\n                                        return [2 /*return*/];\n                                }\n                            });\n                        }); });\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Executes a synchronous HTTP call for grid actions.\n     * @param buttonHelper - The initialized ButtonGridHelper instance.\n     */\n    ButtonRegistrationGrid.executeSync = function (buttonHelper) {\n        return __awaiter(this, void 0, void 0, function () {\n            var buttonSetting, buttonAdvancedSetting, response, _a, _b, _c, errorMessage, _d, _e, errorText, redirectResponse, _f, _g;\n            var _this = this;\n            var _h, _j;\n            return __generator(this, function (_k) {\n                switch (_k.label) {\n                    case 0:\n                        buttonSetting = buttonHelper.buttonSetting, buttonAdvancedSetting = buttonHelper.buttonAdvancedSetting;\n                        console.log(\"Executing sync call to \".concat(buttonSetting === null || buttonSetting === void 0 ? void 0 : buttonSetting.esp_endpoint));\n                        if (!(buttonAdvancedSetting === null || buttonAdvancedSetting === void 0 ? void 0 : buttonAdvancedSetting.esp_syncformnotification)) return [3 /*break*/, 2];\n                        return [4 /*yield*/, buttonHelper.syncGridNotification()];\n                    case 1:\n                        _k.sent();\n                        _k.label = 2;\n                    case 2:\n                        if (!(buttonAdvancedSetting === null || buttonAdvancedSetting === void 0 ? void 0 : buttonAdvancedSetting.esp_syncspinner)) return [3 /*break*/, 5];\n                        if (!!buttonAdvancedSetting.esp_syncspinnertext) return [3 /*break*/, 4];\n                        return [4 /*yield*/, ButtonException_1.ExceptionLowCodeButton.displayGenericErrorNotification(\"Sync Spinner Text Error\", \"The sync spinner text is empty! Please fill it on your configuration settings.\")];\n                    case 3:\n                        _k.sent();\n                        return [2 /*return*/];\n                    case 4:\n                        Xrm.Utility.showProgressIndicator(buttonAdvancedSetting.esp_syncspinnertext);\n                        _k.label = 5;\n                    case 5:\n                        _b = (_a = buttonHelper)\n                            .makeRequest;\n                        _c = [\"POST\", buttonSetting.esp_endpoint];\n                        return [4 /*yield*/, buttonHelper.getPayload()];\n                    case 6: return [4 /*yield*/, _b.apply(_a, _c.concat([_k.sent()]))\n                            .catch(function (error) { return __awaiter(_this, void 0, void 0, function () {\n                            return __generator(this, function (_a) {\n                                switch (_a.label) {\n                                    case 0: return [4 /*yield*/, ButtonException_1.ExceptionLowCodeButton.displayGenericErrorNotification(\"Error during HTTP Call\", error.message)];\n                                    case 1:\n                                        _a.sent();\n                                        return [2 /*return*/];\n                                }\n                            });\n                        }); })\n                            .finally(function () {\n                            if (buttonAdvancedSetting === null || buttonAdvancedSetting === void 0 ? void 0 : buttonAdvancedSetting.esp_syncspinner) {\n                                Xrm.Utility.closeProgressIndicator();\n                            }\n                            if (buttonAdvancedSetting === null || buttonAdvancedSetting === void 0 ? void 0 : buttonAdvancedSetting.esp_syncformnotification) {\n                                void buttonHelper.clearGridNotification();\n                            }\n                        })];\n                    case 7:\n                        response = _k.sent();\n                        if (!response)\n                            return [2 /*return*/];\n                        if (!(response.status === 400)) return [3 /*break*/, 10];\n                        _e = (_d = BaseButtonResponseModels_1.ErrorMessageResponse).fromJson;\n                        return [4 /*yield*/, response.text()];\n                    case 8:\n                        errorMessage = _e.apply(_d, [_k.sent()]);\n                        return [4 /*yield*/, ButtonException_1.ExceptionLowCodeButton.displayGenericErrorNotification(errorMessage.title, errorMessage.message)];\n                    case 9:\n                        _k.sent();\n                        return [2 /*return*/];\n                    case 10:\n                        if (!(((_h = response.status) !== null && _h !== void 0 ? _h : 500) >= 500)) return [3 /*break*/, 13];\n                        return [4 /*yield*/, response.text()];\n                    case 11:\n                        errorText = (_j = (_k.sent())) !== null && _j !== void 0 ? _j : \"An error occurred on the server. Please try again later.\";\n                        return [4 /*yield*/, ButtonException_1.ExceptionLowCodeButton.displayGenericErrorNotification(\"Error during HTTP Call\", \"Error code: \".concat(response.status, \"\\n\").concat(errorText))];\n                    case 12:\n                        _k.sent();\n                        return [2 /*return*/];\n                    case 13:\n                        if (!(response.status === 200)) return [3 /*break*/, 20];\n                        buttonHelper.clearSyncNotifications();\n                        if (!(buttonAdvancedSetting === null || buttonAdvancedSetting === void 0 ? void 0 : buttonAdvancedSetting.esp_syncsuccessformnotification)) return [3 /*break*/, 15];\n                        return [4 /*yield*/, buttonHelper.showSuccessGridNotification()];\n                    case 14:\n                        _k.sent();\n                        _k.label = 15;\n                    case 15:\n                        if (!((buttonAdvancedSetting === null || buttonAdvancedSetting === void 0 ? void 0 : buttonAdvancedSetting.esp_syncconfirmationboxtype) ===\n                            0 /* esp_buttonadvancedsetting_esp_buttonadvancedsetting_esp_syncconfirmationboxtype.Default */)) return [3 /*break*/, 17];\n                        return [4 /*yield*/, buttonHelper.openSuccessDialogSync()];\n                    case 16:\n                        _k.sent();\n                        _k.label = 17;\n                    case 17:\n                        if (!((buttonAdvancedSetting === null || buttonAdvancedSetting === void 0 ? void 0 : buttonAdvancedSetting.esp_syncconfirmationboxtype) ===\n                            1 /* esp_buttonadvancedsetting_esp_buttonadvancedsetting_esp_syncconfirmationboxtype.Redirect */)) return [3 /*break*/, 19];\n                        _g = (_f = BaseButtonResponseModels_1.RedirectResponse).fromJson;\n                        return [4 /*yield*/, response.text()];\n                    case 18:\n                        redirectResponse = _g.apply(_f, [_k.sent()]);\n                        buttonHelper.openSuccessDialogRedirect(redirectResponse);\n                        _k.label = 19;\n                    case 19:\n                        buttonHelper.reloadGrid();\n                        _k.label = 20;\n                    case 20: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return ButtonRegistrationGrid;\n}());\nexports.ButtonRegistrationGrid = ButtonRegistrationGrid;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvTG93Q29kZUJ1dHRvbkdyaWRCYXNlLnRzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQSw0QkFBNEIsK0RBQStELGlCQUFpQjtBQUM1RztBQUNBLG9DQUFvQyxNQUFNLCtCQUErQixZQUFZO0FBQ3JGLG1DQUFtQyxNQUFNLG1DQUFtQyxZQUFZO0FBQ3hGLGdDQUFnQztBQUNoQztBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsY0FBYyw2QkFBNkIsMEJBQTBCLGNBQWMscUJBQXFCO0FBQ3hHLDZJQUE2SSxjQUFjO0FBQzNKLHVCQUF1QixzQkFBc0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDO0FBQ3hDLG1DQUFtQyxTQUFTO0FBQzVDLG1DQUFtQyxXQUFXLFVBQVU7QUFDeEQsMENBQTBDLGNBQWM7QUFDeEQ7QUFDQSw4R0FBOEcsT0FBTztBQUNySCxpRkFBaUYsaUJBQWlCO0FBQ2xHLHlEQUF5RCxnQkFBZ0IsUUFBUTtBQUNqRiwrQ0FBK0MsZ0JBQWdCLGdCQUFnQjtBQUMvRTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0EsVUFBVSxZQUFZLGFBQWEsU0FBUyxVQUFVO0FBQ3RELG9DQUFvQyxTQUFTO0FBQzdDO0FBQ0E7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsOEJBQThCO0FBQzlCLHdCQUF3QixtQkFBTyxDQUFDLHlFQUE4QjtBQUM5RCx5QkFBeUIsbUJBQU8sQ0FBQyxxRUFBNEI7QUFDN0QsaUNBQWlDLG1CQUFPLENBQUMsbUZBQW1DO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0Q7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0IseUJBQXlCLElBQUk7QUFDN0I7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNEO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCLHlCQUF5QixJQUFJO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLENBQUM7QUFDRCw4QkFBOEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9MQ0IvLi9zcmMvTG93Q29kZUJ1dHRvbkdyaWRCYXNlLnRzP2Y4MjQiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbnZhciBfX2dlbmVyYXRvciA9ICh0aGlzICYmIHRoaXMuX19nZW5lcmF0b3IpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBib2R5KSB7XG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZyA9IE9iamVjdC5jcmVhdGUoKHR5cGVvZiBJdGVyYXRvciA9PT0gXCJmdW5jdGlvblwiID8gSXRlcmF0b3IgOiBPYmplY3QpLnByb3RvdHlwZSk7XG4gICAgcmV0dXJuIGcubmV4dCA9IHZlcmIoMCksIGdbXCJ0aHJvd1wiXSA9IHZlcmIoMSksIGdbXCJyZXR1cm5cIl0gPSB2ZXJiKDIpLCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XG4gICAgICAgIHdoaWxlIChnICYmIChnID0gMCwgb3BbMF0gJiYgKF8gPSAwKSksIF8pIHRyeSB7XG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcbiAgICB9XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5CdXR0b25SZWdpc3RyYXRpb25HcmlkID0gdm9pZCAwO1xudmFyIEJ1dHRvbkV4Y2VwdGlvbl8xID0gcmVxdWlyZShcIi4vRXhjZXB0aW9ucy9CdXR0b25FeGNlcHRpb25cIik7XG52YXIgQnV0dG9uR3JpZEhlbHBlcl8xID0gcmVxdWlyZShcIi4vSGVscGVycy9CdXR0b25HcmlkSGVscGVyXCIpO1xudmFyIEJhc2VCdXR0b25SZXNwb25zZU1vZGVsc18xID0gcmVxdWlyZShcIi4vTW9kZWxzL0Jhc2VCdXR0b25SZXNwb25zZU1vZGVsc1wiKTtcbnZhciBCdXR0b25SZWdpc3RyYXRpb25HcmlkID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEJ1dHRvblJlZ2lzdHJhdGlvbkdyaWQoKSB7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgdGhlIG9uQ2xpY2sgZXZlbnQgZm9yIGdyaWQgYnV0dG9ucy5cbiAgICAgKiBAcGFyYW0gZ3JpZENvbnRyb2wgLSBUaGUgZ3JpZCBjb250cm9sIHJlcHJlc2VudGluZyB0aGUgc2VsZWN0ZWQgcmVjb3Jkcy5cbiAgICAgKiBAcGFyYW0gYnV0dG9uU2V0dGluZ05hbWUgLSBUaGUgbmFtZSBvZiB0aGUgYnV0dG9uIHNldHRpbmcuXG4gICAgICovXG4gICAgQnV0dG9uUmVnaXN0cmF0aW9uR3JpZC5vbkNsaWNrID0gZnVuY3Rpb24gKGdyaWRDb250cm9sLCBidXR0b25TZXR0aW5nTmFtZSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYnV0dG9uSGVscGVyLCBjb25maXJtYXRpb247XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b25IZWxwZXIgPSBuZXcgQnV0dG9uR3JpZEhlbHBlcl8xLkJ1dHRvbkdyaWRIZWxwZXIoZ3JpZENvbnRyb2wpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgYnV0dG9uSGVscGVyLmluaXRpYWxpemVTZXR0aW5ncyhidXR0b25TZXR0aW5nTmFtZSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBidXR0b25IZWxwZXIudmFsaWRhdGVTZWxlY3Rpb24oKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfYS5zZW50KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWJ1dHRvbkhlbHBlci5idXR0b25BZHZhbmNlZFNldHRpbmcuZXNwX3Nob3djb25maXJtYXRpb25kaWFsb2cpIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgYnV0dG9uSGVscGVyLm9wZW5Db25maXJtYXRpb25EaWFsb2dCZWZvcmVSdW4oKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpcm1hdGlvbiA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY29uZmlybWF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSA0O1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISFidXR0b25IZWxwZXIuYnV0dG9uU2V0dGluZy5lc3BfZW5kcG9pbnQpIHJldHVybiBbMyAvKmJyZWFrKi8sIDZdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgQnV0dG9uRXhjZXB0aW9uXzEuRXhjZXB0aW9uTG93Q29kZUJ1dHRvbi5kaXNwbGF5R2VuZXJpY0Vycm9yTm90aWZpY2F0aW9uKFwiRW5kcG9pbnQgTm90IFNldFwiLCBcIlRoZSBlbmRwb2ludCBmb3IgdGhlIGJ1dHRvbiBpcyBub3Qgc2V0LiBQbGVhc2Ugc2V0IGl0IHVwIGluIHRoZSBidXR0b24gc2V0dGluZ3MuXCIpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShidXR0b25IZWxwZXIuYnV0dG9uQWR2YW5jZWRTZXR0aW5nLmVzcF9leGVjdXRpb25tb2RlID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEgLyogZXNwX2J1dHRvbmFkdmFuY2Vkc2V0dGluZ19lc3BfYnV0dG9uYWR2YW5jZWRzZXR0aW5nX2VzcF9leGVjdXRpb25tb2RlLkFzeW5jICovKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgOF07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmV4ZWN1dGVBc3luYyhidXR0b25IZWxwZXIpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgMTBdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDg6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZXhlY3V0ZVN5bmMoYnV0dG9uSGVscGVyKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMTA7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTA6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBFeGVjdXRlcyBhbiBhc3luY2hyb25vdXMgSFRUUCBjYWxsIGZvciBncmlkIGFjdGlvbnMuXG4gICAgICogQHBhcmFtIGJ1dHRvbkhlbHBlciAtIFRoZSBpbml0aWFsaXplZCBCdXR0b25HcmlkSGVscGVyIGluc3RhbmNlLlxuICAgICAqL1xuICAgIEJ1dHRvblJlZ2lzdHJhdGlvbkdyaWQuZXhlY3V0ZUFzeW5jID0gZnVuY3Rpb24gKGJ1dHRvbkhlbHBlcikge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYnV0dG9uU2V0dGluZywgYnV0dG9uQWR2YW5jZWRTZXR0aW5nLCBfYSwgX2IsIF9jO1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2QpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9kLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvblNldHRpbmcgPSBidXR0b25IZWxwZXIuYnV0dG9uU2V0dGluZywgYnV0dG9uQWR2YW5jZWRTZXR0aW5nID0gYnV0dG9uSGVscGVyLmJ1dHRvbkFkdmFuY2VkU2V0dGluZztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRXhlY3V0aW5nIGFzeW5jIGNhbGwgdG8gXCIuY29uY2F0KGJ1dHRvblNldHRpbmcgPT09IG51bGwgfHwgYnV0dG9uU2V0dGluZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogYnV0dG9uU2V0dGluZy5lc3BfZW5kcG9pbnQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChidXR0b25BZHZhbmNlZFNldHRpbmcgPT09IG51bGwgfHwgYnV0dG9uQWR2YW5jZWRTZXR0aW5nID09PSB2b2lkIDAgPyB2b2lkIDAgOiBidXR0b25BZHZhbmNlZFNldHRpbmcuZXNwX2FzeW5jZm9ybW5vdGlmaWNhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgYnV0dG9uSGVscGVyLmFzeW5jR3JpZE5vdGlmaWNhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgX2IgPSAoX2EgPSBidXR0b25IZWxwZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1ha2VSZXF1ZXN0O1xuICAgICAgICAgICAgICAgICAgICAgICAgX2MgPSBbXCJQT1NUXCIsIGJ1dHRvblNldHRpbmcuZXNwX2VuZHBvaW50XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGJ1dHRvbkhlbHBlci5nZXRQYXlsb2FkKCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5hcHBseShfYSwgX2MuY29uY2F0KFtfZC5zZW50KCldKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7IHJldHVybiBfX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIEJ1dHRvbkV4Y2VwdGlvbl8xLkV4Y2VwdGlvbkxvd0NvZGVCdXR0b24uZGlzcGxheUdlbmVyaWNFcnJvck5vdGlmaWNhdGlvbihcIkVycm9yIGR1cmluZyBIVFRQIENhbGxcIiwgZXJyb3IubWVzc2FnZSldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBFeGVjdXRlcyBhIHN5bmNocm9ub3VzIEhUVFAgY2FsbCBmb3IgZ3JpZCBhY3Rpb25zLlxuICAgICAqIEBwYXJhbSBidXR0b25IZWxwZXIgLSBUaGUgaW5pdGlhbGl6ZWQgQnV0dG9uR3JpZEhlbHBlciBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBCdXR0b25SZWdpc3RyYXRpb25HcmlkLmV4ZWN1dGVTeW5jID0gZnVuY3Rpb24gKGJ1dHRvbkhlbHBlcikge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYnV0dG9uU2V0dGluZywgYnV0dG9uQWR2YW5jZWRTZXR0aW5nLCByZXNwb25zZSwgX2EsIF9iLCBfYywgZXJyb3JNZXNzYWdlLCBfZCwgX2UsIGVycm9yVGV4dCwgcmVkaXJlY3RSZXNwb25zZSwgX2YsIF9nO1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBfaCwgX2o7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9rKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfay5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b25TZXR0aW5nID0gYnV0dG9uSGVscGVyLmJ1dHRvblNldHRpbmcsIGJ1dHRvbkFkdmFuY2VkU2V0dGluZyA9IGJ1dHRvbkhlbHBlci5idXR0b25BZHZhbmNlZFNldHRpbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkV4ZWN1dGluZyBzeW5jIGNhbGwgdG8gXCIuY29uY2F0KGJ1dHRvblNldHRpbmcgPT09IG51bGwgfHwgYnV0dG9uU2V0dGluZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogYnV0dG9uU2V0dGluZy5lc3BfZW5kcG9pbnQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGJ1dHRvbkFkdmFuY2VkU2V0dGluZyA9PT0gbnVsbCB8fCBidXR0b25BZHZhbmNlZFNldHRpbmcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGJ1dHRvbkFkdmFuY2VkU2V0dGluZy5lc3Bfc3luY2Zvcm1ub3RpZmljYXRpb24pKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGJ1dHRvbkhlbHBlci5zeW5jR3JpZE5vdGlmaWNhdGlvbigpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2suc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2subGFiZWwgPSAyO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShidXR0b25BZHZhbmNlZFNldHRpbmcgPT09IG51bGwgfHwgYnV0dG9uQWR2YW5jZWRTZXR0aW5nID09PSB2b2lkIDAgPyB2b2lkIDAgOiBidXR0b25BZHZhbmNlZFNldHRpbmcuZXNwX3N5bmNzcGlubmVyKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgNV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISFidXR0b25BZHZhbmNlZFNldHRpbmcuZXNwX3N5bmNzcGlubmVydGV4dCkgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBCdXR0b25FeGNlcHRpb25fMS5FeGNlcHRpb25Mb3dDb2RlQnV0dG9uLmRpc3BsYXlHZW5lcmljRXJyb3JOb3RpZmljYXRpb24oXCJTeW5jIFNwaW5uZXIgVGV4dCBFcnJvclwiLCBcIlRoZSBzeW5jIHNwaW5uZXIgdGV4dCBpcyBlbXB0eSEgUGxlYXNlIGZpbGwgaXQgb24geW91ciBjb25maWd1cmF0aW9uIHNldHRpbmdzLlwiKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9rLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgWHJtLlV0aWxpdHkuc2hvd1Byb2dyZXNzSW5kaWNhdG9yKGJ1dHRvbkFkdmFuY2VkU2V0dGluZy5lc3Bfc3luY3NwaW5uZXJ0ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9rLmxhYmVsID0gNTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICAgICAgX2IgPSAoX2EgPSBidXR0b25IZWxwZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1ha2VSZXF1ZXN0O1xuICAgICAgICAgICAgICAgICAgICAgICAgX2MgPSBbXCJQT1NUXCIsIGJ1dHRvblNldHRpbmcuZXNwX2VuZHBvaW50XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGJ1dHRvbkhlbHBlci5nZXRQYXlsb2FkKCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6IHJldHVybiBbNCAvKnlpZWxkKi8sIF9iLmFwcGx5KF9hLCBfYy5jb25jYXQoW19rLnNlbnQoKV0pKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsgcmV0dXJuIF9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgQnV0dG9uRXhjZXB0aW9uXzEuRXhjZXB0aW9uTG93Q29kZUJ1dHRvbi5kaXNwbGF5R2VuZXJpY0Vycm9yTm90aWZpY2F0aW9uKFwiRXJyb3IgZHVyaW5nIEhUVFAgQ2FsbFwiLCBlcnJvci5tZXNzYWdlKV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChidXR0b25BZHZhbmNlZFNldHRpbmcgPT09IG51bGwgfHwgYnV0dG9uQWR2YW5jZWRTZXR0aW5nID09PSB2b2lkIDAgPyB2b2lkIDAgOiBidXR0b25BZHZhbmNlZFNldHRpbmcuZXNwX3N5bmNzcGlubmVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFhybS5VdGlsaXR5LmNsb3NlUHJvZ3Jlc3NJbmRpY2F0b3IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJ1dHRvbkFkdmFuY2VkU2V0dGluZyA9PT0gbnVsbCB8fCBidXR0b25BZHZhbmNlZFNldHRpbmcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGJ1dHRvbkFkdmFuY2VkU2V0dGluZy5lc3Bfc3luY2Zvcm1ub3RpZmljYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCBidXR0b25IZWxwZXIuY2xlYXJHcmlkTm90aWZpY2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9rLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVzcG9uc2Uuc3RhdHVzID09PSA0MDApKSByZXR1cm4gWzMgLypicmVhayovLCAxMF07XG4gICAgICAgICAgICAgICAgICAgICAgICBfZSA9IChfZCA9IEJhc2VCdXR0b25SZXNwb25zZU1vZGVsc18xLkVycm9yTWVzc2FnZVJlc3BvbnNlKS5mcm9tSnNvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlc3BvbnNlLnRleHQoKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9IF9lLmFwcGx5KF9kLCBbX2suc2VudCgpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBCdXR0b25FeGNlcHRpb25fMS5FeGNlcHRpb25Mb3dDb2RlQnV0dG9uLmRpc3BsYXlHZW5lcmljRXJyb3JOb3RpZmljYXRpb24oZXJyb3JNZXNzYWdlLnRpdGxlLCBlcnJvck1lc3NhZ2UubWVzc2FnZSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICAgICAgICAgICAgICBfay5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTA6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISgoKF9oID0gcmVzcG9uc2Uuc3RhdHVzKSAhPT0gbnVsbCAmJiBfaCAhPT0gdm9pZCAwID8gX2ggOiA1MDApID49IDUwMCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDEzXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlc3BvbnNlLnRleHQoKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTE6XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvclRleHQgPSAoX2ogPSAoX2suc2VudCgpKSkgIT09IG51bGwgJiYgX2ogIT09IHZvaWQgMCA/IF9qIDogXCJBbiBlcnJvciBvY2N1cnJlZCBvbiB0aGUgc2VydmVyLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgQnV0dG9uRXhjZXB0aW9uXzEuRXhjZXB0aW9uTG93Q29kZUJ1dHRvbi5kaXNwbGF5R2VuZXJpY0Vycm9yTm90aWZpY2F0aW9uKFwiRXJyb3IgZHVyaW5nIEhUVFAgQ2FsbFwiLCBcIkVycm9yIGNvZGU6IFwiLmNvbmNhdChyZXNwb25zZS5zdGF0dXMsIFwiXFxuXCIpLmNvbmNhdChlcnJvclRleHQpKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTI6XG4gICAgICAgICAgICAgICAgICAgICAgICBfay5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTM6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDIwXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbkhlbHBlci5jbGVhclN5bmNOb3RpZmljYXRpb25zKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShidXR0b25BZHZhbmNlZFNldHRpbmcgPT09IG51bGwgfHwgYnV0dG9uQWR2YW5jZWRTZXR0aW5nID09PSB2b2lkIDAgPyB2b2lkIDAgOiBidXR0b25BZHZhbmNlZFNldHRpbmcuZXNwX3N5bmNzdWNjZXNzZm9ybW5vdGlmaWNhdGlvbikpIHJldHVybiBbMyAvKmJyZWFrKi8sIDE1XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGJ1dHRvbkhlbHBlci5zaG93U3VjY2Vzc0dyaWROb3RpZmljYXRpb24oKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBfay5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfay5sYWJlbCA9IDE1O1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE1OlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoKGJ1dHRvbkFkdmFuY2VkU2V0dGluZyA9PT0gbnVsbCB8fCBidXR0b25BZHZhbmNlZFNldHRpbmcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGJ1dHRvbkFkdmFuY2VkU2V0dGluZy5lc3Bfc3luY2NvbmZpcm1hdGlvbmJveHR5cGUpID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAgLyogZXNwX2J1dHRvbmFkdmFuY2Vkc2V0dGluZ19lc3BfYnV0dG9uYWR2YW5jZWRzZXR0aW5nX2VzcF9zeW5jY29uZmlybWF0aW9uYm94dHlwZS5EZWZhdWx0ICovKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMTddO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgYnV0dG9uSGVscGVyLm9wZW5TdWNjZXNzRGlhbG9nU3luYygpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxNjpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9rLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9rLmxhYmVsID0gMTc7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISgoYnV0dG9uQWR2YW5jZWRTZXR0aW5nID09PSBudWxsIHx8IGJ1dHRvbkFkdmFuY2VkU2V0dGluZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogYnV0dG9uQWR2YW5jZWRTZXR0aW5nLmVzcF9zeW5jY29uZmlybWF0aW9uYm94dHlwZSkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgMSAvKiBlc3BfYnV0dG9uYWR2YW5jZWRzZXR0aW5nX2VzcF9idXR0b25hZHZhbmNlZHNldHRpbmdfZXNwX3N5bmNjb25maXJtYXRpb25ib3h0eXBlLlJlZGlyZWN0ICovKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMTldO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2cgPSAoX2YgPSBCYXNlQnV0dG9uUmVzcG9uc2VNb2RlbHNfMS5SZWRpcmVjdFJlc3BvbnNlKS5mcm9tSnNvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlc3BvbnNlLnRleHQoKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTg6XG4gICAgICAgICAgICAgICAgICAgICAgICByZWRpcmVjdFJlc3BvbnNlID0gX2cuYXBwbHkoX2YsIFtfay5zZW50KCldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbkhlbHBlci5vcGVuU3VjY2Vzc0RpYWxvZ1JlZGlyZWN0KHJlZGlyZWN0UmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2subGFiZWwgPSAxOTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbkhlbHBlci5yZWxvYWRHcmlkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfay5sYWJlbCA9IDIwO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDIwOiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIEJ1dHRvblJlZ2lzdHJhdGlvbkdyaWQ7XG59KCkpO1xuZXhwb3J0cy5CdXR0b25SZWdpc3RyYXRpb25HcmlkID0gQnV0dG9uUmVnaXN0cmF0aW9uR3JpZDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/LowCodeButtonGridBase.ts\n");

/***/ }),

/***/ "./src/Models/BaseButtonResponseModels.ts":
/*!************************************************!*\
  !*** ./src/Models/BaseButtonResponseModels.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.ErrorMessageResponse = exports.RedirectResponse = void 0;\nvar ButtonException_1 = __webpack_require__(/*! ../Exceptions/ButtonException */ \"./src/Exceptions/ButtonException.ts\");\n/**\n * RedirectResponse encapsulates a redirect URI.\n */\nvar RedirectResponse = /** @class */ (function () {\n    /**\n     * Creates a new instance of RedirectResponse.\n     * @param redirectUri - The URI to which the user should be redirected.\n     */\n    function RedirectResponse(redirectUri) {\n        this.redirectUri = redirectUri;\n    }\n    /**\n     * Parses a JSON string to create a RedirectResponse instance.\n     * Expects the JSON to contain a \"redirectUri\" property of type string.\n     * If the property is missing or invalid, displays a generic error notification\n     * and throws an error.\n     *\n     * @param json - The JSON string to parse.\n     * @returns A new RedirectResponse instance.\n     * @throws Error if the JSON format is invalid or \"redirectUri\" is not a string.\n     */\n    RedirectResponse.fromJson = function (json) {\n        var data = JSON.parse(json);\n        if (typeof data.redirectUri !== \"string\") {\n            ButtonException_1.ExceptionLowCodeButton.displayGenericErrorNotification(\"Redirect URI Not Found\", \"The redirect URI was not found in the response.\");\n            throw new Error(\"Invalid JSON format for RedirectResponse\");\n        }\n        return new RedirectResponse(data.redirectUri);\n    };\n    return RedirectResponse;\n}());\nexports.RedirectResponse = RedirectResponse;\n/**\n * ErrorMessageResponse encapsulates an error message along with an optional title.\n */\nvar ErrorMessageResponse = /** @class */ (function () {\n    /**\n     * Creates a new instance of ErrorMessageResponse.\n     * @param message - The error message.\n     * @param title - An optional title for the error.\n     */\n    function ErrorMessageResponse(message, title) {\n        this.message = message;\n        this.title = title;\n    }\n    /**\n     * Parses a JSON string to create an ErrorMessageResponse instance.\n     * Expects the JSON to contain a \"message\" property of type string.\n     * If the property is missing or invalid, displays a generic error notification\n     * and throws an error.\n     *\n     * @param json - The JSON string to parse.\n     * @returns A new ErrorMessageResponse instance.\n     * @throws Error if the JSON format is invalid or \"message\" is not a string.\n     */\n    ErrorMessageResponse.fromJson = function (json) {\n        var _a;\n        var data = JSON.parse(json);\n        console.log(\"Error message data\", data);\n        if (typeof data.message !== \"string\") {\n            ButtonException_1.ExceptionLowCodeButton.displayGenericErrorNotification(\"Error Message Not Found\", \"The error message was not found in the response.\");\n            throw new Error(\"Invalid JSON format for ErrorMessage\");\n        }\n        return new ErrorMessageResponse(data.message, (_a = data.title) !== null && _a !== void 0 ? _a : \"\");\n    };\n    return ErrorMessageResponse;\n}());\nexports.ErrorMessageResponse = ErrorMessageResponse;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvTW9kZWxzL0Jhc2VCdXR0b25SZXNwb25zZU1vZGVscy50cyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCw0QkFBNEIsR0FBRyx3QkFBd0I7QUFDdkQsd0JBQXdCLG1CQUFPLENBQUMsMEVBQStCO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsNEJBQTRCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vTENCLy4vc3JjL01vZGVscy9CYXNlQnV0dG9uUmVzcG9uc2VNb2RlbHMudHM/YTU3MiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuRXJyb3JNZXNzYWdlUmVzcG9uc2UgPSBleHBvcnRzLlJlZGlyZWN0UmVzcG9uc2UgPSB2b2lkIDA7XG52YXIgQnV0dG9uRXhjZXB0aW9uXzEgPSByZXF1aXJlKFwiLi4vRXhjZXB0aW9ucy9CdXR0b25FeGNlcHRpb25cIik7XG4vKipcbiAqIFJlZGlyZWN0UmVzcG9uc2UgZW5jYXBzdWxhdGVzIGEgcmVkaXJlY3QgVVJJLlxuICovXG52YXIgUmVkaXJlY3RSZXNwb25zZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGluc3RhbmNlIG9mIFJlZGlyZWN0UmVzcG9uc2UuXG4gICAgICogQHBhcmFtIHJlZGlyZWN0VXJpIC0gVGhlIFVSSSB0byB3aGljaCB0aGUgdXNlciBzaG91bGQgYmUgcmVkaXJlY3RlZC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBSZWRpcmVjdFJlc3BvbnNlKHJlZGlyZWN0VXJpKSB7XG4gICAgICAgIHRoaXMucmVkaXJlY3RVcmkgPSByZWRpcmVjdFVyaTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgSlNPTiBzdHJpbmcgdG8gY3JlYXRlIGEgUmVkaXJlY3RSZXNwb25zZSBpbnN0YW5jZS5cbiAgICAgKiBFeHBlY3RzIHRoZSBKU09OIHRvIGNvbnRhaW4gYSBcInJlZGlyZWN0VXJpXCIgcHJvcGVydHkgb2YgdHlwZSBzdHJpbmcuXG4gICAgICogSWYgdGhlIHByb3BlcnR5IGlzIG1pc3Npbmcgb3IgaW52YWxpZCwgZGlzcGxheXMgYSBnZW5lcmljIGVycm9yIG5vdGlmaWNhdGlvblxuICAgICAqIGFuZCB0aHJvd3MgYW4gZXJyb3IuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ganNvbiAtIFRoZSBKU09OIHN0cmluZyB0byBwYXJzZS5cbiAgICAgKiBAcmV0dXJucyBBIG5ldyBSZWRpcmVjdFJlc3BvbnNlIGluc3RhbmNlLlxuICAgICAqIEB0aHJvd3MgRXJyb3IgaWYgdGhlIEpTT04gZm9ybWF0IGlzIGludmFsaWQgb3IgXCJyZWRpcmVjdFVyaVwiIGlzIG5vdCBhIHN0cmluZy5cbiAgICAgKi9cbiAgICBSZWRpcmVjdFJlc3BvbnNlLmZyb21Kc29uID0gZnVuY3Rpb24gKGpzb24pIHtcbiAgICAgICAgdmFyIGRhdGEgPSBKU09OLnBhcnNlKGpzb24pO1xuICAgICAgICBpZiAodHlwZW9mIGRhdGEucmVkaXJlY3RVcmkgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIEJ1dHRvbkV4Y2VwdGlvbl8xLkV4Y2VwdGlvbkxvd0NvZGVCdXR0b24uZGlzcGxheUdlbmVyaWNFcnJvck5vdGlmaWNhdGlvbihcIlJlZGlyZWN0IFVSSSBOb3QgRm91bmRcIiwgXCJUaGUgcmVkaXJlY3QgVVJJIHdhcyBub3QgZm91bmQgaW4gdGhlIHJlc3BvbnNlLlwiKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgSlNPTiBmb3JtYXQgZm9yIFJlZGlyZWN0UmVzcG9uc2VcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBSZWRpcmVjdFJlc3BvbnNlKGRhdGEucmVkaXJlY3RVcmkpO1xuICAgIH07XG4gICAgcmV0dXJuIFJlZGlyZWN0UmVzcG9uc2U7XG59KCkpO1xuZXhwb3J0cy5SZWRpcmVjdFJlc3BvbnNlID0gUmVkaXJlY3RSZXNwb25zZTtcbi8qKlxuICogRXJyb3JNZXNzYWdlUmVzcG9uc2UgZW5jYXBzdWxhdGVzIGFuIGVycm9yIG1lc3NhZ2UgYWxvbmcgd2l0aCBhbiBvcHRpb25hbCB0aXRsZS5cbiAqL1xudmFyIEVycm9yTWVzc2FnZVJlc3BvbnNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgRXJyb3JNZXNzYWdlUmVzcG9uc2UuXG4gICAgICogQHBhcmFtIG1lc3NhZ2UgLSBUaGUgZXJyb3IgbWVzc2FnZS5cbiAgICAgKiBAcGFyYW0gdGl0bGUgLSBBbiBvcHRpb25hbCB0aXRsZSBmb3IgdGhlIGVycm9yLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEVycm9yTWVzc2FnZVJlc3BvbnNlKG1lc3NhZ2UsIHRpdGxlKSB7XG4gICAgICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgSlNPTiBzdHJpbmcgdG8gY3JlYXRlIGFuIEVycm9yTWVzc2FnZVJlc3BvbnNlIGluc3RhbmNlLlxuICAgICAqIEV4cGVjdHMgdGhlIEpTT04gdG8gY29udGFpbiBhIFwibWVzc2FnZVwiIHByb3BlcnR5IG9mIHR5cGUgc3RyaW5nLlxuICAgICAqIElmIHRoZSBwcm9wZXJ0eSBpcyBtaXNzaW5nIG9yIGludmFsaWQsIGRpc3BsYXlzIGEgZ2VuZXJpYyBlcnJvciBub3RpZmljYXRpb25cbiAgICAgKiBhbmQgdGhyb3dzIGFuIGVycm9yLlxuICAgICAqXG4gICAgICogQHBhcmFtIGpzb24gLSBUaGUgSlNPTiBzdHJpbmcgdG8gcGFyc2UuXG4gICAgICogQHJldHVybnMgQSBuZXcgRXJyb3JNZXNzYWdlUmVzcG9uc2UgaW5zdGFuY2UuXG4gICAgICogQHRocm93cyBFcnJvciBpZiB0aGUgSlNPTiBmb3JtYXQgaXMgaW52YWxpZCBvciBcIm1lc3NhZ2VcIiBpcyBub3QgYSBzdHJpbmcuXG4gICAgICovXG4gICAgRXJyb3JNZXNzYWdlUmVzcG9uc2UuZnJvbUpzb24gPSBmdW5jdGlvbiAoanNvbikge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZShqc29uKTtcbiAgICAgICAgY29uc29sZS5sb2coXCJFcnJvciBtZXNzYWdlIGRhdGFcIiwgZGF0YSk7XG4gICAgICAgIGlmICh0eXBlb2YgZGF0YS5tZXNzYWdlICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBCdXR0b25FeGNlcHRpb25fMS5FeGNlcHRpb25Mb3dDb2RlQnV0dG9uLmRpc3BsYXlHZW5lcmljRXJyb3JOb3RpZmljYXRpb24oXCJFcnJvciBNZXNzYWdlIE5vdCBGb3VuZFwiLCBcIlRoZSBlcnJvciBtZXNzYWdlIHdhcyBub3QgZm91bmQgaW4gdGhlIHJlc3BvbnNlLlwiKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgSlNPTiBmb3JtYXQgZm9yIEVycm9yTWVzc2FnZVwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IEVycm9yTWVzc2FnZVJlc3BvbnNlKGRhdGEubWVzc2FnZSwgKF9hID0gZGF0YS50aXRsZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogXCJcIik7XG4gICAgfTtcbiAgICByZXR1cm4gRXJyb3JNZXNzYWdlUmVzcG9uc2U7XG59KCkpO1xuZXhwb3J0cy5FcnJvck1lc3NhZ2VSZXNwb25zZSA9IEVycm9yTWVzc2FnZVJlc3BvbnNlO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/Models/BaseButtonResponseModels.ts\n");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module is referenced by other modules so it can't be inlined
/******/ 	var __webpack_exports__ = __webpack_require__("./src/LowCodeButtonGridBase.ts");
/******/ 	LCB = __webpack_exports__;
/******/ 	
/******/ })()
;