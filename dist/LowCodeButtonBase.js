/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
var LCB;
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/Exceptions/ButtonException.ts":
/*!*******************************************!*\
  !*** ./src/Exceptions/ButtonException.ts ***!
  \*******************************************/
/***/ (function(__unused_webpack_module, exports) {

eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.ExceptionLowCodeButton = void 0;\nvar ExceptionLowCodeButton = /** @class */ (function () {\n    function ExceptionLowCodeButton() {\n    }\n    ExceptionLowCodeButton.buttonSettingNotFound = function (buttonSettingName) {\n        return __awaiter(this, void 0, void 0, function () {\n            var errorStrings;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        errorStrings = {\n                            text: \"Button setting not found: \".concat(buttonSettingName),\n                            title: \"Button Setting Not Found\",\n                        };\n                        return [4 /*yield*/, Xrm.Navigation.openAlertDialog(errorStrings)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    ExceptionLowCodeButton.buttonAdvancedSettingNotFound = function (lcid) {\n        return __awaiter(this, void 0, void 0, function () {\n            var errorStrings;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        errorStrings = {\n                            text: \"Button advanced setting not found for the LCID \".concat(lcid),\n                            title: \"Button Advanced Setting Not Found\",\n                        };\n                        return [4 /*yield*/, Xrm.Navigation.openAlertDialog(errorStrings)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    ExceptionLowCodeButton.showFormNotificationGenericError = function (title, text) {\n        return __awaiter(this, void 0, void 0, function () {\n            var errorStrings;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        errorStrings = {\n                            text: text,\n                            title: title,\n                        };\n                        return [4 /*yield*/, Xrm.Navigation.openAlertDialog(errorStrings)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return ExceptionLowCodeButton;\n}());\nexports.ExceptionLowCodeButton = ExceptionLowCodeButton;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvRXhjZXB0aW9ucy9CdXR0b25FeGNlcHRpb24udHMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBLDRCQUE0QiwrREFBK0QsaUJBQWlCO0FBQzVHO0FBQ0Esb0NBQW9DLE1BQU0sK0JBQStCLFlBQVk7QUFDckYsbUNBQW1DLE1BQU0sbUNBQW1DLFlBQVk7QUFDeEYsZ0NBQWdDO0FBQ2hDO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxjQUFjLDZCQUE2QiwwQkFBMEIsY0FBYyxxQkFBcUI7QUFDeEcsNklBQTZJLGNBQWM7QUFDM0osdUJBQXVCLHNCQUFzQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0M7QUFDeEMsbUNBQW1DLFNBQVM7QUFDNUMsbUNBQW1DLFdBQVcsVUFBVTtBQUN4RCwwQ0FBMEMsY0FBYztBQUN4RDtBQUNBLDhHQUE4RyxPQUFPO0FBQ3JILGlGQUFpRixpQkFBaUI7QUFDbEcseURBQXlELGdCQUFnQixRQUFRO0FBQ2pGLCtDQUErQyxnQkFBZ0IsZ0JBQWdCO0FBQy9FO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQSxVQUFVLFlBQVksYUFBYSxTQUFTLFVBQVU7QUFDdEQsb0NBQW9DLFNBQVM7QUFDN0M7QUFDQTtBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsOEJBQThCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vTENCLy4vc3JjL0V4Y2VwdGlvbnMvQnV0dG9uRXhjZXB0aW9uLnRzP2VkZTUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbnZhciBfX2dlbmVyYXRvciA9ICh0aGlzICYmIHRoaXMuX19nZW5lcmF0b3IpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBib2R5KSB7XG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZyA9IE9iamVjdC5jcmVhdGUoKHR5cGVvZiBJdGVyYXRvciA9PT0gXCJmdW5jdGlvblwiID8gSXRlcmF0b3IgOiBPYmplY3QpLnByb3RvdHlwZSk7XG4gICAgcmV0dXJuIGcubmV4dCA9IHZlcmIoMCksIGdbXCJ0aHJvd1wiXSA9IHZlcmIoMSksIGdbXCJyZXR1cm5cIl0gPSB2ZXJiKDIpLCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XG4gICAgICAgIHdoaWxlIChnICYmIChnID0gMCwgb3BbMF0gJiYgKF8gPSAwKSksIF8pIHRyeSB7XG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcbiAgICB9XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5FeGNlcHRpb25Mb3dDb2RlQnV0dG9uID0gdm9pZCAwO1xudmFyIEV4Y2VwdGlvbkxvd0NvZGVCdXR0b24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRXhjZXB0aW9uTG93Q29kZUJ1dHRvbigpIHtcbiAgICB9XG4gICAgRXhjZXB0aW9uTG93Q29kZUJ1dHRvbi5idXR0b25TZXR0aW5nTm90Rm91bmQgPSBmdW5jdGlvbiAoYnV0dG9uU2V0dGluZ05hbWUpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGVycm9yU3RyaW5ncztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yU3RyaW5ncyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBcIkJ1dHRvbiBzZXR0aW5nIG5vdCBmb3VuZDogXCIuY29uY2F0KGJ1dHRvblNldHRpbmdOYW1lKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJCdXR0b24gU2V0dGluZyBOb3QgRm91bmRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBYcm0uTmF2aWdhdGlvbi5vcGVuQWxlcnREaWFsb2coZXJyb3JTdHJpbmdzKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBFeGNlcHRpb25Mb3dDb2RlQnV0dG9uLmJ1dHRvbkFkdmFuY2VkU2V0dGluZ05vdEZvdW5kID0gZnVuY3Rpb24gKGxjaWQpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGVycm9yU3RyaW5ncztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yU3RyaW5ncyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBcIkJ1dHRvbiBhZHZhbmNlZCBzZXR0aW5nIG5vdCBmb3VuZCBmb3IgdGhlIExDSUQgXCIuY29uY2F0KGxjaWQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIkJ1dHRvbiBBZHZhbmNlZCBTZXR0aW5nIE5vdCBGb3VuZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIFhybS5OYXZpZ2F0aW9uLm9wZW5BbGVydERpYWxvZyhlcnJvclN0cmluZ3MpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEV4Y2VwdGlvbkxvd0NvZGVCdXR0b24uc2hvd0Zvcm1Ob3RpZmljYXRpb25HZW5lcmljRXJyb3IgPSBmdW5jdGlvbiAodGl0bGUsIHRleHQpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGVycm9yU3RyaW5ncztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yU3RyaW5ncyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiB0ZXh0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aXRsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBYcm0uTmF2aWdhdGlvbi5vcGVuQWxlcnREaWFsb2coZXJyb3JTdHJpbmdzKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gRXhjZXB0aW9uTG93Q29kZUJ1dHRvbjtcbn0oKSk7XG5leHBvcnRzLkV4Y2VwdGlvbkxvd0NvZGVCdXR0b24gPSBFeGNlcHRpb25Mb3dDb2RlQnV0dG9uO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/Exceptions/ButtonException.ts\n");

/***/ }),

/***/ "./src/Helpers/BaseHelper.ts":
/*!***********************************!*\
  !*** ./src/Helpers/BaseHelper.ts ***!
  \***********************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.BaseHelper = void 0;\nvar ButtonException_1 = __webpack_require__(/*! ../Exceptions/ButtonException */ \"./src/Exceptions/ButtonException.ts\");\n/**\n * BaseHelper provides core functionality for determining context type and retrieving\n * configuration objects (button setting and advanced setting) using fetch XML queries.\n */\nvar BaseHelper = /** @class */ (function () {\n    function BaseHelper() {\n    }\n    /**\n     * Determines the button location based on the provided context.\n     * - If the context is a FormContext, sets containerType to \"form\" and stores it.\n     * - If the context is a GridControl, sets containerType to \"grid\" or \"subgrid\"\n     *   depending on whether getParent() returns a non-null value.\n     *\n     * @param context - Either a FormContext or a GridControl.\n     */\n    BaseHelper.prototype.getButtonLocation = function (context) {\n        if (context) {\n            if (typeof context.data === \"object\") {\n                this.formContext = context;\n                this.containerType = \"form\";\n            }\n            else if (typeof context.getGrid === \"function\") {\n                this.gridControl = context;\n                if (typeof this.gridControl.getParent === \"function\" && this.gridControl.getParent() !== null) {\n                    this.containerType = \"subgrid\";\n                }\n                else {\n                    this.containerType = \"grid\";\n                }\n            }\n        }\n    };\n    /**\n     * Retrieves the current user's language code from the global context.\n     *\n     * @returns The language code.\n     */\n    BaseHelper.prototype.getLanguageCode = function () {\n        return Xrm.Utility.getGlobalContext().userSettings.languageId;\n    };\n    /**\n     * Retrieves the current user's ID as a lowercase string with curly braces removed.\n     *\n     * @returns The user ID.\n     */\n    BaseHelper.prototype.getUserID = function () {\n        return Xrm.Utility.getGlobalContext().userSettings.userId.replace(\"{\", \"\").replace(\"}\", \"\").toLowerCase();\n    };\n    /**\n     * Makes an HTTP request using fetch with pre-configured headers.\n     *\n     * @param method - The HTTP method (e.g., \"GET\", \"POST\").\n     * @param url - The URL to send the request to.\n     * @param body - Optional request body.\n     * @returns A Promise that resolves to the Response.\n     */\n    BaseHelper.prototype.makeRequest = function (method, url, body) {\n        return __awaiter(this, void 0, void 0, function () {\n            var headers, options;\n            return __generator(this, function (_a) {\n                headers = {\n                    \"Content-Type\": \"application/json\",\n                    \"OData-MaxVersion\": \"4.0\",\n                    \"OData-Version\": \"4.0\",\n                    Accept: \"application/json\",\n                    Prefer: \"odata.include-annotations=*\",\n                };\n                options = {\n                    method: method,\n                    headers: headers,\n                    body: body ? JSON.stringify(body) : undefined,\n                };\n                return [2 /*return*/, fetch(url, options)];\n            });\n        });\n    };\n    /**\n     * Retrieves the button setting record using the provided button setting name.\n     *\n     * @param buttonSettingName - The name of the button setting to retrieve.\n     * @returns A Promise that resolves to the esp_ButtonSetting or null.\n     * @throws An error if the fetch fails.\n     */\n    BaseHelper.prototype.getButtonSetting = function (buttonSettingName) {\n        return __awaiter(this, void 0, void 0, function () {\n            var fetchXml, query, url, response, data, setting, _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        fetchXml = \"\\n      <fetch top=\\\"1\\\">\\n        <entity name=\\\"esp_buttonsetting\\\">\\n          <attribute name=\\\"esp_buttonsettingid\\\" />\\n          <attribute name=\\\"esp_endpoint\\\" />\\n          <attribute name=\\\"esp_includecallinguseridinpayload\\\" />\\n          <attribute name=\\\"esp_includeentitylogicalnameinpayload\\\" />\\n          <attribute name=\\\"esp_includerecordidinpayload\\\" />\\n          <attribute name=\\\"esp_buttonname\\\" />\\n          <attribute name=\\\"esp_savebeforerunning\\\" />\\n          <attribute name=\\\"esp_refreshformwhenapicallends\\\" />\\n          <filter type=\\\"and\\\">\\n            <condition attribute=\\\"esp_buttonname\\\" operator=\\\"eq\\\" value=\\\"\".concat(buttonSettingName, \"\\\" />\\n          </filter>\\n        </entity>\\n      </fetch>\\n    \");\n                        query = \"?fetchXml=\".concat(encodeURIComponent(fetchXml));\n                        url = \"\".concat(Xrm.Utility.getGlobalContext().getClientUrl(), \"/api/data/v9.1/esp_buttonsettings\").concat(query);\n                        _b.label = 1;\n                    case 1:\n                        _b.trys.push([1, 4, , 5]);\n                        return [4 /*yield*/, this.makeRequest(\"GET\", url)];\n                    case 2:\n                        response = _b.sent();\n                        return [4 /*yield*/, response.json()];\n                    case 3:\n                        data = _b.sent();\n                        setting = data.value[0];\n                        this.buttonSetting = setting;\n                        return [2 /*return*/, setting];\n                    case 4:\n                        _a = _b.sent();\n                        ButtonException_1.ExceptionLowCodeButton.buttonSettingNotFound(buttonSettingName);\n                        return [2 /*return*/, null];\n                    case 5: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Retrieves the advanced button setting record using the main button setting ID and language code.\n     *\n     * @param mainButtonSettingId - The ID of the main button setting.\n     * @param lcid - The language code.\n     * @returns A Promise that resolves to the esp_ButtonAdvancedSetting or null.\n     * @throws An error if the fetch fails.\n     */\n    BaseHelper.prototype.getButtonAdvancedSetting = function (mainButtonSettingId, lcid) {\n        return __awaiter(this, void 0, void 0, function () {\n            var fetchXml, query, url, response, data, advancedSetting, _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        fetchXml = \"\\n      <fetch top=\\\"1\\\">\\n        <entity name=\\\"esp_buttonadvancedsetting\\\">\\n          <attribute name=\\\"esp_asyncformnotification\\\" />\\n          <attribute name=\\\"esp_asyncformnotificationtext\\\" />\\n          <attribute name=\\\"esp_buttonadvancedsettingid\\\" />\\n          <attribute name=\\\"esp_confirmationdialogcancellabel\\\" />\\n          <attribute name=\\\"esp_confirmationdialogconfirmlabel\\\" />\\n          <attribute name=\\\"esp_confirmationdialogsubtitle\\\" />\\n          <attribute name=\\\"esp_confirmationdialogtext\\\" />\\n          <attribute name=\\\"esp_confirmationdialogtitle\\\" />\\n          <attribute name=\\\"esp_executionmode\\\" />\\n          <attribute name=\\\"esp_mainbuttonsetting\\\" />\\n          <attribute name=\\\"esp_settingid\\\" />\\n          <attribute name=\\\"esp_settinglanguage\\\" />\\n          <attribute name=\\\"esp_showconfirmationdialog\\\" />\\n          <attribute name=\\\"esp_syncconfirmationbox\\\" />\\n          <attribute name=\\\"esp_syncconfirmationboxconfirmlabel\\\" />\\n          <attribute name=\\\"esp_syncconfirmationboxredirect\\\" />\\n          <attribute name=\\\"esp_syncconfirmationboxredirectcancellabel\\\" />\\n          <attribute name=\\\"esp_syncconfirmationboxredirectconfirmlabel\\\" />\\n          <attribute name=\\\"esp_syncconfirmationboxredirectmode\\\" />\\n          <attribute name=\\\"esp_syncconfirmationboxredirectsubtitle\\\" />\\n          <attribute name=\\\"esp_syncconfirmationboxredirecttext\\\" />\\n          <attribute name=\\\"esp_syncconfirmationboxredirecttitle\\\" />\\n          <attribute name=\\\"esp_syncconfirmationboxtext\\\" />\\n          <attribute name=\\\"esp_syncconfirmationboxtitle\\\" />\\n          <attribute name=\\\"esp_syncformnotification\\\" />\\n          <attribute name=\\\"esp_syncformnotificationtext\\\" />\\n          <attribute name=\\\"esp_syncrefreshform\\\" />\\n          <attribute name=\\\"esp_syncspinner\\\" />\\n          <attribute name=\\\"esp_syncspinnertext\\\" />\\n          <attribute name=\\\"esp_syncsuccessformnotification\\\" />\\n          <attribute name=\\\"esp_syncsuccessformnotificationtext\\\" />\\n          <filter>\\n            <condition attribute=\\\"esp_mainbuttonsetting\\\" operator=\\\"eq\\\" value=\\\"\".concat(mainButtonSettingId, \"\\\" />\\n          </filter>\\n          <link-entity name=\\\"esp_language\\\" from=\\\"esp_languageid\\\" to=\\\"esp_settinglanguage\\\" link-type=\\\"inner\\\">\\n            <filter>\\n              <condition attribute=\\\"esp_lcid\\\" operator=\\\"eq\\\" value=\\\"\").concat(lcid, \"\\\" />\\n            </filter>\\n          </link-entity>\\n        </entity>\\n      </fetch>\\n    \");\n                        query = \"?fetchXml=\".concat(encodeURIComponent(fetchXml));\n                        url = \"\".concat(Xrm.Utility.getGlobalContext().getClientUrl(), \"/api/data/v9.1/esp_buttonadvancedsettings\").concat(query);\n                        _b.label = 1;\n                    case 1:\n                        _b.trys.push([1, 4, , 5]);\n                        return [4 /*yield*/, this.makeRequest(\"GET\", url)];\n                    case 2:\n                        response = _b.sent();\n                        return [4 /*yield*/, response.json()];\n                    case 3:\n                        data = _b.sent();\n                        advancedSetting = data.value[0];\n                        this.buttonAdvancedSetting = advancedSetting;\n                        return [2 /*return*/, advancedSetting];\n                    case 4:\n                        _a = _b.sent();\n                        ButtonException_1.ExceptionLowCodeButton.buttonAdvancedSettingNotFound(lcid);\n                        return [2 /*return*/, null];\n                    case 5: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Initializes settings by retrieving the button setting (using its name) and then the advanced button setting.\n     *\n     * @param buttonSettingName - The name of the button setting to retrieve.\n     */\n    BaseHelper.prototype.initializeSettings = function (buttonSettingName) {\n        return __awaiter(this, void 0, void 0, function () {\n            var setting;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.getButtonSetting(buttonSettingName)];\n                    case 1:\n                        setting = _a.sent();\n                        if (!setting) return [3 /*break*/, 3];\n                        return [4 /*yield*/, this.getButtonAdvancedSetting(setting.esp_buttonsettingid, this.getLanguageCode())];\n                    case 2:\n                        _a.sent();\n                        _a.label = 3;\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return BaseHelper;\n}());\nexports.BaseHelper = BaseHelper;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvSGVscGVycy9CYXNlSGVscGVyLnRzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQSw0QkFBNEIsK0RBQStELGlCQUFpQjtBQUM1RztBQUNBLG9DQUFvQyxNQUFNLCtCQUErQixZQUFZO0FBQ3JGLG1DQUFtQyxNQUFNLG1DQUFtQyxZQUFZO0FBQ3hGLGdDQUFnQztBQUNoQztBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsY0FBYyw2QkFBNkIsMEJBQTBCLGNBQWMscUJBQXFCO0FBQ3hHLDZJQUE2SSxjQUFjO0FBQzNKLHVCQUF1QixzQkFBc0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDO0FBQ3hDLG1DQUFtQyxTQUFTO0FBQzVDLG1DQUFtQyxXQUFXLFVBQVU7QUFDeEQsMENBQTBDLGNBQWM7QUFDeEQ7QUFDQSw4R0FBOEcsT0FBTztBQUNySCxpRkFBaUYsaUJBQWlCO0FBQ2xHLHlEQUF5RCxnQkFBZ0IsUUFBUTtBQUNqRiwrQ0FBK0MsZ0JBQWdCLGdCQUFnQjtBQUMvRTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0EsVUFBVSxZQUFZLGFBQWEsU0FBUyxVQUFVO0FBQ3RELG9DQUFvQyxTQUFTO0FBQzdDO0FBQ0E7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0Qsa0JBQWtCO0FBQ2xCLHdCQUF3QixtQkFBTyxDQUFDLDBFQUErQjtBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRFQUE0RSxpQkFBaUI7QUFDN0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSxDQUFDO0FBQ0Qsa0JBQWtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vTENCLy4vc3JjL0hlbHBlcnMvQmFzZUhlbHBlci50cz8xNzFlIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG52YXIgX19nZW5lcmF0b3IgPSAodGhpcyAmJiB0aGlzLl9fZ2VuZXJhdG9yKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgYm9keSkge1xuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGcgPSBPYmplY3QuY3JlYXRlKCh0eXBlb2YgSXRlcmF0b3IgPT09IFwiZnVuY3Rpb25cIiA/IEl0ZXJhdG9yIDogT2JqZWN0KS5wcm90b3R5cGUpO1xuICAgIHJldHVybiBnLm5leHQgPSB2ZXJiKDApLCBnW1widGhyb3dcIl0gPSB2ZXJiKDEpLCBnW1wicmV0dXJuXCJdID0gdmVyYigyKSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xuICAgICAgICB3aGlsZSAoZyAmJiAoZyA9IDAsIG9wWzBdICYmIChfID0gMCkpLCBfKSB0cnkge1xuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XG4gICAgfVxufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuQmFzZUhlbHBlciA9IHZvaWQgMDtcbnZhciBCdXR0b25FeGNlcHRpb25fMSA9IHJlcXVpcmUoXCIuLi9FeGNlcHRpb25zL0J1dHRvbkV4Y2VwdGlvblwiKTtcbi8qKlxuICogQmFzZUhlbHBlciBwcm92aWRlcyBjb3JlIGZ1bmN0aW9uYWxpdHkgZm9yIGRldGVybWluaW5nIGNvbnRleHQgdHlwZSBhbmQgcmV0cmlldmluZ1xuICogY29uZmlndXJhdGlvbiBvYmplY3RzIChidXR0b24gc2V0dGluZyBhbmQgYWR2YW5jZWQgc2V0dGluZykgdXNpbmcgZmV0Y2ggWE1MIHF1ZXJpZXMuXG4gKi9cbnZhciBCYXNlSGVscGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEJhc2VIZWxwZXIoKSB7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgdGhlIGJ1dHRvbiBsb2NhdGlvbiBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgY29udGV4dC5cbiAgICAgKiAtIElmIHRoZSBjb250ZXh0IGlzIGEgRm9ybUNvbnRleHQsIHNldHMgY29udGFpbmVyVHlwZSB0byBcImZvcm1cIiBhbmQgc3RvcmVzIGl0LlxuICAgICAqIC0gSWYgdGhlIGNvbnRleHQgaXMgYSBHcmlkQ29udHJvbCwgc2V0cyBjb250YWluZXJUeXBlIHRvIFwiZ3JpZFwiIG9yIFwic3ViZ3JpZFwiXG4gICAgICogICBkZXBlbmRpbmcgb24gd2hldGhlciBnZXRQYXJlbnQoKSByZXR1cm5zIGEgbm9uLW51bGwgdmFsdWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29udGV4dCAtIEVpdGhlciBhIEZvcm1Db250ZXh0IG9yIGEgR3JpZENvbnRyb2wuXG4gICAgICovXG4gICAgQmFzZUhlbHBlci5wcm90b3R5cGUuZ2V0QnV0dG9uTG9jYXRpb24gPSBmdW5jdGlvbiAoY29udGV4dCkge1xuICAgICAgICBpZiAoY29udGV4dCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBjb250ZXh0LmRhdGEgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZvcm1Db250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lclR5cGUgPSBcImZvcm1cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBjb250ZXh0LmdldEdyaWQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIHRoaXMuZ3JpZENvbnRyb2wgPSBjb250ZXh0O1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5ncmlkQ29udHJvbC5nZXRQYXJlbnQgPT09IFwiZnVuY3Rpb25cIiAmJiB0aGlzLmdyaWRDb250cm9sLmdldFBhcmVudCgpICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyVHlwZSA9IFwic3ViZ3JpZFwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXJUeXBlID0gXCJncmlkXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIGN1cnJlbnQgdXNlcidzIGxhbmd1YWdlIGNvZGUgZnJvbSB0aGUgZ2xvYmFsIGNvbnRleHQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgbGFuZ3VhZ2UgY29kZS5cbiAgICAgKi9cbiAgICBCYXNlSGVscGVyLnByb3RvdHlwZS5nZXRMYW5ndWFnZUNvZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBYcm0uVXRpbGl0eS5nZXRHbG9iYWxDb250ZXh0KCkudXNlclNldHRpbmdzLmxhbmd1YWdlSWQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIGN1cnJlbnQgdXNlcidzIElEIGFzIGEgbG93ZXJjYXNlIHN0cmluZyB3aXRoIGN1cmx5IGJyYWNlcyByZW1vdmVkLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIHVzZXIgSUQuXG4gICAgICovXG4gICAgQmFzZUhlbHBlci5wcm90b3R5cGUuZ2V0VXNlcklEID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gWHJtLlV0aWxpdHkuZ2V0R2xvYmFsQ29udGV4dCgpLnVzZXJTZXR0aW5ncy51c2VySWQucmVwbGFjZShcIntcIiwgXCJcIikucmVwbGFjZShcIn1cIiwgXCJcIikudG9Mb3dlckNhc2UoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIE1ha2VzIGFuIEhUVFAgcmVxdWVzdCB1c2luZyBmZXRjaCB3aXRoIHByZS1jb25maWd1cmVkIGhlYWRlcnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbWV0aG9kIC0gVGhlIEhUVFAgbWV0aG9kIChlLmcuLCBcIkdFVFwiLCBcIlBPU1RcIikuXG4gICAgICogQHBhcmFtIHVybCAtIFRoZSBVUkwgdG8gc2VuZCB0aGUgcmVxdWVzdCB0by5cbiAgICAgKiBAcGFyYW0gYm9keSAtIE9wdGlvbmFsIHJlcXVlc3QgYm9keS5cbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB0byB0aGUgUmVzcG9uc2UuXG4gICAgICovXG4gICAgQmFzZUhlbHBlci5wcm90b3R5cGUubWFrZVJlcXVlc3QgPSBmdW5jdGlvbiAobWV0aG9kLCB1cmwsIGJvZHkpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGhlYWRlcnMsIG9wdGlvbnM7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVycyA9IHtcbiAgICAgICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiT0RhdGEtTWF4VmVyc2lvblwiOiBcIjQuMFwiLFxuICAgICAgICAgICAgICAgICAgICBcIk9EYXRhLVZlcnNpb25cIjogXCI0LjBcIixcbiAgICAgICAgICAgICAgICAgICAgQWNjZXB0OiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgICAgICAgICAgUHJlZmVyOiBcIm9kYXRhLmluY2x1ZGUtYW5ub3RhdGlvbnM9KlwiLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBtZXRob2QsXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgICAgIGJvZHk6IGJvZHkgPyBKU09OLnN0cmluZ2lmeShib2R5KSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBmZXRjaCh1cmwsIG9wdGlvbnMpXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyB0aGUgYnV0dG9uIHNldHRpbmcgcmVjb3JkIHVzaW5nIHRoZSBwcm92aWRlZCBidXR0b24gc2V0dGluZyBuYW1lLlxuICAgICAqXG4gICAgICogQHBhcmFtIGJ1dHRvblNldHRpbmdOYW1lIC0gVGhlIG5hbWUgb2YgdGhlIGJ1dHRvbiBzZXR0aW5nIHRvIHJldHJpZXZlLlxuICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHRoZSBlc3BfQnV0dG9uU2V0dGluZyBvciBudWxsLlxuICAgICAqIEB0aHJvd3MgQW4gZXJyb3IgaWYgdGhlIGZldGNoIGZhaWxzLlxuICAgICAqL1xuICAgIEJhc2VIZWxwZXIucHJvdG90eXBlLmdldEJ1dHRvblNldHRpbmcgPSBmdW5jdGlvbiAoYnV0dG9uU2V0dGluZ05hbWUpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGZldGNoWG1sLCBxdWVyeSwgdXJsLCByZXNwb25zZSwgZGF0YSwgc2V0dGluZywgX2E7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBmZXRjaFhtbCA9IFwiXFxuICAgICAgPGZldGNoIHRvcD1cXFwiMVxcXCI+XFxuICAgICAgICA8ZW50aXR5IG5hbWU9XFxcImVzcF9idXR0b25zZXR0aW5nXFxcIj5cXG4gICAgICAgICAgPGF0dHJpYnV0ZSBuYW1lPVxcXCJlc3BfYnV0dG9uc2V0dGluZ2lkXFxcIiAvPlxcbiAgICAgICAgICA8YXR0cmlidXRlIG5hbWU9XFxcImVzcF9lbmRwb2ludFxcXCIgLz5cXG4gICAgICAgICAgPGF0dHJpYnV0ZSBuYW1lPVxcXCJlc3BfaW5jbHVkZWNhbGxpbmd1c2VyaWRpbnBheWxvYWRcXFwiIC8+XFxuICAgICAgICAgIDxhdHRyaWJ1dGUgbmFtZT1cXFwiZXNwX2luY2x1ZGVlbnRpdHlsb2dpY2FsbmFtZWlucGF5bG9hZFxcXCIgLz5cXG4gICAgICAgICAgPGF0dHJpYnV0ZSBuYW1lPVxcXCJlc3BfaW5jbHVkZXJlY29yZGlkaW5wYXlsb2FkXFxcIiAvPlxcbiAgICAgICAgICA8YXR0cmlidXRlIG5hbWU9XFxcImVzcF9idXR0b25uYW1lXFxcIiAvPlxcbiAgICAgICAgICA8YXR0cmlidXRlIG5hbWU9XFxcImVzcF9zYXZlYmVmb3JlcnVubmluZ1xcXCIgLz5cXG4gICAgICAgICAgPGF0dHJpYnV0ZSBuYW1lPVxcXCJlc3BfcmVmcmVzaGZvcm13aGVuYXBpY2FsbGVuZHNcXFwiIC8+XFxuICAgICAgICAgIDxmaWx0ZXIgdHlwZT1cXFwiYW5kXFxcIj5cXG4gICAgICAgICAgICA8Y29uZGl0aW9uIGF0dHJpYnV0ZT1cXFwiZXNwX2J1dHRvbm5hbWVcXFwiIG9wZXJhdG9yPVxcXCJlcVxcXCIgdmFsdWU9XFxcIlwiLmNvbmNhdChidXR0b25TZXR0aW5nTmFtZSwgXCJcXFwiIC8+XFxuICAgICAgICAgIDwvZmlsdGVyPlxcbiAgICAgICAgPC9lbnRpdHk+XFxuICAgICAgPC9mZXRjaD5cXG4gICAgXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnkgPSBcIj9mZXRjaFhtbD1cIi5jb25jYXQoZW5jb2RlVVJJQ29tcG9uZW50KGZldGNoWG1sKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cmwgPSBcIlwiLmNvbmNhdChYcm0uVXRpbGl0eS5nZXRHbG9iYWxDb250ZXh0KCkuZ2V0Q2xpZW50VXJsKCksIFwiL2FwaS9kYXRhL3Y5LjEvZXNwX2J1dHRvbnNldHRpbmdzXCIpLmNvbmNhdChxdWVyeSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDE7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLnRyeXMucHVzaChbMSwgNCwgLCA1XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLm1ha2VSZXF1ZXN0KFwiR0VUXCIsIHVybCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9iLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlc3BvbnNlLmpzb24oKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nID0gZGF0YS52YWx1ZVswXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnV0dG9uU2V0dGluZyA9IHNldHRpbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgc2V0dGluZ107XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hID0gX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgQnV0dG9uRXhjZXB0aW9uXzEuRXhjZXB0aW9uTG93Q29kZUJ1dHRvbi5idXR0b25TZXR0aW5nTm90Rm91bmQoYnV0dG9uU2V0dGluZ05hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIG51bGxdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIGFkdmFuY2VkIGJ1dHRvbiBzZXR0aW5nIHJlY29yZCB1c2luZyB0aGUgbWFpbiBidXR0b24gc2V0dGluZyBJRCBhbmQgbGFuZ3VhZ2UgY29kZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBtYWluQnV0dG9uU2V0dGluZ0lkIC0gVGhlIElEIG9mIHRoZSBtYWluIGJ1dHRvbiBzZXR0aW5nLlxuICAgICAqIEBwYXJhbSBsY2lkIC0gVGhlIGxhbmd1YWdlIGNvZGUuXG4gICAgICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIGVzcF9CdXR0b25BZHZhbmNlZFNldHRpbmcgb3IgbnVsbC5cbiAgICAgKiBAdGhyb3dzIEFuIGVycm9yIGlmIHRoZSBmZXRjaCBmYWlscy5cbiAgICAgKi9cbiAgICBCYXNlSGVscGVyLnByb3RvdHlwZS5nZXRCdXR0b25BZHZhbmNlZFNldHRpbmcgPSBmdW5jdGlvbiAobWFpbkJ1dHRvblNldHRpbmdJZCwgbGNpZCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZmV0Y2hYbWwsIHF1ZXJ5LCB1cmwsIHJlc3BvbnNlLCBkYXRhLCBhZHZhbmNlZFNldHRpbmcsIF9hO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2hYbWwgPSBcIlxcbiAgICAgIDxmZXRjaCB0b3A9XFxcIjFcXFwiPlxcbiAgICAgICAgPGVudGl0eSBuYW1lPVxcXCJlc3BfYnV0dG9uYWR2YW5jZWRzZXR0aW5nXFxcIj5cXG4gICAgICAgICAgPGF0dHJpYnV0ZSBuYW1lPVxcXCJlc3BfYXN5bmNmb3Jtbm90aWZpY2F0aW9uXFxcIiAvPlxcbiAgICAgICAgICA8YXR0cmlidXRlIG5hbWU9XFxcImVzcF9hc3luY2Zvcm1ub3RpZmljYXRpb250ZXh0XFxcIiAvPlxcbiAgICAgICAgICA8YXR0cmlidXRlIG5hbWU9XFxcImVzcF9idXR0b25hZHZhbmNlZHNldHRpbmdpZFxcXCIgLz5cXG4gICAgICAgICAgPGF0dHJpYnV0ZSBuYW1lPVxcXCJlc3BfY29uZmlybWF0aW9uZGlhbG9nY2FuY2VsbGFiZWxcXFwiIC8+XFxuICAgICAgICAgIDxhdHRyaWJ1dGUgbmFtZT1cXFwiZXNwX2NvbmZpcm1hdGlvbmRpYWxvZ2NvbmZpcm1sYWJlbFxcXCIgLz5cXG4gICAgICAgICAgPGF0dHJpYnV0ZSBuYW1lPVxcXCJlc3BfY29uZmlybWF0aW9uZGlhbG9nc3VidGl0bGVcXFwiIC8+XFxuICAgICAgICAgIDxhdHRyaWJ1dGUgbmFtZT1cXFwiZXNwX2NvbmZpcm1hdGlvbmRpYWxvZ3RleHRcXFwiIC8+XFxuICAgICAgICAgIDxhdHRyaWJ1dGUgbmFtZT1cXFwiZXNwX2NvbmZpcm1hdGlvbmRpYWxvZ3RpdGxlXFxcIiAvPlxcbiAgICAgICAgICA8YXR0cmlidXRlIG5hbWU9XFxcImVzcF9leGVjdXRpb25tb2RlXFxcIiAvPlxcbiAgICAgICAgICA8YXR0cmlidXRlIG5hbWU9XFxcImVzcF9tYWluYnV0dG9uc2V0dGluZ1xcXCIgLz5cXG4gICAgICAgICAgPGF0dHJpYnV0ZSBuYW1lPVxcXCJlc3Bfc2V0dGluZ2lkXFxcIiAvPlxcbiAgICAgICAgICA8YXR0cmlidXRlIG5hbWU9XFxcImVzcF9zZXR0aW5nbGFuZ3VhZ2VcXFwiIC8+XFxuICAgICAgICAgIDxhdHRyaWJ1dGUgbmFtZT1cXFwiZXNwX3Nob3djb25maXJtYXRpb25kaWFsb2dcXFwiIC8+XFxuICAgICAgICAgIDxhdHRyaWJ1dGUgbmFtZT1cXFwiZXNwX3N5bmNjb25maXJtYXRpb25ib3hcXFwiIC8+XFxuICAgICAgICAgIDxhdHRyaWJ1dGUgbmFtZT1cXFwiZXNwX3N5bmNjb25maXJtYXRpb25ib3hjb25maXJtbGFiZWxcXFwiIC8+XFxuICAgICAgICAgIDxhdHRyaWJ1dGUgbmFtZT1cXFwiZXNwX3N5bmNjb25maXJtYXRpb25ib3hyZWRpcmVjdFxcXCIgLz5cXG4gICAgICAgICAgPGF0dHJpYnV0ZSBuYW1lPVxcXCJlc3Bfc3luY2NvbmZpcm1hdGlvbmJveHJlZGlyZWN0Y2FuY2VsbGFiZWxcXFwiIC8+XFxuICAgICAgICAgIDxhdHRyaWJ1dGUgbmFtZT1cXFwiZXNwX3N5bmNjb25maXJtYXRpb25ib3hyZWRpcmVjdGNvbmZpcm1sYWJlbFxcXCIgLz5cXG4gICAgICAgICAgPGF0dHJpYnV0ZSBuYW1lPVxcXCJlc3Bfc3luY2NvbmZpcm1hdGlvbmJveHJlZGlyZWN0bW9kZVxcXCIgLz5cXG4gICAgICAgICAgPGF0dHJpYnV0ZSBuYW1lPVxcXCJlc3Bfc3luY2NvbmZpcm1hdGlvbmJveHJlZGlyZWN0c3VidGl0bGVcXFwiIC8+XFxuICAgICAgICAgIDxhdHRyaWJ1dGUgbmFtZT1cXFwiZXNwX3N5bmNjb25maXJtYXRpb25ib3hyZWRpcmVjdHRleHRcXFwiIC8+XFxuICAgICAgICAgIDxhdHRyaWJ1dGUgbmFtZT1cXFwiZXNwX3N5bmNjb25maXJtYXRpb25ib3hyZWRpcmVjdHRpdGxlXFxcIiAvPlxcbiAgICAgICAgICA8YXR0cmlidXRlIG5hbWU9XFxcImVzcF9zeW5jY29uZmlybWF0aW9uYm94dGV4dFxcXCIgLz5cXG4gICAgICAgICAgPGF0dHJpYnV0ZSBuYW1lPVxcXCJlc3Bfc3luY2NvbmZpcm1hdGlvbmJveHRpdGxlXFxcIiAvPlxcbiAgICAgICAgICA8YXR0cmlidXRlIG5hbWU9XFxcImVzcF9zeW5jZm9ybW5vdGlmaWNhdGlvblxcXCIgLz5cXG4gICAgICAgICAgPGF0dHJpYnV0ZSBuYW1lPVxcXCJlc3Bfc3luY2Zvcm1ub3RpZmljYXRpb250ZXh0XFxcIiAvPlxcbiAgICAgICAgICA8YXR0cmlidXRlIG5hbWU9XFxcImVzcF9zeW5jcmVmcmVzaGZvcm1cXFwiIC8+XFxuICAgICAgICAgIDxhdHRyaWJ1dGUgbmFtZT1cXFwiZXNwX3N5bmNzcGlubmVyXFxcIiAvPlxcbiAgICAgICAgICA8YXR0cmlidXRlIG5hbWU9XFxcImVzcF9zeW5jc3Bpbm5lcnRleHRcXFwiIC8+XFxuICAgICAgICAgIDxhdHRyaWJ1dGUgbmFtZT1cXFwiZXNwX3N5bmNzdWNjZXNzZm9ybW5vdGlmaWNhdGlvblxcXCIgLz5cXG4gICAgICAgICAgPGF0dHJpYnV0ZSBuYW1lPVxcXCJlc3Bfc3luY3N1Y2Nlc3Nmb3Jtbm90aWZpY2F0aW9udGV4dFxcXCIgLz5cXG4gICAgICAgICAgPGZpbHRlcj5cXG4gICAgICAgICAgICA8Y29uZGl0aW9uIGF0dHJpYnV0ZT1cXFwiZXNwX21haW5idXR0b25zZXR0aW5nXFxcIiBvcGVyYXRvcj1cXFwiZXFcXFwiIHZhbHVlPVxcXCJcIi5jb25jYXQobWFpbkJ1dHRvblNldHRpbmdJZCwgXCJcXFwiIC8+XFxuICAgICAgICAgIDwvZmlsdGVyPlxcbiAgICAgICAgICA8bGluay1lbnRpdHkgbmFtZT1cXFwiZXNwX2xhbmd1YWdlXFxcIiBmcm9tPVxcXCJlc3BfbGFuZ3VhZ2VpZFxcXCIgdG89XFxcImVzcF9zZXR0aW5nbGFuZ3VhZ2VcXFwiIGxpbmstdHlwZT1cXFwiaW5uZXJcXFwiPlxcbiAgICAgICAgICAgIDxmaWx0ZXI+XFxuICAgICAgICAgICAgICA8Y29uZGl0aW9uIGF0dHJpYnV0ZT1cXFwiZXNwX2xjaWRcXFwiIG9wZXJhdG9yPVxcXCJlcVxcXCIgdmFsdWU9XFxcIlwiKS5jb25jYXQobGNpZCwgXCJcXFwiIC8+XFxuICAgICAgICAgICAgPC9maWx0ZXI+XFxuICAgICAgICAgIDwvbGluay1lbnRpdHk+XFxuICAgICAgICA8L2VudGl0eT5cXG4gICAgICA8L2ZldGNoPlxcbiAgICBcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVyeSA9IFwiP2ZldGNoWG1sPVwiLmNvbmNhdChlbmNvZGVVUklDb21wb25lbnQoZmV0Y2hYbWwpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybCA9IFwiXCIuY29uY2F0KFhybS5VdGlsaXR5LmdldEdsb2JhbENvbnRleHQoKS5nZXRDbGllbnRVcmwoKSwgXCIvYXBpL2RhdGEvdjkuMS9lc3BfYnV0dG9uYWR2YW5jZWRzZXR0aW5nc1wiKS5jb25jYXQocXVlcnkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2IubGFiZWwgPSAxO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYi50cnlzLnB1c2goWzEsIDQsICwgNV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5tYWtlUmVxdWVzdChcIkdFVFwiLCB1cmwpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZXNwb25zZS5qc29uKCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYWR2YW5jZWRTZXR0aW5nID0gZGF0YS52YWx1ZVswXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnV0dG9uQWR2YW5jZWRTZXR0aW5nID0gYWR2YW5jZWRTZXR0aW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGFkdmFuY2VkU2V0dGluZ107XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hID0gX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgQnV0dG9uRXhjZXB0aW9uXzEuRXhjZXB0aW9uTG93Q29kZUJ1dHRvbi5idXR0b25BZHZhbmNlZFNldHRpbmdOb3RGb3VuZChsY2lkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBudWxsXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZXMgc2V0dGluZ3MgYnkgcmV0cmlldmluZyB0aGUgYnV0dG9uIHNldHRpbmcgKHVzaW5nIGl0cyBuYW1lKSBhbmQgdGhlbiB0aGUgYWR2YW5jZWQgYnV0dG9uIHNldHRpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYnV0dG9uU2V0dGluZ05hbWUgLSBUaGUgbmFtZSBvZiB0aGUgYnV0dG9uIHNldHRpbmcgdG8gcmV0cmlldmUuXG4gICAgICovXG4gICAgQmFzZUhlbHBlci5wcm90b3R5cGUuaW5pdGlhbGl6ZVNldHRpbmdzID0gZnVuY3Rpb24gKGJ1dHRvblNldHRpbmdOYW1lKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzZXR0aW5nO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmdldEJ1dHRvblNldHRpbmcoYnV0dG9uU2V0dGluZ05hbWUpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZyA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc2V0dGluZykgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmdldEJ1dHRvbkFkdmFuY2VkU2V0dGluZyhzZXR0aW5nLmVzcF9idXR0b25zZXR0aW5naWQsIHRoaXMuZ2V0TGFuZ3VhZ2VDb2RlKCkpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAzO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gQmFzZUhlbHBlcjtcbn0oKSk7XG5leHBvcnRzLkJhc2VIZWxwZXIgPSBCYXNlSGVscGVyO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/Helpers/BaseHelper.ts\n");

/***/ }),

/***/ "./src/Helpers/ButtonFormHelper.ts":
/*!*****************************************!*\
  !*** ./src/Helpers/ButtonFormHelper.ts ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.ButtonFormHelper = void 0;\nvar ButtonException_1 = __webpack_require__(/*! ../Exceptions/ButtonException */ \"./src/Exceptions/ButtonException.ts\");\nvar BaseHelper_1 = __webpack_require__(/*! ./BaseHelper */ \"./src/Helpers/BaseHelper.ts\"); // Adjust path as needed\n/**\n * ButtonFormHelper extends BaseHelper to provide form-specific functionality.\n * It accepts only a Xrm.FormContext as the context.\n */\nvar ButtonFormHelper = /** @class */ (function (_super) {\n    __extends(ButtonFormHelper, _super);\n    /**\n     * Constructs a new ButtonFormHelper instance with the provided FormContext.\n     *\n     * @param formContext - The Xrm.FormContext representing the current form.\n     */\n    function ButtonFormHelper(formContext) {\n        var _this = _super.call(this) || this;\n        // Set the context and container type using the BaseHelper's method.\n        _this.getButtonLocation(formContext);\n        return _this;\n    }\n    /**\n     * Static factory method to create and initialize a ButtonFormHelper instance.\n     *\n     * @param formContext - The Xrm.FormContext representing the current form.\n     * @param buttonSettingName - The name of the button setting to retrieve.\n     * @returns A Promise that resolves to an initialized ButtonFormHelper instance.\n     */\n    ButtonFormHelper.create = function (formContext, buttonSettingName) {\n        return __awaiter(this, void 0, void 0, function () {\n            var helper;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        helper = new ButtonFormHelper(formContext);\n                        return [4 /*yield*/, helper.initializeSettings(buttonSettingName)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/, helper];\n                }\n            });\n        });\n    };\n    /**\n     * Retrieves the entity logical name from the current form context.\n     *\n     * @returns The entity logical name.\n     * @throws Error if the form context is not set.\n     */\n    ButtonFormHelper.prototype.getEntityLogicalName = function () {\n        if (!this.formContext) {\n            throw new Error(\"Form context is not set.\");\n        }\n        return this.formContext.data.entity.getEntityName();\n    };\n    /**\n     * Retrieves the record ID from the current form context.\n     *\n     * @returns The record ID as a lowercase string without curly braces.\n     * @throws Error if the form context is not set.\n     */\n    ButtonFormHelper.prototype.getRecordId = function () {\n        if (!this.formContext) {\n            throw new Error(\"Form context is not set.\");\n        }\n        return this.formContext.data.entity.getId().replace(\"{\", \"\").replace(\"}\", \"\").toLowerCase();\n    };\n    /**\n     * Builds a payload based on the button setting configuration and form context.\n     *\n     * The payload may include the entity logical name, record ID, and user ID,\n     * according to the configuration flags in the button setting.\n     *\n     * @returns An object containing the payload data.\n     * @throws Error if the form context or button setting is not set.\n     */\n    ButtonFormHelper.prototype.getPayload = function () {\n        if (!this.formContext || !this.buttonSetting) {\n            throw new Error(\"Form context or button setting is not set.\");\n        }\n        var payload = {};\n        if (this.buttonSetting.esp_includeentitylogicalnameinpayload) {\n            payload = __assign(__assign({}, payload), { entityLogicalName: this.getEntityLogicalName() });\n        }\n        if (this.buttonSetting.esp_includerecordidinpayload) {\n            payload = __assign(__assign({}, payload), { recordId: this.getRecordId() });\n        }\n        if (this.buttonSetting.esp_includecallinguseridinpayload) {\n            payload = __assign(__assign({}, payload), { userId: this.getUserID() });\n        }\n        return payload;\n    };\n    /**\n     * Opens a confirmation dialog before executing the button action.\n     *\n     * @returns A Promise that resolves to true if the user confirms the dialog, false otherwise.\n     */\n    ButtonFormHelper.prototype.openConfirmationDialogBeforeRun = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var confirmStrings, result;\n            var _a, _b, _c, _d;\n            return __generator(this, function (_e) {\n                switch (_e.label) {\n                    case 0:\n                        if (!(!this.buttonAdvancedSetting || this.buttonAdvancedSetting.esp_confirmationdialogtext == null)) return [3 /*break*/, 2];\n                        return [4 /*yield*/, ButtonException_1.ExceptionLowCodeButton.showFormNotificationGenericError(\"Confirmation Dialog Text Error\", \"The confirmation dialog text is empty! Please fill it on your configuration settings.\")];\n                    case 1:\n                        _e.sent();\n                        return [2 /*return*/, false];\n                    case 2:\n                        confirmStrings = {\n                            cancelButtonLabel: (_a = this.buttonAdvancedSetting.esp_confirmationdialogcancellabel) !== null && _a !== void 0 ? _a : \"\",\n                            confirmButtonLabel: (_b = this.buttonAdvancedSetting.esp_confirmationdialogconfirmlabel) !== null && _b !== void 0 ? _b : \"\",\n                            subtitle: (_c = this.buttonAdvancedSetting.esp_confirmationdialogsubtitle) !== null && _c !== void 0 ? _c : \"\",\n                            text: (_d = this.buttonAdvancedSetting.esp_confirmationdialogtext) !== null && _d !== void 0 ? _d : \"\",\n                            title: this.buttonAdvancedSetting.esp_confirmationdialogtitle,\n                        };\n                        return [4 /*yield*/, Xrm.Navigation.openConfirmDialog(confirmStrings)];\n                    case 3:\n                        result = _e.sent();\n                        return [2 /*return*/, result.confirmed];\n                }\n            });\n        });\n    };\n    /**\n     * Opens a synchronous success dialog and awaits the user's confirmation.\n     *\n     * @returns A Promise that resolves to true if the success dialog is confirmed, or false otherwise.\n     */\n    ButtonFormHelper.prototype.openSuccessDialogSync = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var confirmStrings, result;\n            var _a, _b;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        if (!(!this.buttonAdvancedSetting || this.buttonAdvancedSetting.esp_syncconfirmationboxtext == null)) return [3 /*break*/, 2];\n                        return [4 /*yield*/, ButtonException_1.ExceptionLowCodeButton.showFormNotificationGenericError(\"Sync Confirmation Box Text Error\", \"The sync confirmation box text is empty! Please fill it on your configuration settings.\")];\n                    case 1:\n                        _c.sent();\n                        return [2 /*return*/, false];\n                    case 2:\n                        confirmStrings = {\n                            confirmButtonLabel: (_a = this.buttonAdvancedSetting.esp_syncconfirmationboxconfirmlabel) !== null && _a !== void 0 ? _a : undefined,\n                            text: (_b = this.buttonAdvancedSetting.esp_syncconfirmationboxtext) !== null && _b !== void 0 ? _b : undefined,\n                            title: this.buttonAdvancedSetting.esp_syncconfirmationboxtitle,\n                        };\n                        return [4 /*yield*/, Xrm.Navigation.openAlertDialog(confirmStrings)];\n                    case 3:\n                        result = _c.sent();\n                        return [2 /*return*/, result.confirmed];\n                }\n            });\n        });\n    };\n    /**\n     * Opens a success dialog that may redirect the user based on their confirmation.\n     * If the user confirms, the browser is redirected; otherwise, the form is reloaded.\n     *\n     * @param response - An object containing the redirect URI.\n     */\n    ButtonFormHelper.prototype.openSuccessDialogRedirect = function (response) {\n        var _this = this;\n        var _a, _b, _c, _d;\n        if (!this.buttonAdvancedSetting) {\n            throw new Error(\"Button advanced setting is not set.\");\n        }\n        if (this.buttonAdvancedSetting.esp_syncconfirmationboxredirecttext == null) {\n            ButtonException_1.ExceptionLowCodeButton.showFormNotificationGenericError(\"Sync Confirmation Box Redirect Text Error\", \"The sync confirmation box redirect text is empty! Please fill it on your configuration settings.\");\n            return;\n        }\n        var confirmStrings = {\n            cancelButtonLabel: (_a = this.buttonAdvancedSetting.esp_syncconfirmationboxredirectcancellabel) !== null && _a !== void 0 ? _a : undefined,\n            confirmButtonLabel: (_b = this.buttonAdvancedSetting.esp_syncconfirmationboxredirectconfirmlabel) !== null && _b !== void 0 ? _b : undefined,\n            text: this.buttonAdvancedSetting.esp_syncconfirmationboxredirecttext,\n            subtitle: (_c = this.buttonAdvancedSetting.esp_syncconfirmationboxredirectsubtitle) !== null && _c !== void 0 ? _c : undefined,\n            title: (_d = this.buttonAdvancedSetting.esp_syncconfirmationboxredirecttitle) !== null && _d !== void 0 ? _d : undefined,\n        };\n        Xrm.Navigation.openConfirmDialog(confirmStrings).then(function (result) {\n            if (result.confirmed) {\n                console.log(\"User confirmed the dialog, redirecting...\");\n                if (_this.buttonAdvancedSetting.esp_syncconfirmationboxredirectmode ===\n                    1 /* esp_buttonadvancedsetting_esp_buttonadvancedsetting_esp_syncconfirmationboxredirectmode.CurrentTab */) {\n                    window.open(response.redirectUri, \"_self\").focus();\n                }\n                else {\n                    window.open(response.redirectUri, \"_blank\").focus();\n                }\n            }\n            else {\n                console.log(\"User cancelled the dialog, refreshing the form.\");\n                _this.reloadForm();\n            }\n        });\n    };\n    /**\n     * Reloads the current form.\n     *\n     * @throws Error if the form context, button setting, or advanced setting is not set.\n     */\n    ButtonFormHelper.prototype.reloadForm = function () {\n        if (!this.formContext || !this.buttonSetting || !this.buttonAdvancedSetting) {\n            throw new Error(\"Required properties are not set for reloading the form.\");\n        }\n        if (this.buttonSetting.esp_refreshformwhenapicallends &&\n            !(this.buttonAdvancedSetting.esp_syncconfirmationboxredirect &&\n                this.buttonAdvancedSetting.esp_syncconfirmationboxredirectmode ===\n                    1 /* esp_buttonadvancedsetting_esp_buttonadvancedsetting_esp_syncconfirmationboxredirectmode.CurrentTab */)) {\n            this.formContext.data.refresh(false);\n        }\n    };\n    /**\n     * Displays an asynchronous form notification for 5 seconds.\n     *\n     * @returns A Promise that resolves when the notification is cleared.\n     */\n    ButtonFormHelper.prototype.asyncFormNotification = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!(!this.formContext ||\n                            !this.buttonAdvancedSetting ||\n                            this.buttonAdvancedSetting.esp_asyncformnotificationtext == null)) return [3 /*break*/, 2];\n                        return [4 /*yield*/, ButtonException_1.ExceptionLowCodeButton.showFormNotificationGenericError(\"Async Form Notification Text Error\", \"The async form notification text is empty! Please fill it on your configuration settings.\")];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                    case 2:\n                        this.formContext.ui.setFormNotification(this.buttonAdvancedSetting.esp_asyncformnotificationtext, \"INFO\", \"LowCodeButtonFormNotification\");\n                        setTimeout(function () {\n                            _this.formContext.ui.clearFormNotification(\"LowCodeButtonFormNotification\");\n                        }, 5000);\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Clears the form notification from the current form.\n     *\n     * @throws Error if the form context is not set.\n     */\n    ButtonFormHelper.prototype.clearFormNotification = function () {\n        if (!this.formContext) {\n            throw new Error(\"Form context is not set.\");\n        }\n        this.formContext.ui.clearFormNotification(\"LowCodeButtonFormNotification\");\n    };\n    /**\n     * Displays a synchronous form notification for 120 seconds.\n     *\n     * @returns A Promise that resolves when the notification is cleared.\n     */\n    ButtonFormHelper.prototype.syncFormNotification = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!(!this.formContext ||\n                            !this.buttonAdvancedSetting ||\n                            this.buttonAdvancedSetting.esp_syncformnotificationtext == null)) return [3 /*break*/, 2];\n                        return [4 /*yield*/, ButtonException_1.ExceptionLowCodeButton.showFormNotificationGenericError(\"Sync Form Notification Text Error\", \"The sync form notification text is empty! Please fill it on your configuration settings.\")];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                    case 2:\n                        this.formContext.ui.setFormNotification(this.buttonAdvancedSetting.esp_syncformnotificationtext, \"INFO\", \"LowCodeButtonFormNotification\");\n                        setTimeout(function () {\n                            _this.formContext.ui.clearFormNotification(\"LowCodeButtonFormNotification\");\n                        }, 120000);\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Displays a success form notification for 5 seconds.\n     *\n     * @returns A Promise that resolves when the notification is cleared.\n     */\n    ButtonFormHelper.prototype.showSuccessFormNotification = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!(!this.formContext ||\n                            !this.buttonAdvancedSetting ||\n                            this.buttonAdvancedSetting.esp_syncsuccessformnotificationtext == null)) return [3 /*break*/, 2];\n                        return [4 /*yield*/, ButtonException_1.ExceptionLowCodeButton.showFormNotificationGenericError(\"Success Form Notification Text Error\", \"The success form notification text is empty! Please fill it on your configuration settings.\")];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                    case 2:\n                        this.formContext.ui.setFormNotification(this.buttonAdvancedSetting.esp_syncsuccessformnotificationtext, \"INFO\", \"LowCodeButtonFormNotification\");\n                        setTimeout(function () {\n                            _this.formContext.ui.clearFormNotification(\"LowCodeButtonFormNotification\");\n                        }, 5000);\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Clears all synchronous notifications including form notifications and progress indicators.\n     */\n    ButtonFormHelper.prototype.clearSyncNotifications = function () {\n        var _a, _b;\n        if ((_a = this.buttonAdvancedSetting) === null || _a === void 0 ? void 0 : _a.esp_syncformnotification) {\n            this.clearFormNotification();\n        }\n        if ((_b = this.buttonAdvancedSetting) === null || _b === void 0 ? void 0 : _b.esp_syncspinner) {\n            Xrm.Utility.closeProgressIndicator();\n        }\n    };\n    return ButtonFormHelper;\n}(BaseHelper_1.BaseHelper));\nexports.ButtonFormHelper = ButtonFormHelper;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvSGVscGVycy9CdXR0b25Gb3JtSGVscGVyLnRzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsZUFBZSxnQkFBZ0Isc0NBQXNDLGtCQUFrQjtBQUN2Riw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLGlEQUFpRCxPQUFPO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QiwrREFBK0QsaUJBQWlCO0FBQzVHO0FBQ0Esb0NBQW9DLE1BQU0sK0JBQStCLFlBQVk7QUFDckYsbUNBQW1DLE1BQU0sbUNBQW1DLFlBQVk7QUFDeEYsZ0NBQWdDO0FBQ2hDO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxjQUFjLDZCQUE2QiwwQkFBMEIsY0FBYyxxQkFBcUI7QUFDeEcsNklBQTZJLGNBQWM7QUFDM0osdUJBQXVCLHNCQUFzQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0M7QUFDeEMsbUNBQW1DLFNBQVM7QUFDNUMsbUNBQW1DLFdBQVcsVUFBVTtBQUN4RCwwQ0FBMEMsY0FBYztBQUN4RDtBQUNBLDhHQUE4RyxPQUFPO0FBQ3JILGlGQUFpRixpQkFBaUI7QUFDbEcseURBQXlELGdCQUFnQixRQUFRO0FBQ2pGLCtDQUErQyxnQkFBZ0IsZ0JBQWdCO0FBQy9FO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQSxVQUFVLFlBQVksYUFBYSxTQUFTLFVBQVU7QUFDdEQsb0NBQW9DLFNBQVM7QUFDN0M7QUFDQTtBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCx3QkFBd0I7QUFDeEIsd0JBQXdCLG1CQUFPLENBQUMsMEVBQStCO0FBQy9ELG1CQUFtQixtQkFBTyxDQUFDLGlEQUFjLEdBQUc7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOERBQThELGlCQUFpQjtBQUMvRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxjQUFjLGdEQUFnRDtBQUN4RztBQUNBO0FBQ0EsMENBQTBDLGNBQWMsOEJBQThCO0FBQ3RGO0FBQ0E7QUFDQSwwQ0FBMEMsY0FBYywwQkFBMEI7QUFDbEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSx3REFBd0Q7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELHdCQUF3QiIsInNvdXJjZXMiOlsid2VicGFjazovL0xDQi8uL3NyYy9IZWxwZXJzL0J1dHRvbkZvcm1IZWxwZXIudHM/ODlmNSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19hc3NpZ24gPSAodGhpcyAmJiB0aGlzLl9fYXNzaWduKSB8fCBmdW5jdGlvbiAoKSB7XG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKVxuICAgICAgICAgICAgICAgIHRbcF0gPSBzW3BdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0O1xuICAgIH07XG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59O1xudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG52YXIgX19nZW5lcmF0b3IgPSAodGhpcyAmJiB0aGlzLl9fZ2VuZXJhdG9yKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgYm9keSkge1xuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGcgPSBPYmplY3QuY3JlYXRlKCh0eXBlb2YgSXRlcmF0b3IgPT09IFwiZnVuY3Rpb25cIiA/IEl0ZXJhdG9yIDogT2JqZWN0KS5wcm90b3R5cGUpO1xuICAgIHJldHVybiBnLm5leHQgPSB2ZXJiKDApLCBnW1widGhyb3dcIl0gPSB2ZXJiKDEpLCBnW1wicmV0dXJuXCJdID0gdmVyYigyKSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xuICAgICAgICB3aGlsZSAoZyAmJiAoZyA9IDAsIG9wWzBdICYmIChfID0gMCkpLCBfKSB0cnkge1xuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XG4gICAgfVxufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuQnV0dG9uRm9ybUhlbHBlciA9IHZvaWQgMDtcbnZhciBCdXR0b25FeGNlcHRpb25fMSA9IHJlcXVpcmUoXCIuLi9FeGNlcHRpb25zL0J1dHRvbkV4Y2VwdGlvblwiKTtcbnZhciBCYXNlSGVscGVyXzEgPSByZXF1aXJlKFwiLi9CYXNlSGVscGVyXCIpOyAvLyBBZGp1c3QgcGF0aCBhcyBuZWVkZWRcbi8qKlxuICogQnV0dG9uRm9ybUhlbHBlciBleHRlbmRzIEJhc2VIZWxwZXIgdG8gcHJvdmlkZSBmb3JtLXNwZWNpZmljIGZ1bmN0aW9uYWxpdHkuXG4gKiBJdCBhY2NlcHRzIG9ubHkgYSBYcm0uRm9ybUNvbnRleHQgYXMgdGhlIGNvbnRleHQuXG4gKi9cbnZhciBCdXR0b25Gb3JtSGVscGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhCdXR0b25Gb3JtSGVscGVyLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdHMgYSBuZXcgQnV0dG9uRm9ybUhlbHBlciBpbnN0YW5jZSB3aXRoIHRoZSBwcm92aWRlZCBGb3JtQ29udGV4dC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmb3JtQ29udGV4dCAtIFRoZSBYcm0uRm9ybUNvbnRleHQgcmVwcmVzZW50aW5nIHRoZSBjdXJyZW50IGZvcm0uXG4gICAgICovXG4gICAgZnVuY3Rpb24gQnV0dG9uRm9ybUhlbHBlcihmb3JtQ29udGV4dCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvLyBTZXQgdGhlIGNvbnRleHQgYW5kIGNvbnRhaW5lciB0eXBlIHVzaW5nIHRoZSBCYXNlSGVscGVyJ3MgbWV0aG9kLlxuICAgICAgICBfdGhpcy5nZXRCdXR0b25Mb2NhdGlvbihmb3JtQ29udGV4dCk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhdGljIGZhY3RvcnkgbWV0aG9kIHRvIGNyZWF0ZSBhbmQgaW5pdGlhbGl6ZSBhIEJ1dHRvbkZvcm1IZWxwZXIgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZm9ybUNvbnRleHQgLSBUaGUgWHJtLkZvcm1Db250ZXh0IHJlcHJlc2VudGluZyB0aGUgY3VycmVudCBmb3JtLlxuICAgICAqIEBwYXJhbSBidXR0b25TZXR0aW5nTmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBidXR0b24gc2V0dGluZyB0byByZXRyaWV2ZS5cbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhbiBpbml0aWFsaXplZCBCdXR0b25Gb3JtSGVscGVyIGluc3RhbmNlLlxuICAgICAqL1xuICAgIEJ1dHRvbkZvcm1IZWxwZXIuY3JlYXRlID0gZnVuY3Rpb24gKGZvcm1Db250ZXh0LCBidXR0b25TZXR0aW5nTmFtZSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaGVscGVyO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgaGVscGVyID0gbmV3IEJ1dHRvbkZvcm1IZWxwZXIoZm9ybUNvbnRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgaGVscGVyLmluaXRpYWxpemVTZXR0aW5ncyhidXR0b25TZXR0aW5nTmFtZSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgaGVscGVyXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIGVudGl0eSBsb2dpY2FsIG5hbWUgZnJvbSB0aGUgY3VycmVudCBmb3JtIGNvbnRleHQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgZW50aXR5IGxvZ2ljYWwgbmFtZS5cbiAgICAgKiBAdGhyb3dzIEVycm9yIGlmIHRoZSBmb3JtIGNvbnRleHQgaXMgbm90IHNldC5cbiAgICAgKi9cbiAgICBCdXR0b25Gb3JtSGVscGVyLnByb3RvdHlwZS5nZXRFbnRpdHlMb2dpY2FsTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmZvcm1Db250ZXh0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGb3JtIGNvbnRleHQgaXMgbm90IHNldC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybUNvbnRleHQuZGF0YS5lbnRpdHkuZ2V0RW50aXR5TmFtZSgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIHRoZSByZWNvcmQgSUQgZnJvbSB0aGUgY3VycmVudCBmb3JtIGNvbnRleHQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgcmVjb3JkIElEIGFzIGEgbG93ZXJjYXNlIHN0cmluZyB3aXRob3V0IGN1cmx5IGJyYWNlcy5cbiAgICAgKiBAdGhyb3dzIEVycm9yIGlmIHRoZSBmb3JtIGNvbnRleHQgaXMgbm90IHNldC5cbiAgICAgKi9cbiAgICBCdXR0b25Gb3JtSGVscGVyLnByb3RvdHlwZS5nZXRSZWNvcmRJZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmZvcm1Db250ZXh0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGb3JtIGNvbnRleHQgaXMgbm90IHNldC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybUNvbnRleHQuZGF0YS5lbnRpdHkuZ2V0SWQoKS5yZXBsYWNlKFwie1wiLCBcIlwiKS5yZXBsYWNlKFwifVwiLCBcIlwiKS50b0xvd2VyQ2FzZSgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQnVpbGRzIGEgcGF5bG9hZCBiYXNlZCBvbiB0aGUgYnV0dG9uIHNldHRpbmcgY29uZmlndXJhdGlvbiBhbmQgZm9ybSBjb250ZXh0LlxuICAgICAqXG4gICAgICogVGhlIHBheWxvYWQgbWF5IGluY2x1ZGUgdGhlIGVudGl0eSBsb2dpY2FsIG5hbWUsIHJlY29yZCBJRCwgYW5kIHVzZXIgSUQsXG4gICAgICogYWNjb3JkaW5nIHRvIHRoZSBjb25maWd1cmF0aW9uIGZsYWdzIGluIHRoZSBidXR0b24gc2V0dGluZy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEFuIG9iamVjdCBjb250YWluaW5nIHRoZSBwYXlsb2FkIGRhdGEuXG4gICAgICogQHRocm93cyBFcnJvciBpZiB0aGUgZm9ybSBjb250ZXh0IG9yIGJ1dHRvbiBzZXR0aW5nIGlzIG5vdCBzZXQuXG4gICAgICovXG4gICAgQnV0dG9uRm9ybUhlbHBlci5wcm90b3R5cGUuZ2V0UGF5bG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmZvcm1Db250ZXh0IHx8ICF0aGlzLmJ1dHRvblNldHRpbmcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZvcm0gY29udGV4dCBvciBidXR0b24gc2V0dGluZyBpcyBub3Qgc2V0LlwiKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcGF5bG9hZCA9IHt9O1xuICAgICAgICBpZiAodGhpcy5idXR0b25TZXR0aW5nLmVzcF9pbmNsdWRlZW50aXR5bG9naWNhbG5hbWVpbnBheWxvYWQpIHtcbiAgICAgICAgICAgIHBheWxvYWQgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgcGF5bG9hZCksIHsgZW50aXR5TG9naWNhbE5hbWU6IHRoaXMuZ2V0RW50aXR5TG9naWNhbE5hbWUoKSB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5idXR0b25TZXR0aW5nLmVzcF9pbmNsdWRlcmVjb3JkaWRpbnBheWxvYWQpIHtcbiAgICAgICAgICAgIHBheWxvYWQgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgcGF5bG9hZCksIHsgcmVjb3JkSWQ6IHRoaXMuZ2V0UmVjb3JkSWQoKSB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5idXR0b25TZXR0aW5nLmVzcF9pbmNsdWRlY2FsbGluZ3VzZXJpZGlucGF5bG9hZCkge1xuICAgICAgICAgICAgcGF5bG9hZCA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBwYXlsb2FkKSwgeyB1c2VySWQ6IHRoaXMuZ2V0VXNlcklEKCkgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBheWxvYWQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBPcGVucyBhIGNvbmZpcm1hdGlvbiBkaWFsb2cgYmVmb3JlIGV4ZWN1dGluZyB0aGUgYnV0dG9uIGFjdGlvbi5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHRydWUgaWYgdGhlIHVzZXIgY29uZmlybXMgdGhlIGRpYWxvZywgZmFsc2Ugb3RoZXJ3aXNlLlxuICAgICAqL1xuICAgIEJ1dHRvbkZvcm1IZWxwZXIucHJvdG90eXBlLm9wZW5Db25maXJtYXRpb25EaWFsb2dCZWZvcmVSdW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjb25maXJtU3RyaW5ncywgcmVzdWx0O1xuICAgICAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfZSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2UubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoIXRoaXMuYnV0dG9uQWR2YW5jZWRTZXR0aW5nIHx8IHRoaXMuYnV0dG9uQWR2YW5jZWRTZXR0aW5nLmVzcF9jb25maXJtYXRpb25kaWFsb2d0ZXh0ID09IG51bGwpKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIEJ1dHRvbkV4Y2VwdGlvbl8xLkV4Y2VwdGlvbkxvd0NvZGVCdXR0b24uc2hvd0Zvcm1Ob3RpZmljYXRpb25HZW5lcmljRXJyb3IoXCJDb25maXJtYXRpb24gRGlhbG9nIFRleHQgRXJyb3JcIiwgXCJUaGUgY29uZmlybWF0aW9uIGRpYWxvZyB0ZXh0IGlzIGVtcHR5ISBQbGVhc2UgZmlsbCBpdCBvbiB5b3VyIGNvbmZpZ3VyYXRpb24gc2V0dGluZ3MuXCIpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Uuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGZhbHNlXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlybVN0cmluZ3MgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuY2VsQnV0dG9uTGFiZWw6IChfYSA9IHRoaXMuYnV0dG9uQWR2YW5jZWRTZXR0aW5nLmVzcF9jb25maXJtYXRpb25kaWFsb2djYW5jZWxsYWJlbCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uTGFiZWw6IChfYiA9IHRoaXMuYnV0dG9uQWR2YW5jZWRTZXR0aW5nLmVzcF9jb25maXJtYXRpb25kaWFsb2djb25maXJtbGFiZWwpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VidGl0bGU6IChfYyA9IHRoaXMuYnV0dG9uQWR2YW5jZWRTZXR0aW5nLmVzcF9jb25maXJtYXRpb25kaWFsb2dzdWJ0aXRsZSkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAoX2QgPSB0aGlzLmJ1dHRvbkFkdmFuY2VkU2V0dGluZy5lc3BfY29uZmlybWF0aW9uZGlhbG9ndGV4dCkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogdGhpcy5idXR0b25BZHZhbmNlZFNldHRpbmcuZXNwX2NvbmZpcm1hdGlvbmRpYWxvZ3RpdGxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIFhybS5OYXZpZ2F0aW9uLm9wZW5Db25maXJtRGlhbG9nKGNvbmZpcm1TdHJpbmdzKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9lLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZXN1bHQuY29uZmlybWVkXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBPcGVucyBhIHN5bmNocm9ub3VzIHN1Y2Nlc3MgZGlhbG9nIGFuZCBhd2FpdHMgdGhlIHVzZXIncyBjb25maXJtYXRpb24uXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB0byB0cnVlIGlmIHRoZSBzdWNjZXNzIGRpYWxvZyBpcyBjb25maXJtZWQsIG9yIGZhbHNlIG90aGVyd2lzZS5cbiAgICAgKi9cbiAgICBCdXR0b25Gb3JtSGVscGVyLnByb3RvdHlwZS5vcGVuU3VjY2Vzc0RpYWxvZ1N5bmMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjb25maXJtU3RyaW5ncywgcmVzdWx0O1xuICAgICAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2MpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKCF0aGlzLmJ1dHRvbkFkdmFuY2VkU2V0dGluZyB8fCB0aGlzLmJ1dHRvbkFkdmFuY2VkU2V0dGluZy5lc3Bfc3luY2NvbmZpcm1hdGlvbmJveHRleHQgPT0gbnVsbCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgQnV0dG9uRXhjZXB0aW9uXzEuRXhjZXB0aW9uTG93Q29kZUJ1dHRvbi5zaG93Rm9ybU5vdGlmaWNhdGlvbkdlbmVyaWNFcnJvcihcIlN5bmMgQ29uZmlybWF0aW9uIEJveCBUZXh0IEVycm9yXCIsIFwiVGhlIHN5bmMgY29uZmlybWF0aW9uIGJveCB0ZXh0IGlzIGVtcHR5ISBQbGVhc2UgZmlsbCBpdCBvbiB5b3VyIGNvbmZpZ3VyYXRpb24gc2V0dGluZ3MuXCIpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Muc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGZhbHNlXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlybVN0cmluZ3MgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvbkxhYmVsOiAoX2EgPSB0aGlzLmJ1dHRvbkFkdmFuY2VkU2V0dGluZy5lc3Bfc3luY2NvbmZpcm1hdGlvbmJveGNvbmZpcm1sYWJlbCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IChfYiA9IHRoaXMuYnV0dG9uQWR2YW5jZWRTZXR0aW5nLmVzcF9zeW5jY29uZmlybWF0aW9uYm94dGV4dCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aGlzLmJ1dHRvbkFkdmFuY2VkU2V0dGluZy5lc3Bfc3luY2NvbmZpcm1hdGlvbmJveHRpdGxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIFhybS5OYXZpZ2F0aW9uLm9wZW5BbGVydERpYWxvZyhjb25maXJtU3RyaW5ncyldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBfYy5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcmVzdWx0LmNvbmZpcm1lZF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogT3BlbnMgYSBzdWNjZXNzIGRpYWxvZyB0aGF0IG1heSByZWRpcmVjdCB0aGUgdXNlciBiYXNlZCBvbiB0aGVpciBjb25maXJtYXRpb24uXG4gICAgICogSWYgdGhlIHVzZXIgY29uZmlybXMsIHRoZSBicm93c2VyIGlzIHJlZGlyZWN0ZWQ7IG90aGVyd2lzZSwgdGhlIGZvcm0gaXMgcmVsb2FkZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcmVzcG9uc2UgLSBBbiBvYmplY3QgY29udGFpbmluZyB0aGUgcmVkaXJlY3QgVVJJLlxuICAgICAqL1xuICAgIEJ1dHRvbkZvcm1IZWxwZXIucHJvdG90eXBlLm9wZW5TdWNjZXNzRGlhbG9nUmVkaXJlY3QgPSBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kO1xuICAgICAgICBpZiAoIXRoaXMuYnV0dG9uQWR2YW5jZWRTZXR0aW5nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJCdXR0b24gYWR2YW5jZWQgc2V0dGluZyBpcyBub3Qgc2V0LlwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5idXR0b25BZHZhbmNlZFNldHRpbmcuZXNwX3N5bmNjb25maXJtYXRpb25ib3hyZWRpcmVjdHRleHQgPT0gbnVsbCkge1xuICAgICAgICAgICAgQnV0dG9uRXhjZXB0aW9uXzEuRXhjZXB0aW9uTG93Q29kZUJ1dHRvbi5zaG93Rm9ybU5vdGlmaWNhdGlvbkdlbmVyaWNFcnJvcihcIlN5bmMgQ29uZmlybWF0aW9uIEJveCBSZWRpcmVjdCBUZXh0IEVycm9yXCIsIFwiVGhlIHN5bmMgY29uZmlybWF0aW9uIGJveCByZWRpcmVjdCB0ZXh0IGlzIGVtcHR5ISBQbGVhc2UgZmlsbCBpdCBvbiB5b3VyIGNvbmZpZ3VyYXRpb24gc2V0dGluZ3MuXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjb25maXJtU3RyaW5ncyA9IHtcbiAgICAgICAgICAgIGNhbmNlbEJ1dHRvbkxhYmVsOiAoX2EgPSB0aGlzLmJ1dHRvbkFkdmFuY2VkU2V0dGluZy5lc3Bfc3luY2NvbmZpcm1hdGlvbmJveHJlZGlyZWN0Y2FuY2VsbGFiZWwpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGNvbmZpcm1CdXR0b25MYWJlbDogKF9iID0gdGhpcy5idXR0b25BZHZhbmNlZFNldHRpbmcuZXNwX3N5bmNjb25maXJtYXRpb25ib3hyZWRpcmVjdGNvbmZpcm1sYWJlbCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgdGV4dDogdGhpcy5idXR0b25BZHZhbmNlZFNldHRpbmcuZXNwX3N5bmNjb25maXJtYXRpb25ib3hyZWRpcmVjdHRleHQsXG4gICAgICAgICAgICBzdWJ0aXRsZTogKF9jID0gdGhpcy5idXR0b25BZHZhbmNlZFNldHRpbmcuZXNwX3N5bmNjb25maXJtYXRpb25ib3hyZWRpcmVjdHN1YnRpdGxlKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB0aXRsZTogKF9kID0gdGhpcy5idXR0b25BZHZhbmNlZFNldHRpbmcuZXNwX3N5bmNjb25maXJtYXRpb25ib3hyZWRpcmVjdHRpdGxlKSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiB1bmRlZmluZWQsXG4gICAgICAgIH07XG4gICAgICAgIFhybS5OYXZpZ2F0aW9uLm9wZW5Db25maXJtRGlhbG9nKGNvbmZpcm1TdHJpbmdzKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgIGlmIChyZXN1bHQuY29uZmlybWVkKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJVc2VyIGNvbmZpcm1lZCB0aGUgZGlhbG9nLCByZWRpcmVjdGluZy4uLlwiKTtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuYnV0dG9uQWR2YW5jZWRTZXR0aW5nLmVzcF9zeW5jY29uZmlybWF0aW9uYm94cmVkaXJlY3Rtb2RlID09PVxuICAgICAgICAgICAgICAgICAgICAxIC8qIGVzcF9idXR0b25hZHZhbmNlZHNldHRpbmdfZXNwX2J1dHRvbmFkdmFuY2Vkc2V0dGluZ19lc3Bfc3luY2NvbmZpcm1hdGlvbmJveHJlZGlyZWN0bW9kZS5DdXJyZW50VGFiICovKSB7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5vcGVuKHJlc3BvbnNlLnJlZGlyZWN0VXJpLCBcIl9zZWxmXCIpLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cub3BlbihyZXNwb25zZS5yZWRpcmVjdFVyaSwgXCJfYmxhbmtcIikuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlVzZXIgY2FuY2VsbGVkIHRoZSBkaWFsb2csIHJlZnJlc2hpbmcgdGhlIGZvcm0uXCIpO1xuICAgICAgICAgICAgICAgIF90aGlzLnJlbG9hZEZvcm0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZWxvYWRzIHRoZSBjdXJyZW50IGZvcm0uXG4gICAgICpcbiAgICAgKiBAdGhyb3dzIEVycm9yIGlmIHRoZSBmb3JtIGNvbnRleHQsIGJ1dHRvbiBzZXR0aW5nLCBvciBhZHZhbmNlZCBzZXR0aW5nIGlzIG5vdCBzZXQuXG4gICAgICovXG4gICAgQnV0dG9uRm9ybUhlbHBlci5wcm90b3R5cGUucmVsb2FkRm9ybSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmZvcm1Db250ZXh0IHx8ICF0aGlzLmJ1dHRvblNldHRpbmcgfHwgIXRoaXMuYnV0dG9uQWR2YW5jZWRTZXR0aW5nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJSZXF1aXJlZCBwcm9wZXJ0aWVzIGFyZSBub3Qgc2V0IGZvciByZWxvYWRpbmcgdGhlIGZvcm0uXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmJ1dHRvblNldHRpbmcuZXNwX3JlZnJlc2hmb3Jtd2hlbmFwaWNhbGxlbmRzICYmXG4gICAgICAgICAgICAhKHRoaXMuYnV0dG9uQWR2YW5jZWRTZXR0aW5nLmVzcF9zeW5jY29uZmlybWF0aW9uYm94cmVkaXJlY3QgJiZcbiAgICAgICAgICAgICAgICB0aGlzLmJ1dHRvbkFkdmFuY2VkU2V0dGluZy5lc3Bfc3luY2NvbmZpcm1hdGlvbmJveHJlZGlyZWN0bW9kZSA9PT1cbiAgICAgICAgICAgICAgICAgICAgMSAvKiBlc3BfYnV0dG9uYWR2YW5jZWRzZXR0aW5nX2VzcF9idXR0b25hZHZhbmNlZHNldHRpbmdfZXNwX3N5bmNjb25maXJtYXRpb25ib3hyZWRpcmVjdG1vZGUuQ3VycmVudFRhYiAqLykpIHtcbiAgICAgICAgICAgIHRoaXMuZm9ybUNvbnRleHQuZGF0YS5yZWZyZXNoKGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogRGlzcGxheXMgYW4gYXN5bmNocm9ub3VzIGZvcm0gbm90aWZpY2F0aW9uIGZvciA1IHNlY29uZHMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSBub3RpZmljYXRpb24gaXMgY2xlYXJlZC5cbiAgICAgKi9cbiAgICBCdXR0b25Gb3JtSGVscGVyLnByb3RvdHlwZS5hc3luY0Zvcm1Ob3RpZmljYXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISghdGhpcy5mb3JtQ29udGV4dCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICF0aGlzLmJ1dHRvbkFkdmFuY2VkU2V0dGluZyB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnV0dG9uQWR2YW5jZWRTZXR0aW5nLmVzcF9hc3luY2Zvcm1ub3RpZmljYXRpb250ZXh0ID09IG51bGwpKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIEJ1dHRvbkV4Y2VwdGlvbl8xLkV4Y2VwdGlvbkxvd0NvZGVCdXR0b24uc2hvd0Zvcm1Ob3RpZmljYXRpb25HZW5lcmljRXJyb3IoXCJBc3luYyBGb3JtIE5vdGlmaWNhdGlvbiBUZXh0IEVycm9yXCIsIFwiVGhlIGFzeW5jIGZvcm0gbm90aWZpY2F0aW9uIHRleHQgaXMgZW1wdHkhIFBsZWFzZSBmaWxsIGl0IG9uIHlvdXIgY29uZmlndXJhdGlvbiBzZXR0aW5ncy5cIildO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybUNvbnRleHQudWkuc2V0Rm9ybU5vdGlmaWNhdGlvbih0aGlzLmJ1dHRvbkFkdmFuY2VkU2V0dGluZy5lc3BfYXN5bmNmb3Jtbm90aWZpY2F0aW9udGV4dCwgXCJJTkZPXCIsIFwiTG93Q29kZUJ1dHRvbkZvcm1Ob3RpZmljYXRpb25cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5mb3JtQ29udGV4dC51aS5jbGVhckZvcm1Ob3RpZmljYXRpb24oXCJMb3dDb2RlQnV0dG9uRm9ybU5vdGlmaWNhdGlvblwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDUwMDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENsZWFycyB0aGUgZm9ybSBub3RpZmljYXRpb24gZnJvbSB0aGUgY3VycmVudCBmb3JtLlxuICAgICAqXG4gICAgICogQHRocm93cyBFcnJvciBpZiB0aGUgZm9ybSBjb250ZXh0IGlzIG5vdCBzZXQuXG4gICAgICovXG4gICAgQnV0dG9uRm9ybUhlbHBlci5wcm90b3R5cGUuY2xlYXJGb3JtTm90aWZpY2F0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuZm9ybUNvbnRleHQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZvcm0gY29udGV4dCBpcyBub3Qgc2V0LlwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZvcm1Db250ZXh0LnVpLmNsZWFyRm9ybU5vdGlmaWNhdGlvbihcIkxvd0NvZGVCdXR0b25Gb3JtTm90aWZpY2F0aW9uXCIpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGlzcGxheXMgYSBzeW5jaHJvbm91cyBmb3JtIG5vdGlmaWNhdGlvbiBmb3IgMTIwIHNlY29uZHMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSBub3RpZmljYXRpb24gaXMgY2xlYXJlZC5cbiAgICAgKi9cbiAgICBCdXR0b25Gb3JtSGVscGVyLnByb3RvdHlwZS5zeW5jRm9ybU5vdGlmaWNhdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKCF0aGlzLmZvcm1Db250ZXh0IHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIXRoaXMuYnV0dG9uQWR2YW5jZWRTZXR0aW5nIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5idXR0b25BZHZhbmNlZFNldHRpbmcuZXNwX3N5bmNmb3Jtbm90aWZpY2F0aW9udGV4dCA9PSBudWxsKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBCdXR0b25FeGNlcHRpb25fMS5FeGNlcHRpb25Mb3dDb2RlQnV0dG9uLnNob3dGb3JtTm90aWZpY2F0aW9uR2VuZXJpY0Vycm9yKFwiU3luYyBGb3JtIE5vdGlmaWNhdGlvbiBUZXh0IEVycm9yXCIsIFwiVGhlIHN5bmMgZm9ybSBub3RpZmljYXRpb24gdGV4dCBpcyBlbXB0eSEgUGxlYXNlIGZpbGwgaXQgb24geW91ciBjb25maWd1cmF0aW9uIHNldHRpbmdzLlwiKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtQ29udGV4dC51aS5zZXRGb3JtTm90aWZpY2F0aW9uKHRoaXMuYnV0dG9uQWR2YW5jZWRTZXR0aW5nLmVzcF9zeW5jZm9ybW5vdGlmaWNhdGlvbnRleHQsIFwiSU5GT1wiLCBcIkxvd0NvZGVCdXR0b25Gb3JtTm90aWZpY2F0aW9uXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZm9ybUNvbnRleHQudWkuY2xlYXJGb3JtTm90aWZpY2F0aW9uKFwiTG93Q29kZUJ1dHRvbkZvcm1Ob3RpZmljYXRpb25cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAxMjAwMDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERpc3BsYXlzIGEgc3VjY2VzcyBmb3JtIG5vdGlmaWNhdGlvbiBmb3IgNSBzZWNvbmRzLlxuICAgICAqXG4gICAgICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgbm90aWZpY2F0aW9uIGlzIGNsZWFyZWQuXG4gICAgICovXG4gICAgQnV0dG9uRm9ybUhlbHBlci5wcm90b3R5cGUuc2hvd1N1Y2Nlc3NGb3JtTm90aWZpY2F0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoIXRoaXMuZm9ybUNvbnRleHQgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhdGhpcy5idXR0b25BZHZhbmNlZFNldHRpbmcgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJ1dHRvbkFkdmFuY2VkU2V0dGluZy5lc3Bfc3luY3N1Y2Nlc3Nmb3Jtbm90aWZpY2F0aW9udGV4dCA9PSBudWxsKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBCdXR0b25FeGNlcHRpb25fMS5FeGNlcHRpb25Mb3dDb2RlQnV0dG9uLnNob3dGb3JtTm90aWZpY2F0aW9uR2VuZXJpY0Vycm9yKFwiU3VjY2VzcyBGb3JtIE5vdGlmaWNhdGlvbiBUZXh0IEVycm9yXCIsIFwiVGhlIHN1Y2Nlc3MgZm9ybSBub3RpZmljYXRpb24gdGV4dCBpcyBlbXB0eSEgUGxlYXNlIGZpbGwgaXQgb24geW91ciBjb25maWd1cmF0aW9uIHNldHRpbmdzLlwiKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtQ29udGV4dC51aS5zZXRGb3JtTm90aWZpY2F0aW9uKHRoaXMuYnV0dG9uQWR2YW5jZWRTZXR0aW5nLmVzcF9zeW5jc3VjY2Vzc2Zvcm1ub3RpZmljYXRpb250ZXh0LCBcIklORk9cIiwgXCJMb3dDb2RlQnV0dG9uRm9ybU5vdGlmaWNhdGlvblwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmZvcm1Db250ZXh0LnVpLmNsZWFyRm9ybU5vdGlmaWNhdGlvbihcIkxvd0NvZGVCdXR0b25Gb3JtTm90aWZpY2F0aW9uXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgNTAwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2xlYXJzIGFsbCBzeW5jaHJvbm91cyBub3RpZmljYXRpb25zIGluY2x1ZGluZyBmb3JtIG5vdGlmaWNhdGlvbnMgYW5kIHByb2dyZXNzIGluZGljYXRvcnMuXG4gICAgICovXG4gICAgQnV0dG9uRm9ybUhlbHBlci5wcm90b3R5cGUuY2xlYXJTeW5jTm90aWZpY2F0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgaWYgKChfYSA9IHRoaXMuYnV0dG9uQWR2YW5jZWRTZXR0aW5nKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZXNwX3N5bmNmb3Jtbm90aWZpY2F0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLmNsZWFyRm9ybU5vdGlmaWNhdGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIGlmICgoX2IgPSB0aGlzLmJ1dHRvbkFkdmFuY2VkU2V0dGluZykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmVzcF9zeW5jc3Bpbm5lcikge1xuICAgICAgICAgICAgWHJtLlV0aWxpdHkuY2xvc2VQcm9ncmVzc0luZGljYXRvcigpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gQnV0dG9uRm9ybUhlbHBlcjtcbn0oQmFzZUhlbHBlcl8xLkJhc2VIZWxwZXIpKTtcbmV4cG9ydHMuQnV0dG9uRm9ybUhlbHBlciA9IEJ1dHRvbkZvcm1IZWxwZXI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/Helpers/ButtonFormHelper.ts\n");

/***/ }),

/***/ "./src/LowCodeButtonBase.ts":
/*!**********************************!*\
  !*** ./src/LowCodeButtonBase.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.ButtonRegistration = void 0;\nvar LowCodeButtonFormBase_1 = __webpack_require__(/*! ./LowCodeButtonFormBase */ \"./src/LowCodeButtonFormBase.ts\");\nvar BaseHelper_1 = __webpack_require__(/*! ./Helpers/BaseHelper */ \"./src/Helpers/BaseHelper.ts\");\nvar ButtonException_1 = __webpack_require__(/*! ./Exceptions/ButtonException */ \"./src/Exceptions/ButtonException.ts\");\nvar ButtonRegistration = /** @class */ (function () {\n    function ButtonRegistration() {\n    }\n    ButtonRegistration.onClick = function (context, buttonSettingName) {\n        if (!context) {\n            ButtonException_1.ExceptionLowCodeButton.showFormNotificationGenericError(\"Registration Error\", \"No context provided\");\n            return;\n        }\n        if (!buttonSettingName) {\n            ButtonException_1.ExceptionLowCodeButton.showFormNotificationGenericError(\"Registration Error\", \"No button setting name provided\");\n            return;\n        }\n        var baseHelper = new BaseHelper_1.BaseHelper();\n        baseHelper.getButtonLocation(context);\n        switch (baseHelper.containerType) {\n            case \"form\":\n                LowCodeButtonFormBase_1.ButtonRegistrationForm.onClick(context, buttonSettingName);\n                break;\n            case \"grid\":\n                console.log(\"Grid button clicked\");\n                break;\n            case \"subgrid\":\n                console.log(\"Subgrid button clicked\");\n                break;\n            default:\n                console.log(\"Unknown button location\");\n                break;\n        }\n    };\n    return ButtonRegistration;\n}());\nexports.ButtonRegistration = ButtonRegistration;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvTG93Q29kZUJ1dHRvbkJhc2UudHMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsMEJBQTBCO0FBQzFCLDhCQUE4QixtQkFBTyxDQUFDLCtEQUF5QjtBQUMvRCxtQkFBbUIsbUJBQU8sQ0FBQyx5REFBc0I7QUFDakQsd0JBQXdCLG1CQUFPLENBQUMseUVBQThCO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCwwQkFBMEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9MQ0IvLi9zcmMvTG93Q29kZUJ1dHRvbkJhc2UudHM/MmY0MiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuQnV0dG9uUmVnaXN0cmF0aW9uID0gdm9pZCAwO1xudmFyIExvd0NvZGVCdXR0b25Gb3JtQmFzZV8xID0gcmVxdWlyZShcIi4vTG93Q29kZUJ1dHRvbkZvcm1CYXNlXCIpO1xudmFyIEJhc2VIZWxwZXJfMSA9IHJlcXVpcmUoXCIuL0hlbHBlcnMvQmFzZUhlbHBlclwiKTtcbnZhciBCdXR0b25FeGNlcHRpb25fMSA9IHJlcXVpcmUoXCIuL0V4Y2VwdGlvbnMvQnV0dG9uRXhjZXB0aW9uXCIpO1xudmFyIEJ1dHRvblJlZ2lzdHJhdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBCdXR0b25SZWdpc3RyYXRpb24oKSB7XG4gICAgfVxuICAgIEJ1dHRvblJlZ2lzdHJhdGlvbi5vbkNsaWNrID0gZnVuY3Rpb24gKGNvbnRleHQsIGJ1dHRvblNldHRpbmdOYW1lKSB7XG4gICAgICAgIGlmICghY29udGV4dCkge1xuICAgICAgICAgICAgQnV0dG9uRXhjZXB0aW9uXzEuRXhjZXB0aW9uTG93Q29kZUJ1dHRvbi5zaG93Rm9ybU5vdGlmaWNhdGlvbkdlbmVyaWNFcnJvcihcIlJlZ2lzdHJhdGlvbiBFcnJvclwiLCBcIk5vIGNvbnRleHQgcHJvdmlkZWRcIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFidXR0b25TZXR0aW5nTmFtZSkge1xuICAgICAgICAgICAgQnV0dG9uRXhjZXB0aW9uXzEuRXhjZXB0aW9uTG93Q29kZUJ1dHRvbi5zaG93Rm9ybU5vdGlmaWNhdGlvbkdlbmVyaWNFcnJvcihcIlJlZ2lzdHJhdGlvbiBFcnJvclwiLCBcIk5vIGJ1dHRvbiBzZXR0aW5nIG5hbWUgcHJvdmlkZWRcIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGJhc2VIZWxwZXIgPSBuZXcgQmFzZUhlbHBlcl8xLkJhc2VIZWxwZXIoKTtcbiAgICAgICAgYmFzZUhlbHBlci5nZXRCdXR0b25Mb2NhdGlvbihjb250ZXh0KTtcbiAgICAgICAgc3dpdGNoIChiYXNlSGVscGVyLmNvbnRhaW5lclR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJmb3JtXCI6XG4gICAgICAgICAgICAgICAgTG93Q29kZUJ1dHRvbkZvcm1CYXNlXzEuQnV0dG9uUmVnaXN0cmF0aW9uRm9ybS5vbkNsaWNrKGNvbnRleHQsIGJ1dHRvblNldHRpbmdOYW1lKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJncmlkXCI6XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJHcmlkIGJ1dHRvbiBjbGlja2VkXCIpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInN1YmdyaWRcIjpcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlN1YmdyaWQgYnV0dG9uIGNsaWNrZWRcIik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVW5rbm93biBidXR0b24gbG9jYXRpb25cIik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBCdXR0b25SZWdpc3RyYXRpb247XG59KCkpO1xuZXhwb3J0cy5CdXR0b25SZWdpc3RyYXRpb24gPSBCdXR0b25SZWdpc3RyYXRpb247XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/LowCodeButtonBase.ts\n");

/***/ }),

/***/ "./src/LowCodeButtonFormBase.ts":
/*!**************************************!*\
  !*** ./src/LowCodeButtonFormBase.ts ***!
  \**************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.ButtonRegistrationForm = void 0;\nvar ButtonException_1 = __webpack_require__(/*! ./Exceptions/ButtonException */ \"./src/Exceptions/ButtonException.ts\");\nvar ButtonFormHelper_1 = __webpack_require__(/*! ./Helpers/ButtonFormHelper */ \"./src/Helpers/ButtonFormHelper.ts\");\nvar BaseButtonResponseModels_1 = __webpack_require__(/*! ./Models/BaseButtonResponseModels */ \"./src/Models/BaseButtonResponseModels.ts\");\nvar ButtonRegistrationForm = /** @class */ (function () {\n    function ButtonRegistrationForm() {\n    }\n    /**\n     * Handles the onClick event for the button inside a Form.\n     * @param formContext - The form context.\n     * @param buttonSettingName - The name of the button setting.\n     */\n    ButtonRegistrationForm.onClick = function (formContext, buttonSettingName) {\n        return __awaiter(this, void 0, void 0, function () {\n            var buttonHelper, confirmation;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        buttonHelper = new ButtonFormHelper_1.ButtonFormHelper(formContext);\n                        return [4 /*yield*/, buttonHelper.initializeSettings(buttonSettingName)];\n                    case 1:\n                        _a.sent();\n                        if (!buttonHelper.buttonAdvancedSetting.esp_showconfirmationdialog) return [3 /*break*/, 3];\n                        return [4 /*yield*/, buttonHelper.openConfirmationDialogBeforeRun()];\n                    case 2:\n                        confirmation = _a.sent();\n                        if (!confirmation) {\n                            return [2 /*return*/];\n                        }\n                        _a.label = 3;\n                    case 3:\n                        if (!(formContext.data.entity.getIsDirty() && buttonHelper.buttonSetting.esp_savebeforerunning)) return [3 /*break*/, 5];\n                        console.log(\"Saving form before running the button\");\n                        return [4 /*yield*/, formContext.data.save()];\n                    case 4:\n                        _a.sent();\n                        _a.label = 5;\n                    case 5:\n                        if (!!buttonHelper.buttonSetting.esp_endpoint) return [3 /*break*/, 7];\n                        return [4 /*yield*/, ButtonException_1.ExceptionLowCodeButton.showFormNotificationGenericError(\"Endpoint Not Set\", \"The endpoint for the button is not set. Please set it up in the button settings.\")];\n                    case 6:\n                        _a.sent();\n                        return [2 /*return*/];\n                    case 7:\n                        if (!(buttonHelper.buttonAdvancedSetting.esp_executionmode ===\n                            1 /* esp_buttonadvancedsetting_esp_buttonadvancedsetting_esp_executionmode.Async */)) return [3 /*break*/, 9];\n                        return [4 /*yield*/, this.executeAsync(buttonHelper)];\n                    case 8:\n                        _a.sent();\n                        return [3 /*break*/, 11];\n                    case 9: return [4 /*yield*/, this.executeSync(buttonHelper)];\n                    case 10:\n                        _a.sent();\n                        _a.label = 11;\n                    case 11: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Executes an asynchronous HTTP call.\n     * @param buttonHelper - The initialized ButtonFormHelper instance.\n     */\n    ButtonRegistrationForm.executeAsync = function (buttonHelper) {\n        return __awaiter(this, void 0, void 0, function () {\n            var buttonSetting, buttonAdvancedSetting;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        buttonSetting = buttonHelper.buttonSetting, buttonAdvancedSetting = buttonHelper.buttonAdvancedSetting;\n                        console.log(\"Executing async call to \".concat(buttonSetting === null || buttonSetting === void 0 ? void 0 : buttonSetting.esp_endpoint));\n                        if (!(buttonAdvancedSetting === null || buttonAdvancedSetting === void 0 ? void 0 : buttonAdvancedSetting.esp_asyncformnotification)) return [3 /*break*/, 2];\n                        return [4 /*yield*/, buttonHelper.asyncFormNotification()];\n                    case 1:\n                        _a.sent();\n                        _a.label = 2;\n                    case 2:\n                        buttonHelper.makeRequest(\"POST\", buttonSetting.esp_endpoint, buttonHelper.getPayload()).catch(function (error) { return __awaiter(_this, void 0, void 0, function () {\n                            return __generator(this, function (_a) {\n                                switch (_a.label) {\n                                    case 0: return [4 /*yield*/, ButtonException_1.ExceptionLowCodeButton.showFormNotificationGenericError(\"Error during HTTP Call\", error.message)];\n                                    case 1:\n                                        _a.sent();\n                                        return [4 /*yield*/, buttonHelper.clearFormNotification()];\n                                    case 2:\n                                        _a.sent();\n                                        return [2 /*return*/];\n                                }\n                            });\n                        }); });\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Executes a synchronous HTTP call.\n     * @param buttonHelper - The initialized ButtonFormHelper instance.\n     */\n    ButtonRegistrationForm.executeSync = function (buttonHelper) {\n        return __awaiter(this, void 0, void 0, function () {\n            var buttonSetting, buttonAdvancedSetting, response, errorMessage, _a, _b, errorText, redirectResponse, _c, _d;\n            var _this = this;\n            var _e, _f;\n            return __generator(this, function (_g) {\n                switch (_g.label) {\n                    case 0:\n                        buttonSetting = buttonHelper.buttonSetting, buttonAdvancedSetting = buttonHelper.buttonAdvancedSetting;\n                        console.log(\"Executing sync call to \".concat(buttonSetting === null || buttonSetting === void 0 ? void 0 : buttonSetting.esp_endpoint));\n                        if (!(buttonAdvancedSetting === null || buttonAdvancedSetting === void 0 ? void 0 : buttonAdvancedSetting.esp_syncformnotification)) return [3 /*break*/, 2];\n                        return [4 /*yield*/, buttonHelper.syncFormNotification()];\n                    case 1:\n                        _g.sent();\n                        _g.label = 2;\n                    case 2:\n                        if (!(buttonAdvancedSetting === null || buttonAdvancedSetting === void 0 ? void 0 : buttonAdvancedSetting.esp_syncspinner)) return [3 /*break*/, 5];\n                        if (!!buttonAdvancedSetting.esp_syncspinnertext) return [3 /*break*/, 4];\n                        return [4 /*yield*/, ButtonException_1.ExceptionLowCodeButton.showFormNotificationGenericError(\"Sync Spinner Text Error\", \"The sync spinner text is empty! Please fill it on your configuration settings.\")];\n                    case 3:\n                        _g.sent();\n                        return [2 /*return*/];\n                    case 4:\n                        Xrm.Utility.showProgressIndicator(buttonAdvancedSetting.esp_syncspinnertext);\n                        _g.label = 5;\n                    case 5: return [4 /*yield*/, buttonHelper\n                            .makeRequest(\"POST\", buttonSetting.esp_endpoint, buttonHelper.getPayload())\n                            .catch(function (error) { return __awaiter(_this, void 0, void 0, function () {\n                            return __generator(this, function (_a) {\n                                switch (_a.label) {\n                                    case 0: return [4 /*yield*/, ButtonException_1.ExceptionLowCodeButton.showFormNotificationGenericError(\"Error during HTTP Call\", error.message)];\n                                    case 1:\n                                        _a.sent();\n                                        return [2 /*return*/];\n                                }\n                            });\n                        }); })\n                            .finally(function () {\n                            if (buttonAdvancedSetting === null || buttonAdvancedSetting === void 0 ? void 0 : buttonAdvancedSetting.esp_syncspinner) {\n                                Xrm.Utility.closeProgressIndicator();\n                                buttonHelper.clearFormNotification();\n                            }\n                        })];\n                    case 6:\n                        response = _g.sent();\n                        if (!response)\n                            return [2 /*return*/];\n                        if (!(response.status === 400)) return [3 /*break*/, 9];\n                        buttonHelper.clearSyncNotifications();\n                        _b = (_a = BaseButtonResponseModels_1.ErrorMessageResponse).fromJson;\n                        return [4 /*yield*/, response.text()];\n                    case 7:\n                        errorMessage = _b.apply(_a, [_g.sent()]);\n                        return [4 /*yield*/, ButtonException_1.ExceptionLowCodeButton.showFormNotificationGenericError(errorMessage.title, errorMessage.message)];\n                    case 8:\n                        _g.sent();\n                        return [2 /*return*/];\n                    case 9:\n                        if (!(((_e = response.status) !== null && _e !== void 0 ? _e : 500) >= 500)) return [3 /*break*/, 12];\n                        buttonHelper.clearSyncNotifications();\n                        return [4 /*yield*/, response.text()];\n                    case 10:\n                        errorText = (_f = (_g.sent())) !== null && _f !== void 0 ? _f : \"An error occurred on the server. Please try again later.\";\n                        return [4 /*yield*/, ButtonException_1.ExceptionLowCodeButton.showFormNotificationGenericError(\"Error during HTTP Call\", \"Error code: \".concat(response.status, \"\\n\").concat(errorText))];\n                    case 11:\n                        _g.sent();\n                        return [2 /*return*/];\n                    case 12:\n                        if (!(response.status === 200)) return [3 /*break*/, 19];\n                        buttonHelper.clearSyncNotifications();\n                        if (!(buttonAdvancedSetting === null || buttonAdvancedSetting === void 0 ? void 0 : buttonAdvancedSetting.esp_syncsuccessformnotification)) return [3 /*break*/, 14];\n                        return [4 /*yield*/, buttonHelper.showSuccessFormNotification()];\n                    case 13:\n                        _g.sent();\n                        _g.label = 14;\n                    case 14:\n                        if (!(buttonAdvancedSetting === null || buttonAdvancedSetting === void 0 ? void 0 : buttonAdvancedSetting.esp_syncconfirmationbox)) return [3 /*break*/, 16];\n                        return [4 /*yield*/, buttonHelper.openSuccessDialogSync()];\n                    case 15:\n                        _g.sent();\n                        _g.label = 16;\n                    case 16:\n                        if (!(buttonAdvancedSetting === null || buttonAdvancedSetting === void 0 ? void 0 : buttonAdvancedSetting.esp_syncconfirmationboxredirect)) return [3 /*break*/, 18];\n                        _d = (_c = BaseButtonResponseModels_1.RedirectResponse).fromJson;\n                        return [4 /*yield*/, response.text()];\n                    case 17:\n                        redirectResponse = _d.apply(_c, [_g.sent()]);\n                        buttonHelper.openSuccessDialogRedirect(redirectResponse);\n                        _g.label = 18;\n                    case 18:\n                        buttonHelper.reloadForm();\n                        _g.label = 19;\n                    case 19: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return ButtonRegistrationForm;\n}());\nexports.ButtonRegistrationForm = ButtonRegistrationForm;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvTG93Q29kZUJ1dHRvbkZvcm1CYXNlLnRzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQSw0QkFBNEIsK0RBQStELGlCQUFpQjtBQUM1RztBQUNBLG9DQUFvQyxNQUFNLCtCQUErQixZQUFZO0FBQ3JGLG1DQUFtQyxNQUFNLG1DQUFtQyxZQUFZO0FBQ3hGLGdDQUFnQztBQUNoQztBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsY0FBYyw2QkFBNkIsMEJBQTBCLGNBQWMscUJBQXFCO0FBQ3hHLDZJQUE2SSxjQUFjO0FBQzNKLHVCQUF1QixzQkFBc0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDO0FBQ3hDLG1DQUFtQyxTQUFTO0FBQzVDLG1DQUFtQyxXQUFXLFVBQVU7QUFDeEQsMENBQTBDLGNBQWM7QUFDeEQ7QUFDQSw4R0FBOEcsT0FBTztBQUNySCxpRkFBaUYsaUJBQWlCO0FBQ2xHLHlEQUF5RCxnQkFBZ0IsUUFBUTtBQUNqRiwrQ0FBK0MsZ0JBQWdCLGdCQUFnQjtBQUMvRTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0EsVUFBVSxZQUFZLGFBQWEsU0FBUyxVQUFVO0FBQ3RELG9DQUFvQyxTQUFTO0FBQzdDO0FBQ0E7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsOEJBQThCO0FBQzlCLHdCQUF3QixtQkFBTyxDQUFDLHlFQUE4QjtBQUM5RCx5QkFBeUIsbUJBQU8sQ0FBQyxxRUFBNEI7QUFDN0QsaUNBQWlDLG1CQUFPLENBQUMsbUZBQW1DO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUlBQXlJO0FBQ3pJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCLHlCQUF5QixJQUFJO0FBQzdCO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0Q7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0IseUJBQXlCLElBQUk7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsOEJBQThCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vTENCLy4vc3JjL0xvd0NvZGVCdXR0b25Gb3JtQmFzZS50cz80NWFhIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG52YXIgX19nZW5lcmF0b3IgPSAodGhpcyAmJiB0aGlzLl9fZ2VuZXJhdG9yKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgYm9keSkge1xuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGcgPSBPYmplY3QuY3JlYXRlKCh0eXBlb2YgSXRlcmF0b3IgPT09IFwiZnVuY3Rpb25cIiA/IEl0ZXJhdG9yIDogT2JqZWN0KS5wcm90b3R5cGUpO1xuICAgIHJldHVybiBnLm5leHQgPSB2ZXJiKDApLCBnW1widGhyb3dcIl0gPSB2ZXJiKDEpLCBnW1wicmV0dXJuXCJdID0gdmVyYigyKSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xuICAgICAgICB3aGlsZSAoZyAmJiAoZyA9IDAsIG9wWzBdICYmIChfID0gMCkpLCBfKSB0cnkge1xuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XG4gICAgfVxufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuQnV0dG9uUmVnaXN0cmF0aW9uRm9ybSA9IHZvaWQgMDtcbnZhciBCdXR0b25FeGNlcHRpb25fMSA9IHJlcXVpcmUoXCIuL0V4Y2VwdGlvbnMvQnV0dG9uRXhjZXB0aW9uXCIpO1xudmFyIEJ1dHRvbkZvcm1IZWxwZXJfMSA9IHJlcXVpcmUoXCIuL0hlbHBlcnMvQnV0dG9uRm9ybUhlbHBlclwiKTtcbnZhciBCYXNlQnV0dG9uUmVzcG9uc2VNb2RlbHNfMSA9IHJlcXVpcmUoXCIuL01vZGVscy9CYXNlQnV0dG9uUmVzcG9uc2VNb2RlbHNcIik7XG52YXIgQnV0dG9uUmVnaXN0cmF0aW9uRm9ybSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBCdXR0b25SZWdpc3RyYXRpb25Gb3JtKCkge1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIHRoZSBvbkNsaWNrIGV2ZW50IGZvciB0aGUgYnV0dG9uIGluc2lkZSBhIEZvcm0uXG4gICAgICogQHBhcmFtIGZvcm1Db250ZXh0IC0gVGhlIGZvcm0gY29udGV4dC5cbiAgICAgKiBAcGFyYW0gYnV0dG9uU2V0dGluZ05hbWUgLSBUaGUgbmFtZSBvZiB0aGUgYnV0dG9uIHNldHRpbmcuXG4gICAgICovXG4gICAgQnV0dG9uUmVnaXN0cmF0aW9uRm9ybS5vbkNsaWNrID0gZnVuY3Rpb24gKGZvcm1Db250ZXh0LCBidXR0b25TZXR0aW5nTmFtZSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYnV0dG9uSGVscGVyLCBjb25maXJtYXRpb247XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b25IZWxwZXIgPSBuZXcgQnV0dG9uRm9ybUhlbHBlcl8xLkJ1dHRvbkZvcm1IZWxwZXIoZm9ybUNvbnRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgYnV0dG9uSGVscGVyLmluaXRpYWxpemVTZXR0aW5ncyhidXR0b25TZXR0aW5nTmFtZSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWJ1dHRvbkhlbHBlci5idXR0b25BZHZhbmNlZFNldHRpbmcuZXNwX3Nob3djb25maXJtYXRpb25kaWFsb2cpIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgYnV0dG9uSGVscGVyLm9wZW5Db25maXJtYXRpb25EaWFsb2dCZWZvcmVSdW4oKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpcm1hdGlvbiA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY29uZmlybWF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAzO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShmb3JtQ29udGV4dC5kYXRhLmVudGl0eS5nZXRJc0RpcnR5KCkgJiYgYnV0dG9uSGVscGVyLmJ1dHRvblNldHRpbmcuZXNwX3NhdmViZWZvcmVydW5uaW5nKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgNV07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlNhdmluZyBmb3JtIGJlZm9yZSBydW5uaW5nIHRoZSBidXR0b25cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBmb3JtQ29udGV4dC5kYXRhLnNhdmUoKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gNTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhYnV0dG9uSGVscGVyLmJ1dHRvblNldHRpbmcuZXNwX2VuZHBvaW50KSByZXR1cm4gWzMgLypicmVhayovLCA3XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIEJ1dHRvbkV4Y2VwdGlvbl8xLkV4Y2VwdGlvbkxvd0NvZGVCdXR0b24uc2hvd0Zvcm1Ob3RpZmljYXRpb25HZW5lcmljRXJyb3IoXCJFbmRwb2ludCBOb3QgU2V0XCIsIFwiVGhlIGVuZHBvaW50IGZvciB0aGUgYnV0dG9uIGlzIG5vdCBzZXQuIFBsZWFzZSBzZXQgaXQgdXAgaW4gdGhlIGJ1dHRvbiBzZXR0aW5ncy5cIildO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGJ1dHRvbkhlbHBlci5idXR0b25BZHZhbmNlZFNldHRpbmcuZXNwX2V4ZWN1dGlvbm1vZGUgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgMSAvKiBlc3BfYnV0dG9uYWR2YW5jZWRzZXR0aW5nX2VzcF9idXR0b25hZHZhbmNlZHNldHRpbmdfZXNwX2V4ZWN1dGlvbm1vZGUuQXN5bmMgKi8pKSByZXR1cm4gWzMgLypicmVhayovLCA5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZXhlY3V0ZUFzeW5jKGJ1dHRvbkhlbHBlcildO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCAxMV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgOTogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5leGVjdXRlU3luYyhidXR0b25IZWxwZXIpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMTE7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTE6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBFeGVjdXRlcyBhbiBhc3luY2hyb25vdXMgSFRUUCBjYWxsLlxuICAgICAqIEBwYXJhbSBidXR0b25IZWxwZXIgLSBUaGUgaW5pdGlhbGl6ZWQgQnV0dG9uRm9ybUhlbHBlciBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBCdXR0b25SZWdpc3RyYXRpb25Gb3JtLmV4ZWN1dGVBc3luYyA9IGZ1bmN0aW9uIChidXR0b25IZWxwZXIpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGJ1dHRvblNldHRpbmcsIGJ1dHRvbkFkdmFuY2VkU2V0dGluZztcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b25TZXR0aW5nID0gYnV0dG9uSGVscGVyLmJ1dHRvblNldHRpbmcsIGJ1dHRvbkFkdmFuY2VkU2V0dGluZyA9IGJ1dHRvbkhlbHBlci5idXR0b25BZHZhbmNlZFNldHRpbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkV4ZWN1dGluZyBhc3luYyBjYWxsIHRvIFwiLmNvbmNhdChidXR0b25TZXR0aW5nID09PSBudWxsIHx8IGJ1dHRvblNldHRpbmcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGJ1dHRvblNldHRpbmcuZXNwX2VuZHBvaW50KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShidXR0b25BZHZhbmNlZFNldHRpbmcgPT09IG51bGwgfHwgYnV0dG9uQWR2YW5jZWRTZXR0aW5nID09PSB2b2lkIDAgPyB2b2lkIDAgOiBidXR0b25BZHZhbmNlZFNldHRpbmcuZXNwX2FzeW5jZm9ybW5vdGlmaWNhdGlvbikpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgYnV0dG9uSGVscGVyLmFzeW5jRm9ybU5vdGlmaWNhdGlvbigpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAyO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b25IZWxwZXIubWFrZVJlcXVlc3QoXCJQT1NUXCIsIGJ1dHRvblNldHRpbmcuZXNwX2VuZHBvaW50LCBidXR0b25IZWxwZXIuZ2V0UGF5bG9hZCgpKS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsgcmV0dXJuIF9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgQnV0dG9uRXhjZXB0aW9uXzEuRXhjZXB0aW9uTG93Q29kZUJ1dHRvbi5zaG93Rm9ybU5vdGlmaWNhdGlvbkdlbmVyaWNFcnJvcihcIkVycm9yIGR1cmluZyBIVFRQIENhbGxcIiwgZXJyb3IubWVzc2FnZSldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBidXR0b25IZWxwZXIuY2xlYXJGb3JtTm90aWZpY2F0aW9uKCldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBFeGVjdXRlcyBhIHN5bmNocm9ub3VzIEhUVFAgY2FsbC5cbiAgICAgKiBAcGFyYW0gYnV0dG9uSGVscGVyIC0gVGhlIGluaXRpYWxpemVkIEJ1dHRvbkZvcm1IZWxwZXIgaW5zdGFuY2UuXG4gICAgICovXG4gICAgQnV0dG9uUmVnaXN0cmF0aW9uRm9ybS5leGVjdXRlU3luYyA9IGZ1bmN0aW9uIChidXR0b25IZWxwZXIpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGJ1dHRvblNldHRpbmcsIGJ1dHRvbkFkdmFuY2VkU2V0dGluZywgcmVzcG9uc2UsIGVycm9yTWVzc2FnZSwgX2EsIF9iLCBlcnJvclRleHQsIHJlZGlyZWN0UmVzcG9uc2UsIF9jLCBfZDtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgX2UsIF9mO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfZykge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2cubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uU2V0dGluZyA9IGJ1dHRvbkhlbHBlci5idXR0b25TZXR0aW5nLCBidXR0b25BZHZhbmNlZFNldHRpbmcgPSBidXR0b25IZWxwZXIuYnV0dG9uQWR2YW5jZWRTZXR0aW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJFeGVjdXRpbmcgc3luYyBjYWxsIHRvIFwiLmNvbmNhdChidXR0b25TZXR0aW5nID09PSBudWxsIHx8IGJ1dHRvblNldHRpbmcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGJ1dHRvblNldHRpbmcuZXNwX2VuZHBvaW50KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShidXR0b25BZHZhbmNlZFNldHRpbmcgPT09IG51bGwgfHwgYnV0dG9uQWR2YW5jZWRTZXR0aW5nID09PSB2b2lkIDAgPyB2b2lkIDAgOiBidXR0b25BZHZhbmNlZFNldHRpbmcuZXNwX3N5bmNmb3Jtbm90aWZpY2F0aW9uKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBidXR0b25IZWxwZXIuc3luY0Zvcm1Ob3RpZmljYXRpb24oKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9nLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9nLmxhYmVsID0gMjtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoYnV0dG9uQWR2YW5jZWRTZXR0aW5nID09PSBudWxsIHx8IGJ1dHRvbkFkdmFuY2VkU2V0dGluZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogYnV0dG9uQWR2YW5jZWRTZXR0aW5nLmVzcF9zeW5jc3Bpbm5lcikpIHJldHVybiBbMyAvKmJyZWFrKi8sIDVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhYnV0dG9uQWR2YW5jZWRTZXR0aW5nLmVzcF9zeW5jc3Bpbm5lcnRleHQpIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgQnV0dG9uRXhjZXB0aW9uXzEuRXhjZXB0aW9uTG93Q29kZUJ1dHRvbi5zaG93Rm9ybU5vdGlmaWNhdGlvbkdlbmVyaWNFcnJvcihcIlN5bmMgU3Bpbm5lciBUZXh0IEVycm9yXCIsIFwiVGhlIHN5bmMgc3Bpbm5lciB0ZXh0IGlzIGVtcHR5ISBQbGVhc2UgZmlsbCBpdCBvbiB5b3VyIGNvbmZpZ3VyYXRpb24gc2V0dGluZ3MuXCIpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2cuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBYcm0uVXRpbGl0eS5zaG93UHJvZ3Jlc3NJbmRpY2F0b3IoYnV0dG9uQWR2YW5jZWRTZXR0aW5nLmVzcF9zeW5jc3Bpbm5lcnRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2cubGFiZWwgPSA1O1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6IHJldHVybiBbNCAvKnlpZWxkKi8sIGJ1dHRvbkhlbHBlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYWtlUmVxdWVzdChcIlBPU1RcIiwgYnV0dG9uU2V0dGluZy5lc3BfZW5kcG9pbnQsIGJ1dHRvbkhlbHBlci5nZXRQYXlsb2FkKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgeyByZXR1cm4gX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCBCdXR0b25FeGNlcHRpb25fMS5FeGNlcHRpb25Mb3dDb2RlQnV0dG9uLnNob3dGb3JtTm90aWZpY2F0aW9uR2VuZXJpY0Vycm9yKFwiRXJyb3IgZHVyaW5nIEhUVFAgQ2FsbFwiLCBlcnJvci5tZXNzYWdlKV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChidXR0b25BZHZhbmNlZFNldHRpbmcgPT09IG51bGwgfHwgYnV0dG9uQWR2YW5jZWRTZXR0aW5nID09PSB2b2lkIDAgPyB2b2lkIDAgOiBidXR0b25BZHZhbmNlZFNldHRpbmcuZXNwX3N5bmNzcGlubmVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFhybS5VdGlsaXR5LmNsb3NlUHJvZ3Jlc3NJbmRpY2F0b3IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uSGVscGVyLmNsZWFyRm9ybU5vdGlmaWNhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfZy5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAwKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgOV07XG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b25IZWxwZXIuY2xlYXJTeW5jTm90aWZpY2F0aW9ucygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2IgPSAoX2EgPSBCYXNlQnV0dG9uUmVzcG9uc2VNb2RlbHNfMS5FcnJvck1lc3NhZ2VSZXNwb25zZSkuZnJvbUpzb247XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZXNwb25zZS50ZXh0KCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2UgPSBfYi5hcHBseShfYSwgW19nLnNlbnQoKV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgQnV0dG9uRXhjZXB0aW9uXzEuRXhjZXB0aW9uTG93Q29kZUJ1dHRvbi5zaG93Rm9ybU5vdGlmaWNhdGlvbkdlbmVyaWNFcnJvcihlcnJvck1lc3NhZ2UudGl0bGUsIGVycm9yTWVzc2FnZS5tZXNzYWdlKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9nLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoKChfZSA9IHJlc3BvbnNlLnN0YXR1cykgIT09IG51bGwgJiYgX2UgIT09IHZvaWQgMCA/IF9lIDogNTAwKSA+PSA1MDApKSByZXR1cm4gWzMgLypicmVhayovLCAxMl07XG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b25IZWxwZXIuY2xlYXJTeW5jTm90aWZpY2F0aW9ucygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmVzcG9uc2UudGV4dCgpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yVGV4dCA9IChfZiA9IChfZy5zZW50KCkpKSAhPT0gbnVsbCAmJiBfZiAhPT0gdm9pZCAwID8gX2YgOiBcIkFuIGVycm9yIG9jY3VycmVkIG9uIHRoZSBzZXJ2ZXIuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBCdXR0b25FeGNlcHRpb25fMS5FeGNlcHRpb25Mb3dDb2RlQnV0dG9uLnNob3dGb3JtTm90aWZpY2F0aW9uR2VuZXJpY0Vycm9yKFwiRXJyb3IgZHVyaW5nIEhUVFAgQ2FsbFwiLCBcIkVycm9yIGNvZGU6IFwiLmNvbmNhdChyZXNwb25zZS5zdGF0dXMsIFwiXFxuXCIpLmNvbmNhdChlcnJvclRleHQpKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfZy5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTI6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDE5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbkhlbHBlci5jbGVhclN5bmNOb3RpZmljYXRpb25zKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShidXR0b25BZHZhbmNlZFNldHRpbmcgPT09IG51bGwgfHwgYnV0dG9uQWR2YW5jZWRTZXR0aW5nID09PSB2b2lkIDAgPyB2b2lkIDAgOiBidXR0b25BZHZhbmNlZFNldHRpbmcuZXNwX3N5bmNzdWNjZXNzZm9ybW5vdGlmaWNhdGlvbikpIHJldHVybiBbMyAvKmJyZWFrKi8sIDE0XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGJ1dHRvbkhlbHBlci5zaG93U3VjY2Vzc0Zvcm1Ob3RpZmljYXRpb24oKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTM6XG4gICAgICAgICAgICAgICAgICAgICAgICBfZy5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfZy5sYWJlbCA9IDE0O1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE0OlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoYnV0dG9uQWR2YW5jZWRTZXR0aW5nID09PSBudWxsIHx8IGJ1dHRvbkFkdmFuY2VkU2V0dGluZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogYnV0dG9uQWR2YW5jZWRTZXR0aW5nLmVzcF9zeW5jY29uZmlybWF0aW9uYm94KSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMTZdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgYnV0dG9uSGVscGVyLm9wZW5TdWNjZXNzRGlhbG9nU3luYygpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxNTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9nLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9nLmxhYmVsID0gMTY7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTY6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShidXR0b25BZHZhbmNlZFNldHRpbmcgPT09IG51bGwgfHwgYnV0dG9uQWR2YW5jZWRTZXR0aW5nID09PSB2b2lkIDAgPyB2b2lkIDAgOiBidXR0b25BZHZhbmNlZFNldHRpbmcuZXNwX3N5bmNjb25maXJtYXRpb25ib3hyZWRpcmVjdCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDE4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9kID0gKF9jID0gQmFzZUJ1dHRvblJlc3BvbnNlTW9kZWxzXzEuUmVkaXJlY3RSZXNwb25zZSkuZnJvbUpzb247XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZXNwb25zZS50ZXh0KCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE3OlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVkaXJlY3RSZXNwb25zZSA9IF9kLmFwcGx5KF9jLCBbX2cuc2VudCgpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b25IZWxwZXIub3BlblN1Y2Nlc3NEaWFsb2dSZWRpcmVjdChyZWRpcmVjdFJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9nLmxhYmVsID0gMTg7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTg6XG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b25IZWxwZXIucmVsb2FkRm9ybSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2cubGFiZWwgPSAxOTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOTogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBCdXR0b25SZWdpc3RyYXRpb25Gb3JtO1xufSgpKTtcbmV4cG9ydHMuQnV0dG9uUmVnaXN0cmF0aW9uRm9ybSA9IEJ1dHRvblJlZ2lzdHJhdGlvbkZvcm07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/LowCodeButtonFormBase.ts\n");

/***/ }),

/***/ "./src/Models/BaseButtonResponseModels.ts":
/*!************************************************!*\
  !*** ./src/Models/BaseButtonResponseModels.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.ErrorMessageResponse = exports.RedirectResponse = void 0;\nvar ButtonException_1 = __webpack_require__(/*! ../Exceptions/ButtonException */ \"./src/Exceptions/ButtonException.ts\");\nvar RedirectResponse = /** @class */ (function () {\n    function RedirectResponse(redirectUri) {\n        this.redirectUri = redirectUri;\n    }\n    RedirectResponse.fromJson = function (json) {\n        var data = JSON.parse(json);\n        if (typeof data.redirectUri !== \"string\") {\n            ButtonException_1.ExceptionLowCodeButton.showFormNotificationGenericError(\"Redirect URI Not Found\", \"The redirect URI was not found in the response.\");\n            throw new Error(\"Invalid JSON format for RedirectResponse\");\n        }\n        return new RedirectResponse(data.redirectUri);\n    };\n    return RedirectResponse;\n}());\nexports.RedirectResponse = RedirectResponse;\nvar ErrorMessageResponse = /** @class */ (function () {\n    function ErrorMessageResponse(message, title) {\n        this.message = message;\n        this.title = title;\n    }\n    ErrorMessageResponse.fromJson = function (json) {\n        var _a;\n        var data = JSON.parse(json);\n        console.log(\"Error message data\", data);\n        if (typeof data.message !== \"string\") {\n            ButtonException_1.ExceptionLowCodeButton.showFormNotificationGenericError(\"Error Message Not Found\", \"The error message was not found in the response.\");\n            throw new Error(\"Invalid JSON format for ErrorMessage\");\n        }\n        return new ErrorMessageResponse(data.message, (_a = data.title) !== null && _a !== void 0 ? _a : \"\");\n    };\n    return ErrorMessageResponse;\n}());\nexports.ErrorMessageResponse = ErrorMessageResponse;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvTW9kZWxzL0Jhc2VCdXR0b25SZXNwb25zZU1vZGVscy50cyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCw0QkFBNEIsR0FBRyx3QkFBd0I7QUFDdkQsd0JBQXdCLG1CQUFPLENBQUMsMEVBQStCO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCw0QkFBNEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9MQ0IvLi9zcmMvTW9kZWxzL0Jhc2VCdXR0b25SZXNwb25zZU1vZGVscy50cz9hNTcyIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5FcnJvck1lc3NhZ2VSZXNwb25zZSA9IGV4cG9ydHMuUmVkaXJlY3RSZXNwb25zZSA9IHZvaWQgMDtcbnZhciBCdXR0b25FeGNlcHRpb25fMSA9IHJlcXVpcmUoXCIuLi9FeGNlcHRpb25zL0J1dHRvbkV4Y2VwdGlvblwiKTtcbnZhciBSZWRpcmVjdFJlc3BvbnNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFJlZGlyZWN0UmVzcG9uc2UocmVkaXJlY3RVcmkpIHtcbiAgICAgICAgdGhpcy5yZWRpcmVjdFVyaSA9IHJlZGlyZWN0VXJpO1xuICAgIH1cbiAgICBSZWRpcmVjdFJlc3BvbnNlLmZyb21Kc29uID0gZnVuY3Rpb24gKGpzb24pIHtcbiAgICAgICAgdmFyIGRhdGEgPSBKU09OLnBhcnNlKGpzb24pO1xuICAgICAgICBpZiAodHlwZW9mIGRhdGEucmVkaXJlY3RVcmkgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIEJ1dHRvbkV4Y2VwdGlvbl8xLkV4Y2VwdGlvbkxvd0NvZGVCdXR0b24uc2hvd0Zvcm1Ob3RpZmljYXRpb25HZW5lcmljRXJyb3IoXCJSZWRpcmVjdCBVUkkgTm90IEZvdW5kXCIsIFwiVGhlIHJlZGlyZWN0IFVSSSB3YXMgbm90IGZvdW5kIGluIHRoZSByZXNwb25zZS5cIik7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIEpTT04gZm9ybWF0IGZvciBSZWRpcmVjdFJlc3BvbnNlXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgUmVkaXJlY3RSZXNwb25zZShkYXRhLnJlZGlyZWN0VXJpKTtcbiAgICB9O1xuICAgIHJldHVybiBSZWRpcmVjdFJlc3BvbnNlO1xufSgpKTtcbmV4cG9ydHMuUmVkaXJlY3RSZXNwb25zZSA9IFJlZGlyZWN0UmVzcG9uc2U7XG52YXIgRXJyb3JNZXNzYWdlUmVzcG9uc2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRXJyb3JNZXNzYWdlUmVzcG9uc2UobWVzc2FnZSwgdGl0bGUpIHtcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgIH1cbiAgICBFcnJvck1lc3NhZ2VSZXNwb25zZS5mcm9tSnNvbiA9IGZ1bmN0aW9uIChqc29uKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdmFyIGRhdGEgPSBKU09OLnBhcnNlKGpzb24pO1xuICAgICAgICBjb25zb2xlLmxvZyhcIkVycm9yIG1lc3NhZ2UgZGF0YVwiLCBkYXRhKTtcbiAgICAgICAgaWYgKHR5cGVvZiBkYXRhLm1lc3NhZ2UgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIEJ1dHRvbkV4Y2VwdGlvbl8xLkV4Y2VwdGlvbkxvd0NvZGVCdXR0b24uc2hvd0Zvcm1Ob3RpZmljYXRpb25HZW5lcmljRXJyb3IoXCJFcnJvciBNZXNzYWdlIE5vdCBGb3VuZFwiLCBcIlRoZSBlcnJvciBtZXNzYWdlIHdhcyBub3QgZm91bmQgaW4gdGhlIHJlc3BvbnNlLlwiKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgSlNPTiBmb3JtYXQgZm9yIEVycm9yTWVzc2FnZVwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IEVycm9yTWVzc2FnZVJlc3BvbnNlKGRhdGEubWVzc2FnZSwgKF9hID0gZGF0YS50aXRsZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogXCJcIik7XG4gICAgfTtcbiAgICByZXR1cm4gRXJyb3JNZXNzYWdlUmVzcG9uc2U7XG59KCkpO1xuZXhwb3J0cy5FcnJvck1lc3NhZ2VSZXNwb25zZSA9IEVycm9yTWVzc2FnZVJlc3BvbnNlO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/Models/BaseButtonResponseModels.ts\n");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval-source-map devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/LowCodeButtonBase.ts");
/******/ 	LCB = __webpack_exports__;
/******/ 	
/******/ })()
;